<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<LINK REL=STYLESHEET TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">
<META NAME="GENERATOR" CONTENT="Java2HTML Version 1.0.9">
<TITLE>virtual.dv.ViewerFrame (Java2HTML)</TITLE>
</HEAD>
<BODY><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">ViewerFrame</font>
</td>
<td align="right" colspan="2" width="33%"></td>
</tr>
</TABLE>
<pre ID="Classes">
<A NAME="1"></A><FONT ID="MultiLineComment">/*--- formatted by Jindent 2.1, (www.c-lab.de/~jindent) ---*/</FONT>
<A NAME="2"></A>
<A NAME="3"></A><FONT ID="MultiLineComment">/*
<A NAME="4"></A> * Copyright (C) 1999, 2000 Thomas Hacklaender, Christian Schalla,
<A NAME="5"></A> * Andreas Truemper
<A NAME="6"></A> * 
<A NAME="7"></A> * This program is free software; you can redistribute it and/or
<A NAME="8"></A> * modify it under the terms of the GFNU General Public License 2
<A NAME="9"></A> * as published by the Free Software Foundation.
<A NAME="10"></A> * 
<A NAME="11"></A> * This program is distributed in the hope that it will be useful,
<A NAME="12"></A> * but WITHOUT ANY WARRANTY; without even the implied warranty of
<A NAME="13"></A> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<A NAME="14"></A> * GNU General Public License for more details.
<A NAME="15"></A> * 
<A NAME="16"></A> * You should have received a copy of the GNU General Public License
<A NAME="17"></A> * along with this program; if not, write to the Free Software
<A NAME="18"></A> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
<A NAME="19"></A> */</FONT>
<A NAME="20"></A><FONT ID="Package">package</FONT> <A HREF="../../virtual.dv.index.html" target="packageFrame">virtual.dv</A>;
<A NAME="21"></A>
<A NAME="22"></A>
<A NAME="23"></A><FONT ID="Import">import</FONT> java.awt.*;
<A NAME="24"></A><FONT ID="Import">import</FONT> java.awt.event.*;
<A NAME="25"></A><FONT ID="Import">import</FONT> java.awt.image.*;
<A NAME="26"></A><FONT ID="Import">import</FONT> java.io.*;
<A NAME="27"></A><FONT ID="Import">import</FONT> java.util.*;
<A NAME="28"></A><FONT ID="Import">import</FONT> javax.swing.*;
<A NAME="29"></A><FONT ID="Import">import</FONT> javax.swing.event.*;
<A NAME="30"></A>
<A NAME="31"></A><FONT ID="Import">import</FONT> <A HREF="../../virtual.tools.index.html" target="packageFrame">virtual.tools.*</A>;
<A NAME="32"></A>
<A NAME="33"></A><FONT ID="SingleLineComment">// import jigl.*;
<A NAME="34"></A></FONT><FONT ID="Import">import</FONT> <A HREF="../../jigl/image/RealGrayImage.java.html">jigl.image.RealGrayImage</A>;
<A NAME="35"></A>
<A NAME="36"></A><FONT ID="Import">import</FONT> rad.dicom.dcm.*;
<A NAME="37"></A><FONT ID="Import">import</FONT> rad.dicom.ima.*;
<A NAME="38"></A><FONT ID="Import">import</FONT> rad.ijplugin.dcm.*;
<A NAME="39"></A><FONT ID="Import">import</FONT> rad.ijplugin.util.*;
<A NAME="40"></A>
<A NAME="41"></A>
<A NAME="42"></A><FONT ID="FormalComment">/**
<A NAME="43"></A> * Die Klasses implementiert das Hauptfenster des DICOM-Viewers mit all seinen
<A NAME="44"></A> * Bedienelementen und deren Ereignisbehandlung.
<A NAME="45"></A> * Ein Grossteil der Funktionalitaet des DICOM-Viewers steckt ebenfalls in
<A NAME="46"></A> * dieser Klasse.
<A NAME="47"></A> * &lt;DL&gt;&lt;DT&gt;&lt;B&gt;Modifications: &lt;/B&gt;&lt;DD&gt;
<A NAME="48"></A> * Thomas Hacklaender 2000.8.20:
<A NAME="49"></A> * Die Methode pbSave_actionPerformed neu implementiert. Sie verwendet jetzt
<A NAME="50"></A> * das ExportPanel aus der dcm-Bibliothek.&lt;br&gt;
<A NAME="51"></A> * Thomas Hacklaender 2000.8.20:
<A NAME="52"></A> * Die Methode pbLoad_actionPerformed neu implementiert. Sie verwendet jetzt
<A NAME="53"></A> * das ImportPanel aus der dcm-Bibliothek. Damit ist auch die Methode
<A NAME="54"></A> * pbLoadSeries_actionPerformed ueberflueesig geworden. Der Button LoadSeries und
<A NAME="55"></A> * der Menueeintrag "Serie Oeffnen" wurde entfernt. Die Klasse SeriesLoader
<A NAME="56"></A> * wurde komplett neu implementiert.&lt;br&gt;
<A NAME="57"></A> * Thomas Hacklaender 2000.4.3:
<A NAME="58"></A> * Umstellung auf die aktuelle Version 2.1 des dcm-Package.&lt;br&gt;
<A NAME="59"></A> * Thomas Hacklaender 2000.4.3:
<A NAME="60"></A> * Die Methoden calcProjection2 und calcProjection2 komplett neu
<A NAME="61"></A> * programmiert. Sie stellen die Rekonstruktionen jetz ohne
<A NAME="62"></A> * Verzerrung dar.&lt;br&gt;
<A NAME="63"></A> * Thomas Hacklaender 2000.7.9:
<A NAME="64"></A> * In loadDcmImage Window-Werte korrekt einlesen.&lt;br&gt;
<A NAME="65"></A> * Thomas Hacklaender 2000.7.9:
<A NAME="66"></A> * Knopf zur Erzeugung eines Referenzdatensatzes und zugehoerige Methoden.&lt;br&gt;
<A NAME="67"></A> * Thomas Hacklaender 2000.7.14:
<A NAME="68"></A> * Menues erweitert.&lt;br&gt;
<A NAME="69"></A> * Thomas Hacklaender 2002.10.12:
<A NAME="70"></A> * About-Menues gestrichen. Info in Tools-Menue.&lt;br&gt;
<A NAME="71"></A> * &lt;/DD&gt;&lt;/DL&gt;
<A NAME="72"></A> * @author   Christian Schalla
<A NAME="73"></A> * @author   Andreas Truemper
<A NAME="74"></A> * @version  2002.10.12
<A NAME="75"></A> */</FONT>
<A NAME="76"></A><FONT ID="Public">public</FONT> <FONT ID="Class">class</FONT> ViewerFrame <FONT ID="Extends">extends</FONT> JFrame {
<A NAME="77"></A>
<A NAME="78"></A>  <FONT ID="SingleLineComment">// Einige Konstanten
<A NAME="79"></A></FONT>
<A NAME="80"></A>
<A NAME="81"></A>  <FONT ID="FormalComment">/**
<A NAME="82"></A>   * Standard-Mauszeiger.
<A NAME="83"></A>   */</FONT>
<A NAME="84"></A>  <FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> Cursor  DEFAULT_CURSOR = <FONT ID="New">new</FONT> Cursor(Cursor.DEFAULT_CURSOR);
<A NAME="85"></A>
<A NAME="86"></A>
<A NAME="87"></A>  <FONT ID="FormalComment">/**
<A NAME="88"></A>   * Mauszeiger fuer die Zoom-Funktion, die Distanzmessung und die Winlemessung.
<A NAME="89"></A>   */</FONT>
<A NAME="90"></A>  <FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> Cursor  ZOOM_CURSOR = <FONT ID="New">new</FONT> Cursor(Cursor.CROSSHAIR_CURSOR);
<A NAME="91"></A>
<A NAME="92"></A>
<A NAME="93"></A>  <FONT ID="FormalComment">/**
<A NAME="94"></A>   * Mauszeiger fuer die Fensterung.
<A NAME="95"></A>   */</FONT>
<A NAME="96"></A>  <FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> Cursor  WINDOW_CURSOR = <FONT ID="New">new</FONT> Cursor(Cursor.MOVE_CURSOR);
<A NAME="97"></A>
<A NAME="98"></A>  <FONT ID="SingleLineComment">// Menueleiste inlusive ihrer Menues und deren Menueeintraege erzeugen
<A NAME="99"></A></FONT>
<A NAME="100"></A>
<A NAME="101"></A>  <FONT ID="FormalComment">/**
<A NAME="102"></A>   * Die Menueleiste.
<A NAME="103"></A>   */</FONT>
<A NAME="104"></A>  <FONT ID="Private">private</FONT> JMenuBar      menuBar1 = <FONT ID="New">new</FONT> JMenuBar();
<A NAME="105"></A>
<A NAME="106"></A>
<A NAME="107"></A>  <FONT ID="FormalComment">/**
<A NAME="108"></A>   * Das Datei-Menue.
<A NAME="109"></A>   */</FONT>
<A NAME="110"></A>  <FONT ID="Private">private</FONT> JMenu         menuFile = <FONT ID="New">new</FONT> JMenu();
<A NAME="111"></A>
<A NAME="112"></A>
<A NAME="113"></A>  <FONT ID="FormalComment">/**
<A NAME="114"></A>   * Dateimenueeintrag 'Bild Oeffnen'.
<A NAME="115"></A>   */</FONT>
<A NAME="116"></A>  <FONT ID="Private">private</FONT> JMenuItem     menuFileImageOpen = <FONT ID="New">new</FONT> JMenuItem();
<A NAME="117"></A>
<A NAME="118"></A>
<A NAME="119"></A>  <FONT ID="FormalComment">/**
<A NAME="120"></A>   * Dateimenueeintrag 'Serie Oeffnen'.
<A NAME="121"></A>   */</FONT>
<A NAME="122"></A>
<A NAME="123"></A>  <FONT ID="SingleLineComment">// Nicht mehr notwendig: tha 2000.8.20
<A NAME="124"></A></FONT>  <FONT ID="SingleLineComment">// private JMenuItem      menuFileSeriesOpen = new JMenuItem();
<A NAME="125"></A></FONT>
<A NAME="126"></A>
<A NAME="127"></A>  <FONT ID="FormalComment">/**
<A NAME="128"></A>   * Dateimenueeintrag 'Speichern'.
<A NAME="129"></A>   */</FONT>
<A NAME="130"></A>  <FONT ID="Private">private</FONT> JMenuItem     menuFileSave = <FONT ID="New">new</FONT> JMenuItem();
<A NAME="131"></A>
<A NAME="132"></A>
<A NAME="133"></A>  <FONT ID="FormalComment">/**
<A NAME="134"></A>   * Dateimenueeintrag 'Drucken'.
<A NAME="135"></A>   */</FONT>
<A NAME="136"></A>  <FONT ID="Private">private</FONT> JMenuItem     menuFilePrint = <FONT ID="New">new</FONT> JMenuItem();
<A NAME="137"></A>
<A NAME="138"></A>
<A NAME="139"></A>  <FONT ID="FormalComment">/**
<A NAME="140"></A>   * Dateimenueeintrag 'Beenden'.
<A NAME="141"></A>   */</FONT>
<A NAME="142"></A>  <FONT ID="Private">private</FONT> JMenuItem     menuFileExit = <FONT ID="New">new</FONT> JMenuItem();
<A NAME="143"></A>
<A NAME="144"></A>
<A NAME="145"></A>  <FONT ID="FormalComment">/**
<A NAME="146"></A>   * Bearbeiten-Menue.
<A NAME="147"></A>   */</FONT>
<A NAME="148"></A>  <FONT ID="Private">private</FONT> JMenu         menuEdit = <FONT ID="New">new</FONT> JMenu();
<A NAME="149"></A>
<A NAME="150"></A>
<A NAME="151"></A>  <FONT ID="FormalComment">/**
<A NAME="152"></A>   * Bearbeiten-Menueeintrag 'Selektiertes Bild loeschen'.
<A NAME="153"></A>   */</FONT>
<A NAME="154"></A>  <FONT ID="Private">private</FONT> JMenuItem     menuEditClear = <FONT ID="New">new</FONT> JMenuItem();
<A NAME="155"></A>
<A NAME="156"></A>
<A NAME="157"></A>  <FONT ID="FormalComment">/**
<A NAME="158"></A>   * Bearbeiten-Menueeintrag 'Alle Bilder loeschen'.
<A NAME="159"></A>   */</FONT>
<A NAME="160"></A>  <FONT ID="Private">private</FONT> JMenuItem     menuEditClearAll = <FONT ID="New">new</FONT> JMenuItem();
<A NAME="161"></A>
<A NAME="162"></A>
<A NAME="163"></A>  <FONT ID="FormalComment">/**
<A NAME="164"></A>   * Tools-Menue.
<A NAME="165"></A>   */</FONT>
<A NAME="166"></A>  <FONT ID="Private">private</FONT> JMenu         menuTools = <FONT ID="New">new</FONT> JMenu();
<A NAME="167"></A>
<A NAME="168"></A>
<A NAME="169"></A>  <FONT ID="FormalComment">/**
<A NAME="170"></A>   * Hilfemenueeintrag 'Info...'.
<A NAME="171"></A>   */</FONT>
<A NAME="172"></A>  <FONT ID="Private">private</FONT> JMenuItem     menuToolsAbout = <FONT ID="New">new</FONT> JMenuItem();
<A NAME="173"></A>
<A NAME="174"></A>
<A NAME="175"></A>  <FONT ID="FormalComment">/**
<A NAME="176"></A>   * Hilfe-Menue.
<A NAME="177"></A>   */</FONT>
<A NAME="178"></A>
<A NAME="179"></A>  <FONT ID="SingleLineComment">// th 2002.10.12
<A NAME="180"></A></FONT>  <FONT ID="SingleLineComment">// private JMenu          menuHelp = new JMenu();
<A NAME="181"></A></FONT>
<A NAME="182"></A>
<A NAME="183"></A>  <FONT ID="SingleLineComment">// Hier werden einige Icons fuer einige Buttons deklariert
<A NAME="184"></A></FONT>
<A NAME="185"></A>
<A NAME="186"></A>  <FONT ID="FormalComment">/**
<A NAME="187"></A>   * Icon fuer den Knopf zum Laden eines Einzelbides.
<A NAME="188"></A>   */</FONT>
<A NAME="189"></A>  <FONT ID="Private">private</FONT> ImageIcon     iOpen;
<A NAME="190"></A>
<A NAME="191"></A>
<A NAME="192"></A>  <FONT ID="FormalComment">/**
<A NAME="193"></A>   * Icon fuer den Knopf zum Laden einer Bildserie.
<A NAME="194"></A>   */</FONT>
<A NAME="195"></A>
<A NAME="196"></A>  <FONT ID="SingleLineComment">// Nicht mehr notwendig: tha 2000.8.20
<A NAME="197"></A></FONT>  <FONT ID="SingleLineComment">// private ImageIcon      iOpenSeries;
<A NAME="198"></A></FONT>
<A NAME="199"></A>
<A NAME="200"></A>  <FONT ID="FormalComment">/**
<A NAME="201"></A>   * Icon fuer den Knopf zum Speichern eines Bildes.
<A NAME="202"></A>   */</FONT>
<A NAME="203"></A>  <FONT ID="Private">private</FONT> ImageIcon     iSave;
<A NAME="204"></A>
<A NAME="205"></A>
<A NAME="206"></A>  <FONT ID="FormalComment">/**
<A NAME="207"></A>   * Icon fuer den Knopf zum Drucken des Zeichenflaecheninhalts.
<A NAME="208"></A>   */</FONT>
<A NAME="209"></A>  <FONT ID="Private">private</FONT> ImageIcon     iPrint;
<A NAME="210"></A>
<A NAME="211"></A>
<A NAME="212"></A>  <FONT ID="FormalComment">/**
<A NAME="213"></A>   * Icon fuer den Knopf zur Erzeugung eines Referenzbildes.
<A NAME="214"></A>   */</FONT>
<A NAME="215"></A>  <FONT ID="Private">private</FONT> ImageIcon     iRefIma;
<A NAME="216"></A>
<A NAME="217"></A>
<A NAME="218"></A>  <FONT ID="FormalComment">/**
<A NAME="219"></A>   * Icon fuer den Knopf zur Darstellung eines Einzelbildes.
<A NAME="220"></A>   */</FONT>
<A NAME="221"></A>  <FONT ID="Private">private</FONT> ImageIcon     i1Image;
<A NAME="222"></A>
<A NAME="223"></A>
<A NAME="224"></A>  <FONT ID="FormalComment">/**
<A NAME="225"></A>   * Icon fuer den Knopf zur gleichzeitigen Darstellung von 4 Bildern.
<A NAME="226"></A>   */</FONT>
<A NAME="227"></A>  <FONT ID="Private">private</FONT> ImageIcon     i4Images;
<A NAME="228"></A>
<A NAME="229"></A>
<A NAME="230"></A>  <FONT ID="FormalComment">/**
<A NAME="231"></A>   * Icon fuer den Knopf zum Ein- bzw. Ausschalten der Bildbeschriftung.
<A NAME="232"></A>   */</FONT>
<A NAME="233"></A>  <FONT ID="Private">private</FONT> ImageIcon     iInfoText;
<A NAME="234"></A>
<A NAME="235"></A>
<A NAME="236"></A>  <FONT ID="FormalComment">/**
<A NAME="237"></A>   * Icon fuer den Knopf zur Anzeige des Histogramm-Fensters.
<A NAME="238"></A>   */</FONT>
<A NAME="239"></A>  <FONT ID="Private">private</FONT> ImageIcon     iHistogram;
<A NAME="240"></A>
<A NAME="241"></A>
<A NAME="242"></A>  <FONT ID="FormalComment">/**
<A NAME="243"></A>   * Icon fuer den Knopf zur Anzeiges des k-Raum-Fensters.
<A NAME="244"></A>   */</FONT>
<A NAME="245"></A>  <FONT ID="Private">private</FONT> ImageIcon     iKSpace;
<A NAME="246"></A>
<A NAME="247"></A>
<A NAME="248"></A>  <FONT ID="FormalComment">/**
<A NAME="249"></A>   * Icon fuer den Knopf zur Anzeige des k-Raum-Manipulator-Fensters.
<A NAME="250"></A>   */</FONT>
<A NAME="251"></A>  <FONT ID="Private">private</FONT> ImageIcon     iKSpaceMan;
<A NAME="252"></A>
<A NAME="253"></A>
<A NAME="254"></A>  <FONT ID="FormalComment">/**
<A NAME="255"></A>   * Icon fuer den Knopf zur Winkelmessung.
<A NAME="256"></A>   */</FONT>
<A NAME="257"></A>  <FONT ID="Private">private</FONT> ImageIcon     iAngel;
<A NAME="258"></A>
<A NAME="259"></A>
<A NAME="260"></A>  <FONT ID="FormalComment">/**
<A NAME="261"></A>   * Icon fuer den Knopf zur Auswahl des Standardmauszeigers.
<A NAME="262"></A>   */</FONT>
<A NAME="263"></A>  <FONT ID="Private">private</FONT> ImageIcon     iPointer;
<A NAME="264"></A>
<A NAME="265"></A>
<A NAME="266"></A>  <FONT ID="FormalComment">/**
<A NAME="267"></A>   * Icon fuer den Knopf der Lupe-Funktion.
<A NAME="268"></A>   */</FONT>
<A NAME="269"></A>  <FONT ID="Private">private</FONT> ImageIcon     iZoom;
<A NAME="270"></A>
<A NAME="271"></A>
<A NAME="272"></A>  <FONT ID="FormalComment">/**
<A NAME="273"></A>   * Icon fuer den Knopf der Rotations-Funktion.
<A NAME="274"></A>   */</FONT>
<A NAME="275"></A>  <FONT ID="Private">private</FONT> ImageIcon     iRotate;
<A NAME="276"></A>
<A NAME="277"></A>
<A NAME="278"></A>  <FONT ID="FormalComment">/**
<A NAME="279"></A>   * Icon fuer den Knopf zum Spiegeln des selektierten Bildes.
<A NAME="280"></A>   */</FONT>
<A NAME="281"></A>  <FONT ID="Private">private</FONT> ImageIcon     iMirror;
<A NAME="282"></A>
<A NAME="283"></A>
<A NAME="284"></A>  <FONT ID="FormalComment">/**
<A NAME="285"></A>   * Icon fuer den Knopf zum Invertieren des selektierten Bildes.
<A NAME="286"></A>   */</FONT>
<A NAME="287"></A>  <FONT ID="Private">private</FONT> ImageIcon     iInvert;
<A NAME="288"></A>
<A NAME="289"></A>
<A NAME="290"></A>  <FONT ID="FormalComment">/**
<A NAME="291"></A>   * Icon fuer den Knopf fuer die Grauwertmessungs-Funktion.
<A NAME="292"></A>   */</FONT>
<A NAME="293"></A>  <FONT ID="Private">private</FONT> ImageIcon     iGrayValue;
<A NAME="294"></A>
<A NAME="295"></A>
<A NAME="296"></A>  <FONT ID="FormalComment">/**
<A NAME="297"></A>   * Icon fuer den Knopf zur Abstandsmessung.
<A NAME="298"></A>   */</FONT>
<A NAME="299"></A>  <FONT ID="Private">private</FONT> ImageIcon     iDistance;
<A NAME="300"></A>
<A NAME="301"></A>
<A NAME="302"></A>  <FONT ID="FormalComment">/**
<A NAME="303"></A>   * Icon fuer den Knopf zur Projektionsberechnung (1. Variante).
<A NAME="304"></A>   */</FONT>
<A NAME="305"></A>  <FONT ID="Private">private</FONT> ImageIcon     iProjection1;
<A NAME="306"></A>
<A NAME="307"></A>
<A NAME="308"></A>  <FONT ID="FormalComment">/**
<A NAME="309"></A>   * Icon fuer den Knopf zur Projektionsberechnung (2. Variante).
<A NAME="310"></A>   */</FONT>
<A NAME="311"></A>  <FONT ID="Private">private</FONT> ImageIcon     iProjection2;
<A NAME="312"></A>
<A NAME="313"></A>
<A NAME="314"></A>  <FONT ID="FormalComment">/**
<A NAME="315"></A>   * Icon fuer den Knopf zum Loeschen des selektierten Bilder.
<A NAME="316"></A>   */</FONT>
<A NAME="317"></A>  <FONT ID="Private">private</FONT> ImageIcon     iDelete;
<A NAME="318"></A>
<A NAME="319"></A>
<A NAME="320"></A>  <FONT ID="FormalComment">/**
<A NAME="321"></A>   * Icon fuer den Knopf zur Anzeige des Animationsfensters.
<A NAME="322"></A>   */</FONT>
<A NAME="323"></A>  <FONT ID="Private">private</FONT> ImageIcon     iAnimation;
<A NAME="324"></A>
<A NAME="325"></A>
<A NAME="326"></A>  <FONT ID="FormalComment">/**
<A NAME="327"></A>   * Statusleiste.
<A NAME="328"></A>   */</FONT>
<A NAME="329"></A>  <FONT ID="Protected">protected</FONT> JLabel      statusBar = <FONT ID="New">new</FONT> JLabel();
<A NAME="330"></A>
<A NAME="331"></A>
<A NAME="332"></A>  <FONT ID="FormalComment">/**
<A NAME="333"></A>   * Fortschrittsanzeige.
<A NAME="334"></A>   */</FONT>
<A NAME="335"></A>  <FONT ID="Private">private</FONT> JProgressBar  prbarProgress = <FONT ID="New">new</FONT> JProgressBar();
<A NAME="336"></A>
<A NAME="337"></A>
<A NAME="338"></A>  <FONT ID="FormalComment">/**
<A NAME="339"></A>   * Beschriftung fuer die Positionsangabe des Mauszeigers.
<A NAME="340"></A>   */</FONT>
<A NAME="341"></A>  <FONT ID="Private">private</FONT> JLabel        lPosition = <FONT ID="New">new</FONT> JLabel();
<A NAME="342"></A>
<A NAME="343"></A>
<A NAME="344"></A>  <FONT ID="FormalComment">/**
<A NAME="345"></A>   * Ausgabefeld fuer die Positionsangabe des Mauszeigers.
<A NAME="346"></A>   */</FONT>
<A NAME="347"></A>  <FONT ID="Private">private</FONT> JLabel        lPositionText = <FONT ID="New">new</FONT> JLabel();
<A NAME="348"></A>
<A NAME="349"></A>
<A NAME="350"></A>  <FONT ID="FormalComment">/**
<A NAME="351"></A>   * Zeichenflaeche (Bildflaeche / Canvas).
<A NAME="352"></A>   */</FONT>
<A NAME="353"></A>
<A NAME="354"></A>  <FONT ID="SingleLineComment">// Es handelt sich dabei um eine von JScrollPane abgeleitete Klasse, da die
<A NAME="355"></A></FONT>  <FONT ID="SingleLineComment">// paint-Methode ueberschrieben werden muss
<A NAME="356"></A></FONT>  <A HREF="../../virtual/dv/DVPanel.java.html">DVPanel</A>               pCanvas = <FONT ID="New">new</FONT> <A HREF="../../virtual/dv/DVPanel.java.html">DVPanel</A>(<FONT ID="This">this</FONT>);
<A NAME="357"></A>
<A NAME="358"></A>
<A NAME="359"></A>  <FONT ID="FormalComment">/**
<A NAME="360"></A>   * Horizontale Bildlaufleiste fuer die Zeichenflaeche.
<A NAME="361"></A>   */</FONT>
<A NAME="362"></A>  JScrollBar            sbVerScrollbar = <FONT ID="New">new</FONT> JScrollBar();
<A NAME="363"></A>
<A NAME="364"></A>  <FONT ID="SingleLineComment">// Erzeugen der Funktionsleiste am rechten Rnd des Fensters (Toolbar)
<A NAME="365"></A></FONT>  <FONT ID="SingleLineComment">// inklusive aller darin enthaltenen Elemente
<A NAME="366"></A></FONT>
<A NAME="367"></A>
<A NAME="368"></A>  <FONT ID="FormalComment">/**
<A NAME="369"></A>   * Rahmen fuer den Werkzeugbereich am rechten Rand des Fensters.
<A NAME="370"></A>   */</FONT>
<A NAME="371"></A>  <FONT ID="Private">private</FONT> JPanel        pToolbar = <FONT ID="New">new</FONT> JPanel();
<A NAME="372"></A>
<A NAME="373"></A>  <FONT ID="SingleLineComment">// tpMain ist das Hauptpanel des Karteireiters
<A NAME="374"></A></FONT>  <FONT ID="SingleLineComment">// Dort hinein werden weitere Panels gepackt, die die einzelnen
<A NAME="375"></A></FONT>  <FONT ID="SingleLineComment">// Karteikarten repraesentieren
<A NAME="376"></A></FONT>
<A NAME="377"></A>
<A NAME="378"></A>  <FONT ID="FormalComment">/**
<A NAME="379"></A>   * Hauptrahmen fuer die Karteikarten.
<A NAME="380"></A>   */</FONT>
<A NAME="381"></A>  <FONT ID="Private">private</FONT> JTabbedPane   tpMain = <FONT ID="New">new</FONT> JTabbedPane();
<A NAME="382"></A>
<A NAME="383"></A>
<A NAME="384"></A>  <FONT ID="FormalComment">/**
<A NAME="385"></A>   * Knopf zum Laden eines neuen DICOM-Bildes.
<A NAME="386"></A>   */</FONT>
<A NAME="387"></A>  <FONT ID="Private">private</FONT> JButton       pbLoad = <FONT ID="New">new</FONT> JButton();
<A NAME="388"></A>
<A NAME="389"></A>
<A NAME="390"></A>  <FONT ID="FormalComment">/**
<A NAME="391"></A>   * Knopf zum Laden einer neuen DICOM-Bildserie.
<A NAME="392"></A>   */</FONT>
<A NAME="393"></A>
<A NAME="394"></A>  <FONT ID="SingleLineComment">// Nicht mehr notwendig: tha 2000.8.20
<A NAME="395"></A></FONT>  <FONT ID="SingleLineComment">// private JButton        pbLoadSeries = new JButton();
<A NAME="396"></A></FONT>
<A NAME="397"></A>
<A NAME="398"></A>  <FONT ID="FormalComment">/**
<A NAME="399"></A>   * Knopf zum Speichern eines Bildes.
<A NAME="400"></A>   */</FONT>
<A NAME="401"></A>  <FONT ID="Private">private</FONT> JButton       pbSave = <FONT ID="New">new</FONT> JButton();
<A NAME="402"></A>
<A NAME="403"></A>
<A NAME="404"></A>  <FONT ID="FormalComment">/**
<A NAME="405"></A>   * Knopf zum Drucken des Zeichenflaecheninhalts.
<A NAME="406"></A>   */</FONT>
<A NAME="407"></A>  <FONT ID="Private">private</FONT> JButton       pbPrint = <FONT ID="New">new</FONT> JButton();
<A NAME="408"></A>
<A NAME="409"></A>
<A NAME="410"></A>  <FONT ID="FormalComment">/**
<A NAME="411"></A>   * Knopf zum Laden des Referenzdatensatzes.
<A NAME="412"></A>   */</FONT>
<A NAME="413"></A>  <FONT ID="Private">private</FONT> JButton       pbReferenceData = <FONT ID="New">new</FONT> JButton();
<A NAME="414"></A>
<A NAME="415"></A>
<A NAME="416"></A>  <FONT ID="FormalComment">/**
<A NAME="417"></A>   * Karteikarte fuer alle Layout-Funkionen.
<A NAME="418"></A>   */</FONT>
<A NAME="419"></A>  <FONT ID="Private">private</FONT> JPanel        tpLayout = <FONT ID="New">new</FONT> JPanel();
<A NAME="420"></A>
<A NAME="421"></A>
<A NAME="422"></A>  <FONT ID="FormalComment">/**
<A NAME="423"></A>   * Karteikarte fuer alle Werkzeuge (Lupe, Distanzmessung, Winkelmessung,
<A NAME="424"></A>   * Grauwertmessung, Invertieren, Spiegeln, Drehen).
<A NAME="425"></A>   */</FONT>
<A NAME="426"></A>  <FONT ID="Private">private</FONT> JPanel        tpTools = <FONT ID="New">new</FONT> JPanel();
<A NAME="427"></A>
<A NAME="428"></A>
<A NAME="429"></A>  <FONT ID="FormalComment">/**
<A NAME="430"></A>   * Karteikarte fuer die Fensterungs-Funktionen (Helligkeit und Kontrast).
<A NAME="431"></A>   */</FONT>
<A NAME="432"></A>  <FONT ID="Private">private</FONT> JPanel        tpWindow = <FONT ID="New">new</FONT> JPanel();
<A NAME="433"></A>
<A NAME="434"></A>
<A NAME="435"></A>  <FONT ID="FormalComment">/**
<A NAME="436"></A>   * Karteikarte fuer die 3D-Werkzeuge.
<A NAME="437"></A>   */</FONT>
<A NAME="438"></A>  <FONT ID="Private">private</FONT> JPanel        tp3D = <FONT ID="New">new</FONT> JPanel();
<A NAME="439"></A>
<A NAME="440"></A>
<A NAME="441"></A>  <FONT ID="FormalComment">/**
<A NAME="442"></A>   * Karteikarte fuer die Zusatzfunktionen.
<A NAME="443"></A>   */</FONT>
<A NAME="444"></A>  <FONT ID="Private">private</FONT> JPanel        tpExtras = <FONT ID="New">new</FONT> JPanel();
<A NAME="445"></A>
<A NAME="446"></A>
<A NAME="447"></A>  <FONT ID="SingleLineComment">// Nun folgt die Erzeugung der einzelnen Elmente der Layout-Karte
<A NAME="448"></A></FONT>
<A NAME="449"></A>
<A NAME="450"></A>  <FONT ID="FormalComment">/**
<A NAME="451"></A>   * Knopf zur Auswahl der Darstellung von nur einem Bild.
<A NAME="452"></A>   */</FONT>
<A NAME="453"></A>  JToggleButton         rb1Image = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="454"></A>
<A NAME="455"></A>
<A NAME="456"></A>  <FONT ID="FormalComment">/**
<A NAME="457"></A>   * Knopf zur Auswahl der Darstellung von 4 Bildern gleichzeitig.
<A NAME="458"></A>   */</FONT>
<A NAME="459"></A>  JToggleButton         rb4Images = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="460"></A>
<A NAME="461"></A>
<A NAME="462"></A>  <FONT ID="FormalComment">/**
<A NAME="463"></A>   * Knopfgruppe zur Gruppierung der Knoepfe rb1Image und rb4Images.
<A NAME="464"></A>   */</FONT>
<A NAME="465"></A>  <FONT ID="Private">private</FONT> ButtonGroup   bgNumOfImages = <FONT ID="New">new</FONT> ButtonGroup();
<A NAME="466"></A>
<A NAME="467"></A>
<A NAME="468"></A>  <FONT ID="FormalComment">/**
<A NAME="469"></A>   * Knopf zur Darstellung des k-Raums des selektierten Bildes.
<A NAME="470"></A>   */</FONT>
<A NAME="471"></A>  <FONT ID="Private">private</FONT> JButton       pbKSpace = <FONT ID="New">new</FONT> JButton();
<A NAME="472"></A>
<A NAME="473"></A>
<A NAME="474"></A>  <FONT ID="FormalComment">/**
<A NAME="475"></A>   * Knopf zur Darstellung des Histogramms des selektierten Bildes.
<A NAME="476"></A>   */</FONT>
<A NAME="477"></A>  <FONT ID="Private">private</FONT> JButton       pbHistogram = <FONT ID="New">new</FONT> JButton();
<A NAME="478"></A>
<A NAME="479"></A>
<A NAME="480"></A>  <FONT ID="FormalComment">/**
<A NAME="481"></A>   * Knopf zur Darstellung der Bildbeschriftungen (Nummern, TR, TI, u.a.).
<A NAME="482"></A>   */</FONT>
<A NAME="483"></A>  JToggleButton         tbImageText = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="484"></A>
<A NAME="485"></A>
<A NAME="486"></A>  <FONT ID="FormalComment">/**
<A NAME="487"></A>   * Knopf zum Oeffnen des k-Raum-Manipulators.
<A NAME="488"></A>   */</FONT>
<A NAME="489"></A>  <FONT ID="Private">private</FONT> JButton       pbKSpaceManip = <FONT ID="New">new</FONT> JButton();
<A NAME="490"></A>
<A NAME="491"></A>
<A NAME="492"></A>  <FONT ID="SingleLineComment">// Nun folgt die Erzeugung der einzelnen Elemente der Werkzeug-Karte
<A NAME="493"></A></FONT>
<A NAME="494"></A>
<A NAME="495"></A>  <FONT ID="FormalComment">/**
<A NAME="496"></A>   * Knopf zur Auswahl des Standard-Mauszeigers.
<A NAME="497"></A>   */</FONT>
<A NAME="498"></A>  <FONT ID="Private">private</FONT> JToggleButton rbPointer = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="499"></A>
<A NAME="500"></A>
<A NAME="501"></A>  <FONT ID="FormalComment">/**
<A NAME="502"></A>   * Knopf zur Auswahl der Lupe.
<A NAME="503"></A>   */</FONT>
<A NAME="504"></A>  JToggleButton         rbZoom = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="505"></A>
<A NAME="506"></A>
<A NAME="507"></A>  <FONT ID="FormalComment">/**
<A NAME="508"></A>   * Knopf zur Auswahl des Messwerkzeugs (Distanz).
<A NAME="509"></A>   */</FONT>
<A NAME="510"></A>  JToggleButton         rbDistance = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="511"></A>
<A NAME="512"></A>
<A NAME="513"></A>  <FONT ID="FormalComment">/**
<A NAME="514"></A>   * Knopf zur Auswahl des Winkelmesswerkzeugs.
<A NAME="515"></A>   */</FONT>
<A NAME="516"></A>  JToggleButton         rbAngel = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="517"></A>
<A NAME="518"></A>
<A NAME="519"></A>  <FONT ID="FormalComment">/**
<A NAME="520"></A>   * Knopf zur Auswahl des Grauwert-Messwerkzeugs.
<A NAME="521"></A>   */</FONT>
<A NAME="522"></A>  JToggleButton         rbGrayValue = <FONT ID="New">new</FONT> JToggleButton();
<A NAME="523"></A>
<A NAME="524"></A>
<A NAME="525"></A>  <FONT ID="FormalComment">/**
<A NAME="526"></A>   * Knopf zur Auswahl des Spiegel-Werkzeugs.
<A NAME="527"></A>   */</FONT>
<A NAME="528"></A>  <FONT ID="Private">private</FONT> JButton       pbMirror = <FONT ID="New">new</FONT> JButton();
<A NAME="529"></A>
<A NAME="530"></A>
<A NAME="531"></A>  <FONT ID="FormalComment">/**
<A NAME="532"></A>   * Knopf zur Auswahl des Rotations-Werkzeugs.
<A NAME="533"></A>   */</FONT>
<A NAME="534"></A>  <FONT ID="Private">private</FONT> JButton       pbRotate = <FONT ID="New">new</FONT> JButton();
<A NAME="535"></A>
<A NAME="536"></A>
<A NAME="537"></A>  <FONT ID="FormalComment">/**
<A NAME="538"></A>   * Knopf zum Invertieren des selektierten Bildes.
<A NAME="539"></A>   */</FONT>
<A NAME="540"></A>  <FONT ID="Private">private</FONT> JButton       pbInvert = <FONT ID="New">new</FONT> JButton();
<A NAME="541"></A>
<A NAME="542"></A>
<A NAME="543"></A>  <FONT ID="FormalComment">/**
<A NAME="544"></A>   * Knopf zum Loeschen des selektierten Bildes.
<A NAME="545"></A>   */</FONT>
<A NAME="546"></A>  <FONT ID="Private">private</FONT> JButton       pbDelete = <FONT ID="New">new</FONT> JButton();
<A NAME="547"></A>
<A NAME="548"></A>  <FONT ID="SingleLineComment">// Nun folgt die Erstellung der einzelnen Elemente der Fensterung-Karteikarte
<A NAME="549"></A></FONT>  <FONT ID="SingleLineComment">// Panel zur Gruppierung der Funktionselemente fuer die Helligkeitsveraenderung
<A NAME="550"></A></FONT>
<A NAME="551"></A>
<A NAME="552"></A>  <FONT ID="FormalComment">/**
<A NAME="553"></A>   * Schieberegler fuer die Helligkeit (Zentrum des Fensters).
<A NAME="554"></A>   */</FONT>
<A NAME="555"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../virtual/tools/SliderPanel.java.html">SliderPanel</A> pCenter;
<A NAME="556"></A>
<A NAME="557"></A>
<A NAME="558"></A>  <FONT ID="FormalComment">/**
<A NAME="559"></A>   * Schieberegler fuer den Kontrast (Breite des Fensters).
<A NAME="560"></A>   */</FONT>
<A NAME="561"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../virtual/tools/SliderPanel.java.html">SliderPanel</A> pWindow;
<A NAME="562"></A>
<A NAME="563"></A>
<A NAME="564"></A>  <FONT ID="FormalComment">/**
<A NAME="565"></A>   * Knopf zum Zuruecksetzen der Fensterung auf Center=2048 und Window=4096.
<A NAME="566"></A>   */</FONT>
<A NAME="567"></A>  <FONT ID="Private">private</FONT> JButton       pbResetWindowing = <FONT ID="New">new</FONT> JButton();
<A NAME="568"></A>
<A NAME="569"></A>
<A NAME="570"></A>  <FONT ID="FormalComment">/**
<A NAME="571"></A>   * Knopf zur Durchfuehrung einer optimalen Fensterung.
<A NAME="572"></A>   */</FONT>
<A NAME="573"></A>  <FONT ID="Private">private</FONT> JButton       pbOptWindowing = <FONT ID="New">new</FONT> JButton();
<A NAME="574"></A>
<A NAME="575"></A>  <FONT ID="SingleLineComment">// Nun folgt die Erstellung der einzelnen Elemente der 3D-Karteikarte
<A NAME="576"></A></FONT>
<A NAME="577"></A>
<A NAME="578"></A>  <FONT ID="FormalComment">/**
<A NAME="579"></A>   * Knopf zum Oeffnen des Animations-Fensters.
<A NAME="580"></A>   */</FONT>
<A NAME="581"></A>  <FONT ID="Private">private</FONT> JButton       pbAnimation = <FONT ID="New">new</FONT> JButton();
<A NAME="582"></A>
<A NAME="583"></A>
<A NAME="584"></A>  <FONT ID="FormalComment">/**
<A NAME="585"></A>   * Knopf zur Berechnung eines MIP-Bildes.
<A NAME="586"></A>   */</FONT>
<A NAME="587"></A>  <FONT ID="Private">private</FONT> JButton       pbCalcMIP = <FONT ID="New">new</FONT> JButton();
<A NAME="588"></A>
<A NAME="589"></A>
<A NAME="590"></A>  <FONT ID="FormalComment">/**
<A NAME="591"></A>   * Knopf zur Berechnung einer 90-Grad-Projektion (1. Variante).
<A NAME="592"></A>   */</FONT>
<A NAME="593"></A>  <FONT ID="Private">private</FONT> JButton       pbProjection1 = <FONT ID="New">new</FONT> JButton();
<A NAME="594"></A>
<A NAME="595"></A>
<A NAME="596"></A>  <FONT ID="FormalComment">/**
<A NAME="597"></A>   * Knopf zur Berechnung einer 90-Grad-Projektion (2. Variante).
<A NAME="598"></A>   */</FONT>
<A NAME="599"></A>  <FONT ID="Private">private</FONT> JButton       pbProjection2 = <FONT ID="New">new</FONT> JButton();
<A NAME="600"></A>
<A NAME="601"></A>  <FONT ID="SingleLineComment">// Nun folgt die Erzeugung der einzelnen Elemente der Extras-Karteikarte
<A NAME="602"></A></FONT>
<A NAME="603"></A>
<A NAME="604"></A>  <FONT ID="FormalComment">/**
<A NAME="605"></A>   * Schieberegler zur Auswahl des Simulationszeitfaktors (0-100%).
<A NAME="606"></A>   */</FONT>
<A NAME="607"></A>  <FONT ID="Private">private</FONT> <A HREF="../../virtual/tools/SliderPanel.java.html">SliderPanel</A>   pTimeFactor;
<A NAME="608"></A>
<A NAME="609"></A>
<A NAME="610"></A>  <FONT ID="FormalComment">/**
<A NAME="611"></A>   * Panel zur Gruppierung der Elemente, die die Auswahl der Bildplazierung
<A NAME="612"></A>   * fuer neu erzeugte Bilder ermoeglicht.
<A NAME="613"></A>   */</FONT>
<A NAME="614"></A>  <FONT ID="Private">private</FONT> JPanel        pNextImageAt = <FONT ID="New">new</FONT> JPanel();
<A NAME="615"></A>
<A NAME="616"></A>
<A NAME="617"></A>  <FONT ID="FormalComment">/**
<A NAME="618"></A>   * Beschriftung fuer die Auswahlelemente fuer die Bildplatzierung.
<A NAME="619"></A>   */</FONT>
<A NAME="620"></A>  <FONT ID="Private">private</FONT> JLabel        lNextImageAt = <FONT ID="New">new</FONT> JLabel();
<A NAME="621"></A>
<A NAME="622"></A>
<A NAME="623"></A>  <FONT ID="FormalComment">/**
<A NAME="624"></A>   * Knopf zur Erzeugung des naechsten Bildes an der selektierten Position.
<A NAME="625"></A>   */</FONT>
<A NAME="626"></A>  <FONT ID="Public">public</FONT> JRadioButton   rbNextImageAtSelection = <FONT ID="New">new</FONT> JRadioButton();
<A NAME="627"></A>
<A NAME="628"></A>
<A NAME="629"></A>  <FONT ID="FormalComment">/**
<A NAME="630"></A>   * Knopf zur Erzeugung des naechsten Bildes an der naechsten freien Position.
<A NAME="631"></A>   */</FONT>
<A NAME="632"></A>  <FONT ID="Private">private</FONT> JRadioButton  rbNextImageAtFreePlace = <FONT ID="New">new</FONT> JRadioButton();
<A NAME="633"></A>
<A NAME="634"></A>
<A NAME="635"></A>  <FONT ID="FormalComment">/**
<A NAME="636"></A>   * Gruppe fuer die Knoepfe zur Auswahl der Bildplazierung.
<A NAME="637"></A>   */</FONT>
<A NAME="638"></A>  <FONT ID="Private">private</FONT> ButtonGroup   bgPlaceNextImage = <FONT ID="New">new</FONT> ButtonGroup();
<A NAME="639"></A>
<A NAME="640"></A>
<A NAME="641"></A>  <FONT ID="FormalComment">/**
<A NAME="642"></A>   * CheckBox zum Aktivieren eines neu erzeugten Bildes
<A NAME="643"></A>   */</FONT>
<A NAME="644"></A>  <FONT ID="Public">public</FONT> JCheckBox      chbActivateNewImg = <FONT ID="New">new</FONT> JCheckBox();
<A NAME="645"></A>
<A NAME="646"></A>  <FONT ID="SingleLineComment">// ***************************************************************************
<A NAME="647"></A></FONT>  <FONT ID="SingleLineComment">// ******** Ab hier beginnt die Deklaration von NICHT-GUI-ELEMENTEN **********
<A NAME="648"></A></FONT>  <FONT ID="SingleLineComment">// ***************************************************************************
<A NAME="649"></A></FONT>
<A NAME="650"></A>
<A NAME="651"></A>  <FONT ID="FormalComment">/**
<A NAME="652"></A>   * Aktuelle x-Mausposition auf der Zeichenflaeche.
<A NAME="653"></A>   */</FONT>
<A NAME="654"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>           curr_x;
<A NAME="655"></A>
<A NAME="656"></A>
<A NAME="657"></A>  <FONT ID="FormalComment">/**
<A NAME="658"></A>   * Aktuelle y-Mausposition auf der Zeichenflaeche.
<A NAME="659"></A>   */</FONT>
<A NAME="660"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>           curr_y;
<A NAME="661"></A>
<A NAME="662"></A>
<A NAME="663"></A>  <FONT ID="FormalComment">/**
<A NAME="664"></A>   * Letze Mausklick-x-Koordinate.
<A NAME="665"></A>   */</FONT>
<A NAME="666"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>           lastMouseClickX;
<A NAME="667"></A>
<A NAME="668"></A>
<A NAME="669"></A>  <FONT ID="FormalComment">/**
<A NAME="670"></A>   * Letze Mausklick-y-Koordinate.
<A NAME="671"></A>   */</FONT>
<A NAME="672"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>           lastMouseClickY;
<A NAME="673"></A>
<A NAME="674"></A>
<A NAME="675"></A>  <FONT ID="FormalComment">/**
<A NAME="676"></A>   * Anzahl der Mausklicks (benoetigt zur Abstands- und Winkelmessung).
<A NAME="677"></A>   */</FONT>
<A NAME="678"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>           mouseClicks = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="679"></A>
<A NAME="680"></A>
<A NAME="681"></A>  <FONT ID="FormalComment">/**
<A NAME="682"></A>   * Zeitpunkt des letzten Mausklicks im Hauptfenster.
<A NAME="683"></A>   */</FONT>
<A NAME="684"></A>  <FONT ID="Private">private</FONT> <FONT ID="Long">long</FONT>          lastTime;
<A NAME="685"></A>
<A NAME="686"></A>
<A NAME="687"></A>  <FONT ID="FormalComment">/**
<A NAME="688"></A>   * Fensterungszentrum-Einstellungen beim letzte Mausklick.
<A NAME="689"></A>   */</FONT>
<A NAME="690"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>           lastCenter;
<A NAME="691"></A>
<A NAME="692"></A>
<A NAME="693"></A>  <FONT ID="FormalComment">/**
<A NAME="694"></A>   * Fensterungsbreite-Einstellungen beim letzte Mausklick.
<A NAME="695"></A>   */</FONT>
<A NAME="696"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>           lastWindow;
<A NAME="697"></A>
<A NAME="698"></A>
<A NAME="699"></A>  <FONT ID="FormalComment">/**
<A NAME="700"></A>   * Merker fuer nichtgespeicherte Aenderungen.
<A NAME="701"></A>   */</FONT>
<A NAME="702"></A>  <FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT>       unsavedChanges = <FONT ID="False">false</FONT>;
<A NAME="703"></A>
<A NAME="704"></A>
<A NAME="705"></A>  <FONT ID="FormalComment">/**
<A NAME="706"></A>   * Hashtabelle für die Standardeinstellungen
<A NAME="707"></A>   */</FONT>
<A NAME="708"></A>  <FONT ID="Private">private</FONT> Properties    preferences = <FONT ID="New">new</FONT> Properties();
<A NAME="709"></A>
<A NAME="710"></A>
<A NAME="711"></A>  <FONT ID="FormalComment">/**
<A NAME="712"></A>   * Gibt an, ob von einer Applickation (true) oder einem Applet gestartet wurde.
<A NAME="713"></A>   */</FONT>
<A NAME="714"></A>  <FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT>       isApplication = <FONT ID="True">true</FONT>;
<A NAME="715"></A>
<A NAME="716"></A>
<A NAME="717"></A>  <FONT ID="SingleLineComment">// *********************************************************************
<A NAME="718"></A></FONT>  <FONT ID="SingleLineComment">// *************** Konstruktoren ***************************************
<A NAME="719"></A></FONT>  <FONT ID="SingleLineComment">// *********************************************************************
<A NAME="720"></A></FONT>
<A NAME="721"></A>
<A NAME="722"></A>  <FONT ID="FormalComment">/**
<A NAME="723"></A>   * Standardkonstruktor. Er initialisiert die Bedienelemente des DICOM-Viewers.
<A NAME="724"></A>   */</FONT>
<A NAME="725"></A>  <FONT ID="Public">public</FONT> ViewerFrame() {
<A NAME="726"></A>    enableEvents(AWTEvent.WINDOW_EVENT_MASK);
<A NAME="727"></A>    <FONT ID="Try">try</FONT> {
<A NAME="728"></A>
<A NAME="729"></A>      <FONT ID="SingleLineComment">// Initialisieren der GUI-Elemente
<A NAME="730"></A></FONT>      jbInit();
<A NAME="731"></A>    } <FONT ID="Catch">catch</FONT> (Exception e) {
<A NAME="732"></A>      e.printStackTrace();
<A NAME="733"></A>    } 
<A NAME="734"></A>    loadPreferences();
<A NAME="735"></A>  }   <FONT ID="SingleLineComment">// Konstruktor ViewerFrame()
<A NAME="736"></A></FONT>
<A NAME="737"></A>  <FONT ID="SingleLineComment">// *********************************************************************
<A NAME="738"></A></FONT>  <FONT ID="SingleLineComment">// *************** Methoden ********************************************
<A NAME="739"></A></FONT>  <FONT ID="SingleLineComment">// *********************************************************************
<A NAME="740"></A></FONT>
<A NAME="741"></A>
<A NAME="742"></A>  <FONT ID="FormalComment">/**
<A NAME="743"></A>   * Die Methode setzt das aktuelle Verzeichnis auf den zuletzt gewählten Pfad.
<A NAME="744"></A>   * @param ia true, wenn von einer Applikation gestartet wurde, false bei Applet.
<A NAME="745"></A>   */</FONT>
<A NAME="746"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setAppType(<FONT ID="Boolean">boolean</FONT> ia) {
<A NAME="747"></A>    isApplication = ia;
<A NAME="748"></A>  } 
<A NAME="749"></A>
<A NAME="750"></A>
<A NAME="751"></A>  <FONT ID="FormalComment">/**
<A NAME="752"></A>   * Die Methode richtet die Bedienelemente ein und stellt diese dar.
<A NAME="753"></A>   */</FONT>
<A NAME="754"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> jbInit() <FONT ID="Throws">throws</FONT> Exception {
<A NAME="755"></A>
<A NAME="756"></A>    <FONT ID="SingleLineComment">// Laden des 'Loeschen'-Iocns
<A NAME="757"></A></FONT>    iAnimation = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/animation.gif"</FONT>));
<A NAME="758"></A>
<A NAME="759"></A>    <FONT ID="SingleLineComment">// Laden des 'Delete'-Iocns
<A NAME="760"></A></FONT>    iDelete = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/delete.gif"</FONT>));
<A NAME="761"></A>
<A NAME="762"></A>    <FONT ID="SingleLineComment">// Laden des 'oeffnen'-Icons
<A NAME="763"></A></FONT>    iOpen = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/openfile.gif"</FONT>));
<A NAME="764"></A>
<A NAME="765"></A>    <FONT ID="SingleLineComment">// Laden des 'oeffnen'-Icons
<A NAME="766"></A></FONT>    <FONT ID="SingleLineComment">// Nicht mehr notwendig: tha 2000.8.20
<A NAME="767"></A></FONT>    <FONT ID="SingleLineComment">// iOpenSeries = new ImageIcon(this.getClass().getResource("resources/openseries.gif"));
<A NAME="768"></A></FONT>
<A NAME="769"></A>    <FONT ID="SingleLineComment">// Laden des 'Speichern'-Icons
<A NAME="770"></A></FONT>    iSave = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/save.gif"</FONT>));
<A NAME="771"></A>
<A NAME="772"></A>    <FONT ID="SingleLineComment">// Laden des 'Drucken'-Icons
<A NAME="773"></A></FONT>    iPrint = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/print.gif"</FONT>));
<A NAME="774"></A>
<A NAME="775"></A>    <FONT ID="SingleLineComment">// Laden des "Referenzbild"-Icons
<A NAME="776"></A></FONT>    iRefIma = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/refima.gif"</FONT>));
<A NAME="777"></A>
<A NAME="778"></A>    <FONT ID="SingleLineComment">// Laden des "1 Bild"-Icons
<A NAME="779"></A></FONT>    i1Image = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/1image.gif"</FONT>));
<A NAME="780"></A>
<A NAME="781"></A>    <FONT ID="SingleLineComment">// Laden des "4 Bilder"-Icons
<A NAME="782"></A></FONT>    i4Images = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/4images.gif"</FONT>));
<A NAME="783"></A>
<A NAME="784"></A>    <FONT ID="SingleLineComment">// Laden des "4 Bilder"-Icons
<A NAME="785"></A></FONT>    iInfoText = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/imageinfo.gif"</FONT>));
<A NAME="786"></A>
<A NAME="787"></A>    <FONT ID="SingleLineComment">// Laden des "4 Bilder"-Icons
<A NAME="788"></A></FONT>    iHistogram = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/histogramm.gif"</FONT>));
<A NAME="789"></A>
<A NAME="790"></A>    <FONT ID="SingleLineComment">// Laden des "4 Bilder"-Icons
<A NAME="791"></A></FONT>    iKSpace = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/k_raum.gif"</FONT>));
<A NAME="792"></A>
<A NAME="793"></A>    <FONT ID="SingleLineComment">// Laden des k-Raum Manipulator Icons
<A NAME="794"></A></FONT>    iKSpaceMan = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/k_raum_man.gif"</FONT>));
<A NAME="795"></A>
<A NAME="796"></A>    <FONT ID="SingleLineComment">// Laden des Winkel-icons
<A NAME="797"></A></FONT>    iAngel = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/winkel.gif"</FONT>));
<A NAME="798"></A>
<A NAME="799"></A>    <FONT ID="SingleLineComment">// Laden des Mauszeiger-Icons
<A NAME="800"></A></FONT>    iPointer = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/picktool.gif"</FONT>));
<A NAME="801"></A>
<A NAME="802"></A>    <FONT ID="SingleLineComment">// Laden des Lupen-Icons
<A NAME="803"></A></FONT>    iZoom = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/zoomtool.gif"</FONT>));
<A NAME="804"></A>
<A NAME="805"></A>    <FONT ID="SingleLineComment">// Laden des Rotieren-Icons
<A NAME="806"></A></FONT>    iRotate = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/drehen.gif"</FONT>));
<A NAME="807"></A>
<A NAME="808"></A>    <FONT ID="SingleLineComment">// Laden des Spiegel-icons
<A NAME="809"></A></FONT>    iMirror = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/spiegeln.gif"</FONT>));
<A NAME="810"></A>
<A NAME="811"></A>    <FONT ID="SingleLineComment">// Laden des Invertierungs-Icons
<A NAME="812"></A></FONT>    iInvert = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/invertieren.gif"</FONT>));
<A NAME="813"></A>
<A NAME="814"></A>    <FONT ID="SingleLineComment">// Laden des Grauwert-Icons
<A NAME="815"></A></FONT>    iGrayValue = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/grauwert.gif"</FONT>));
<A NAME="816"></A>
<A NAME="817"></A>    <FONT ID="SingleLineComment">// Laden des Lineal-Icons
<A NAME="818"></A></FONT>    iDistance = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/abstand.gif"</FONT>));
<A NAME="819"></A>
<A NAME="820"></A>    <FONT ID="SingleLineComment">// Laden des 1. projektionsicons
<A NAME="821"></A></FONT>    iProjection1 = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/projektion1.gif"</FONT>));
<A NAME="822"></A>
<A NAME="823"></A>    <FONT ID="SingleLineComment">// Laden des 2. projektionsicons
<A NAME="824"></A></FONT>    iProjection2 = <FONT ID="New">new</FONT> ImageIcon(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/projektion2.gif"</FONT>));
<A NAME="825"></A>
<A NAME="826"></A>
<A NAME="827"></A>    <FONT ID="SingleLineComment">// Layoutmanager des Hauptfensters auf null setzen. Damit sind alle
<A NAME="828"></A></FONT>    <FONT ID="SingleLineComment">// Elemente frei platzierbar und unterliegn nicht den Eigenwilligkeiten
<A NAME="829"></A></FONT>    <FONT ID="SingleLineComment">// eines Layoutmanagers
<A NAME="830"></A></FONT>    <FONT ID="This">this</FONT>.getContentPane().setLayout(<FONT ID="Null">null</FONT>);
<A NAME="831"></A>
<A NAME="832"></A>    <FONT ID="SingleLineComment">// Groesse des Hauptfensters auf 600*800 Punkte festlegen. Damit ist es
<A NAME="833"></A></FONT>    <FONT ID="SingleLineComment">// auf jedem SuperVGA-Monitor darstellbar
<A NAME="834"></A></FONT>    <FONT ID="This">this</FONT>.setSize(<FONT ID="New">new</FONT> Dimension(<FONT ID="IntegerLiteral">800</FONT>, <FONT ID="IntegerLiteral">585</FONT>));
<A NAME="835"></A>
<A NAME="836"></A>    <FONT ID="SingleLineComment">// Die Groesse des Fensters soll nicht veraendert werden koennen
<A NAME="837"></A></FONT>    <FONT ID="This">this</FONT>.setResizable(<FONT ID="False">false</FONT>);
<A NAME="838"></A>
<A NAME="839"></A>    <FONT ID="SingleLineComment">// Hintergrundfarbe setzen
<A NAME="840"></A></FONT>    <FONT ID="This">this</FONT>.setBackground(<FONT ID="New">new</FONT> Color(<FONT ID="IntegerLiteral">204</FONT>, <FONT ID="IntegerLiteral">204</FONT>, <FONT ID="IntegerLiteral">204</FONT>));
<A NAME="841"></A>
<A NAME="842"></A>    <FONT ID="SingleLineComment">// Titelzeile setzen
<A NAME="843"></A></FONT>    <FONT ID="This">this</FONT>.setTitle(<FONT ID="StringLiteral">"DICOM-Viewer"</FONT>);
<A NAME="844"></A>
<A NAME="845"></A>    <FONT ID="SingleLineComment">// Menueleiste mit seinen Menues einrichten
<A NAME="846"></A></FONT>    menuBar1.add(menuFile);
<A NAME="847"></A>    menuBar1.add(menuEdit);
<A NAME="848"></A>    menuBar1.add(menuTools);
<A NAME="849"></A>
<A NAME="850"></A>    <FONT ID="SingleLineComment">// th 2002.10.12
<A NAME="851"></A></FONT>    <FONT ID="SingleLineComment">// menuBar1.add(menuHelp);
<A NAME="852"></A></FONT>    <FONT ID="This">this</FONT>.setJMenuBar(menuBar1);
<A NAME="853"></A>
<A NAME="854"></A>    <FONT ID="SingleLineComment">// Dateimenue mit seinen Menuepunkten einrichten
<A NAME="855"></A></FONT>    menuFile.setText(<FONT ID="StringLiteral">"Datei"</FONT>);
<A NAME="856"></A>
<A NAME="857"></A>    <FONT ID="SingleLineComment">// Menueeintrag 'Bild Oeffnen' einrichten
<A NAME="858"></A></FONT>    menuFileImageOpen.setText(<FONT ID="StringLiteral">"Bild Oeffnen..."</FONT>);
<A NAME="859"></A>    menuFileImageOpen.addActionListener(<FONT ID="New">new</FONT> ActionListener() {
<A NAME="860"></A>
<A NAME="861"></A>
<A NAME="862"></A>      <FONT ID="FormalComment">/**
<A NAME="863"></A>       * Method declaration
<A NAME="864"></A>       * 
<A NAME="865"></A>       * 
<A NAME="866"></A>       * @param e
<A NAME="867"></A>       * 
<A NAME="868"></A>       * @see
<A NAME="869"></A>       */</FONT>
<A NAME="870"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="871"></A>        fileImageOpen_actionPerformed();
<A NAME="872"></A>      } 
<A NAME="873"></A>
<A NAME="874"></A>    });
<A NAME="875"></A>
<A NAME="876"></A>    <FONT ID="SingleLineComment">// Menueeintrag 'Serie Oeffnen' einrichten
<A NAME="877"></A></FONT>    <FONT ID="SingleLineComment">// Nicht mehr notwendig: tha 2000.8.20
<A NAME="878"></A></FONT>
<A NAME="879"></A>    <FONT ID="MultiLineComment">/*
<A NAME="880"></A>     * menuFileSeriesOpen.setText("Serie Oeffnen...");
<A NAME="881"></A>     * menuFileSeriesOpen.addActionListener(new ActionListener() {
<A NAME="882"></A>     * public void actionPerformed(ActionEvent e) {
<A NAME="883"></A>     * fileSeriesOpen_actionPerformed();
<A NAME="884"></A>     * }
<A NAME="885"></A>     * });
<A NAME="886"></A>     */</FONT>
<A NAME="887"></A>
<A NAME="888"></A>    <FONT ID="SingleLineComment">// Menueeintrag 'Speichern einrichten'
<A NAME="889"></A></FONT>    menuFileSave.setText(<FONT ID="StringLiteral">"Speichern unter..."</FONT>);
<A NAME="890"></A>    menuFileSave.addActionListener(<FONT ID="New">new</FONT> ActionListener() {
<A NAME="891"></A>
<A NAME="892"></A>
<A NAME="893"></A>      <FONT ID="FormalComment">/**
<A NAME="894"></A>       * Method declaration
<A NAME="895"></A>       * 
<A NAME="896"></A>       * 
<A NAME="897"></A>       * @param e
<A NAME="898"></A>       * 
<A NAME="899"></A>       * @see
<A NAME="900"></A>       */</FONT>
<A NAME="901"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="902"></A>        fileSave_actionPerformed();
<A NAME="903"></A>      } 
<A NAME="904"></A>
<A NAME="905"></A>    });
<A NAME="906"></A>
<A NAME="907"></A>    <FONT ID="SingleLineComment">// Menueeintrag 'Drucken' einrichten
<A NAME="908"></A></FONT>    menuFilePrint.setText(<FONT ID="StringLiteral">"Drucken..."</FONT>);
<A NAME="909"></A>    menuFilePrint.addActionListener(<FONT ID="New">new</FONT> ActionListener() {
<A NAME="910"></A>
<A NAME="911"></A>
<A NAME="912"></A>      <FONT ID="FormalComment">/**
<A NAME="913"></A>       * Method declaration
<A NAME="914"></A>       * 
<A NAME="915"></A>       * 
<A NAME="916"></A>       * @param e
<A NAME="917"></A>       * 
<A NAME="918"></A>       * @see
<A NAME="919"></A>       */</FONT>
<A NAME="920"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="921"></A>        filePrint_actionPerformed();
<A NAME="922"></A>      } 
<A NAME="923"></A>
<A NAME="924"></A>    });
<A NAME="925"></A>
<A NAME="926"></A>    <FONT ID="SingleLineComment">// Menueeintrag 'Beenden' einrichten
<A NAME="927"></A></FONT>    menuFileExit.setText(<FONT ID="StringLiteral">"Beenden"</FONT>);
<A NAME="928"></A>    menuFileExit.addActionListener(<FONT ID="New">new</FONT> ActionListener() {
<A NAME="929"></A>
<A NAME="930"></A>
<A NAME="931"></A>      <FONT ID="FormalComment">/**
<A NAME="932"></A>       * Method declaration
<A NAME="933"></A>       * 
<A NAME="934"></A>       * 
<A NAME="935"></A>       * @param e
<A NAME="936"></A>       * 
<A NAME="937"></A>       * @see
<A NAME="938"></A>       */</FONT>
<A NAME="939"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="940"></A>        fileExit_actionPerformed();
<A NAME="941"></A>      } 
<A NAME="942"></A>
<A NAME="943"></A>    });
<A NAME="944"></A>
<A NAME="945"></A>    <FONT ID="SingleLineComment">// Die einzelnen Menueeintraege des Dateimenue hinzufuegen
<A NAME="946"></A></FONT>    menuFile.add(menuFileImageOpen);
<A NAME="947"></A>
<A NAME="948"></A>    <FONT ID="SingleLineComment">// Nicht mehr notwendig: tha 2000.8.20
<A NAME="949"></A></FONT>    <FONT ID="SingleLineComment">// menuFile.add(menuFileSeriesOpen);
<A NAME="950"></A></FONT>    menuFile.add(menuFileSave);
<A NAME="951"></A>    menuFile.add(menuFilePrint);
<A NAME="952"></A>    menuFile.add(menuFileExit);
<A NAME="953"></A>
<A NAME="954"></A>    <FONT ID="SingleLineComment">// Bearbeiten-Menue mit seinen Menuepunkten einrichten
<A NAME="955"></A></FONT>    menuEdit.setText(<FONT ID="StringLiteral">"Bearbeiten"</FONT>);
<A NAME="956"></A>
<A NAME="957"></A>    menuEditClear.setText(<FONT ID="StringLiteral">"Selektiertes Bild loeschen"</FONT>);
<A NAME="958"></A>    menuEditClear.addActionListener(<FONT ID="New">new</FONT> ActionListener() {
<A NAME="959"></A>
<A NAME="960"></A>
<A NAME="961"></A>      <FONT ID="FormalComment">/**
<A NAME="962"></A>       * Method declaration
<A NAME="963"></A>       * 
<A NAME="964"></A>       * 
<A NAME="965"></A>       * @param e
<A NAME="966"></A>       * 
<A NAME="967"></A>       * @see
<A NAME="968"></A>       */</FONT>
<A NAME="969"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="970"></A>        editClear_actionPerformed();
<A NAME="971"></A>      } 
<A NAME="972"></A>
<A NAME="973"></A>    });
<A NAME="974"></A>
<A NAME="975"></A>    menuEditClearAll.setText(<FONT ID="StringLiteral">"Alle Bilder loeschen"</FONT>);
<A NAME="976"></A>    menuEditClearAll.addActionListener(<FONT ID="New">new</FONT> ActionListener() {
<A NAME="977"></A>
<A NAME="978"></A>
<A NAME="979"></A>      <FONT ID="FormalComment">/**
<A NAME="980"></A>       * Method declaration
<A NAME="981"></A>       * 
<A NAME="982"></A>       * 
<A NAME="983"></A>       * @param e
<A NAME="984"></A>       * 
<A NAME="985"></A>       * @see
<A NAME="986"></A>       */</FONT>
<A NAME="987"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="988"></A>        editClearAll_actionPerformed();
<A NAME="989"></A>      } 
<A NAME="990"></A>
<A NAME="991"></A>    });
<A NAME="992"></A>
<A NAME="993"></A>    <FONT ID="SingleLineComment">// Die einzelnen Menueeintraege hinzufuegen
<A NAME="994"></A></FONT>    menuEdit.add(menuEditClear);
<A NAME="995"></A>    menuEdit.add(menuEditClearAll);
<A NAME="996"></A>
<A NAME="997"></A>    <FONT ID="SingleLineComment">// Toolsmenue mit seinen Menuepunkten einrichten
<A NAME="998"></A></FONT>    menuTools.setText(<FONT ID="StringLiteral">"Tools"</FONT>);
<A NAME="999"></A>    menuToolsAbout.setText(<FONT ID="StringLiteral">"About..."</FONT>);
<A NAME="1000"></A>    menuToolsAbout.addActionListener(<FONT ID="New">new</FONT> ActionListener() {
<A NAME="1001"></A>
<A NAME="1002"></A>
<A NAME="1003"></A>      <FONT ID="FormalComment">/**
<A NAME="1004"></A>       * Method declaration
<A NAME="1005"></A>       * 
<A NAME="1006"></A>       * 
<A NAME="1007"></A>       * @param e
<A NAME="1008"></A>       * 
<A NAME="1009"></A>       * @see
<A NAME="1010"></A>       */</FONT>
<A NAME="1011"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1012"></A>        helpAbout_actionPerformed();
<A NAME="1013"></A>      } 
<A NAME="1014"></A>
<A NAME="1015"></A>    });
<A NAME="1016"></A>
<A NAME="1017"></A>    <FONT ID="SingleLineComment">// Die einzelnen Menueeintraege hinzufuegen
<A NAME="1018"></A></FONT>    menuTools.add(menuToolsAbout);
<A NAME="1019"></A>
<A NAME="1020"></A>    <FONT ID="SingleLineComment">// Statusleiste formatieren und positionieren
<A NAME="1021"></A></FONT>    statusBar.setText(<FONT ID="StringLiteral">"Bereit."</FONT>);
<A NAME="1022"></A>    statusBar.setForeground(Color.black);
<A NAME="1023"></A>    statusBar.setFont(<FONT ID="New">new</FONT> Font(<FONT ID="StringLiteral">"Dialog"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">12</FONT>));
<A NAME="1024"></A>    statusBar.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">1</FONT>, <FONT ID="IntegerLiteral">516</FONT>, <FONT ID="IntegerLiteral">512</FONT>, <FONT ID="IntegerLiteral">15</FONT>));
<A NAME="1025"></A>    <FONT ID="This">this</FONT>.getContentPane().add(statusBar, <FONT ID="Null">null</FONT>);
<A NAME="1026"></A>
<A NAME="1027"></A>    <FONT ID="SingleLineComment">// Fortschrittsanzeige enrichten
<A NAME="1028"></A></FONT>    prbarProgress.setToolTipText(<FONT ID="StringLiteral">"Fortschrittsanzeige"</FONT>);
<A NAME="1029"></A>    prbarProgress.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">675</FONT>, <FONT ID="IntegerLiteral">516</FONT>, <FONT ID="IntegerLiteral">112</FONT>, <FONT ID="IntegerLiteral">15</FONT>));
<A NAME="1030"></A>    prbarProgress.setMinimum(<FONT ID="IntegerLiteral">0</FONT>);
<A NAME="1031"></A>    prbarProgress.setMaximum(<FONT ID="IntegerLiteral">100</FONT>);
<A NAME="1032"></A>    prbarProgress.setValue(<FONT ID="IntegerLiteral">0</FONT>);
<A NAME="1033"></A>    <FONT ID="This">this</FONT>.getContentPane().add(prbarProgress, <FONT ID="Null">null</FONT>);
<A NAME="1034"></A>
<A NAME="1035"></A>    <FONT ID="SingleLineComment">// Canvas formatieren und positionieren
<A NAME="1036"></A></FONT>    pCanvas.setMaximumSize(<FONT ID="New">new</FONT> Dimension(<FONT ID="IntegerLiteral">512</FONT>, <FONT ID="IntegerLiteral">512</FONT>));
<A NAME="1037"></A>    pCanvas.setPreferredSize(<FONT ID="New">new</FONT> Dimension(<FONT ID="IntegerLiteral">512</FONT>, <FONT ID="IntegerLiteral">512</FONT>));
<A NAME="1038"></A>    pCanvas.setBackground(Color.black);
<A NAME="1039"></A>    pCanvas.setMinimumSize(<FONT ID="New">new</FONT> Dimension(<FONT ID="IntegerLiteral">512</FONT>, <FONT ID="IntegerLiteral">512</FONT>));
<A NAME="1040"></A>    pCanvas.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">1</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">512</FONT>, <FONT ID="IntegerLiteral">512</FONT>));
<A NAME="1041"></A>    pCanvas.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1042"></A>    <FONT ID="This">this</FONT>.getContentPane().add(pCanvas, <FONT ID="Null">null</FONT>);
<A NAME="1043"></A>    pCanvas.addMouseListener(<FONT ID="New">new</FONT> java.awt.event.MouseAdapter() {
<A NAME="1044"></A>
<A NAME="1045"></A>
<A NAME="1046"></A>      <FONT ID="FormalComment">/**
<A NAME="1047"></A>       * Method declaration
<A NAME="1048"></A>       * 
<A NAME="1049"></A>       * 
<A NAME="1050"></A>       * @param e
<A NAME="1051"></A>       * 
<A NAME="1052"></A>       * @see
<A NAME="1053"></A>       */</FONT>
<A NAME="1054"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> mouseExited(MouseEvent e) {
<A NAME="1055"></A>        pCanvas_mouseExited();
<A NAME="1056"></A>      } 
<A NAME="1057"></A>
<A NAME="1058"></A>
<A NAME="1059"></A>      <FONT ID="FormalComment">/**
<A NAME="1060"></A>       * Method declaration
<A NAME="1061"></A>       * 
<A NAME="1062"></A>       * 
<A NAME="1063"></A>       * @param e
<A NAME="1064"></A>       * 
<A NAME="1065"></A>       * @see
<A NAME="1066"></A>       */</FONT>
<A NAME="1067"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> mouseClicked(MouseEvent e) {
<A NAME="1068"></A>        pCanvas_mouseClicked(e);
<A NAME="1069"></A>      } 
<A NAME="1070"></A>
<A NAME="1071"></A>
<A NAME="1072"></A>      <FONT ID="FormalComment">/**
<A NAME="1073"></A>       * Method declaration
<A NAME="1074"></A>       * 
<A NAME="1075"></A>       * 
<A NAME="1076"></A>       * @param e
<A NAME="1077"></A>       * 
<A NAME="1078"></A>       * @see
<A NAME="1079"></A>       */</FONT>
<A NAME="1080"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> mousePressed(MouseEvent e) {
<A NAME="1081"></A>        pCanvas_mousePressed(e);
<A NAME="1082"></A>      } 
<A NAME="1083"></A>
<A NAME="1084"></A>
<A NAME="1085"></A>      <FONT ID="FormalComment">/**
<A NAME="1086"></A>       * Method declaration
<A NAME="1087"></A>       * 
<A NAME="1088"></A>       * 
<A NAME="1089"></A>       * @param e
<A NAME="1090"></A>       * 
<A NAME="1091"></A>       * @see
<A NAME="1092"></A>       */</FONT>
<A NAME="1093"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> mouseReleased(MouseEvent e) {
<A NAME="1094"></A>        pCanvas_mouseReleased(e);
<A NAME="1095"></A>      } 
<A NAME="1096"></A>
<A NAME="1097"></A>    });
<A NAME="1098"></A>    pCanvas.addMouseMotionListener(<FONT ID="New">new</FONT> java.awt.event.MouseMotionAdapter() {
<A NAME="1099"></A>
<A NAME="1100"></A>
<A NAME="1101"></A>      <FONT ID="FormalComment">/**
<A NAME="1102"></A>       * Method declaration
<A NAME="1103"></A>       * 
<A NAME="1104"></A>       * 
<A NAME="1105"></A>       * @param e
<A NAME="1106"></A>       * 
<A NAME="1107"></A>       * @see
<A NAME="1108"></A>       */</FONT>
<A NAME="1109"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> mouseMoved(MouseEvent e) {
<A NAME="1110"></A>        pCanvas_mouseMoved(e);
<A NAME="1111"></A>      } 
<A NAME="1112"></A>
<A NAME="1113"></A>
<A NAME="1114"></A>      <FONT ID="FormalComment">/**
<A NAME="1115"></A>       * Method declaration
<A NAME="1116"></A>       * 
<A NAME="1117"></A>       * 
<A NAME="1118"></A>       * @param e
<A NAME="1119"></A>       * 
<A NAME="1120"></A>       * @see
<A NAME="1121"></A>       */</FONT>
<A NAME="1122"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> mouseDragged(MouseEvent e) {
<A NAME="1123"></A>        pCanvas_mouseDragged(e);
<A NAME="1124"></A>      } 
<A NAME="1125"></A>
<A NAME="1126"></A>    });
<A NAME="1127"></A>
<A NAME="1128"></A>    <FONT ID="SingleLineComment">// Bildlaufleiste zum Canvas erzeugen, Positionieren und formatieren
<A NAME="1129"></A></FONT>    sbVerScrollbar = pCanvas.createVerticalScrollBar();
<A NAME="1130"></A>    sbVerScrollbar.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">513</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="IntegerLiteral">20</FONT>, <FONT ID="IntegerLiteral">512</FONT>));
<A NAME="1131"></A>    sbVerScrollbar.setBorder(BorderFactory.createEtchedBorder());
<A NAME="1132"></A>    sbVerScrollbar.setMinimum(<FONT ID="IntegerLiteral">0</FONT>);
<A NAME="1133"></A>    sbVerScrollbar.setMaximum(<FONT ID="IntegerLiteral">1024</FONT>);
<A NAME="1134"></A>    sbVerScrollbar.setVisibleAmount(<FONT ID="IntegerLiteral">511</FONT>);
<A NAME="1135"></A>    sbVerScrollbar.setBlockIncrement(<FONT ID="IntegerLiteral">512</FONT>);
<A NAME="1136"></A>    sbVerScrollbar.setUnitIncrement(<FONT ID="IntegerLiteral">512</FONT>);
<A NAME="1137"></A>    <FONT ID="This">this</FONT>.getContentPane().add(sbVerScrollbar, <FONT ID="Null">null</FONT>);
<A NAME="1138"></A>    sbVerScrollbar.addAdjustmentListener(<FONT ID="New">new</FONT> java.awt.event.AdjustmentListener() {
<A NAME="1139"></A>
<A NAME="1140"></A>
<A NAME="1141"></A>      <FONT ID="FormalComment">/**
<A NAME="1142"></A>       * Method declaration
<A NAME="1143"></A>       * 
<A NAME="1144"></A>       * 
<A NAME="1145"></A>       * @param e
<A NAME="1146"></A>       * 
<A NAME="1147"></A>       * @see
<A NAME="1148"></A>       */</FONT>
<A NAME="1149"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> adjustmentValueChanged(AdjustmentEvent e) {
<A NAME="1150"></A>        sbVerScrollbar_adjustmentValueChanged();
<A NAME="1151"></A>      } 
<A NAME="1152"></A>
<A NAME="1153"></A>    });
<A NAME="1154"></A>
<A NAME="1155"></A>    <FONT ID="SingleLineComment">// Toolbar-Panel positionieren und die Groesse einrichten
<A NAME="1156"></A></FONT>    pToolbar.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">535</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">255</FONT>, <FONT ID="IntegerLiteral">514</FONT>));
<A NAME="1157"></A>    pToolbar.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1158"></A>    pToolbar.add(tpMain, <FONT ID="Null">null</FONT>);
<A NAME="1159"></A>    <FONT ID="This">this</FONT>.getContentPane().add(pToolbar, <FONT ID="Null">null</FONT>);
<A NAME="1160"></A>
<A NAME="1161"></A>    <FONT ID="SingleLineComment">// 'Referenzserie'-Knopf formatieren und positionieren
<A NAME="1162"></A></FONT>    pbReferenceData.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1163"></A>    pbReferenceData.setIcon(iRefIma);
<A NAME="1164"></A>    pbReferenceData.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">3</FONT>, <FONT ID="IntegerLiteral">12</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">26</FONT>));
<A NAME="1165"></A>    pbReferenceData.setToolTipText(<FONT ID="StringLiteral">"Referenzserie laden"</FONT>);
<A NAME="1166"></A>    pbReferenceData.setEnabled(<FONT ID="True">true</FONT>);
<A NAME="1167"></A>    pToolbar.add(pbReferenceData, <FONT ID="Null">null</FONT>);
<A NAME="1168"></A>    pbReferenceData.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1169"></A>
<A NAME="1170"></A>
<A NAME="1171"></A>      <FONT ID="FormalComment">/**
<A NAME="1172"></A>       * Method declaration
<A NAME="1173"></A>       * 
<A NAME="1174"></A>       * 
<A NAME="1175"></A>       * @param e
<A NAME="1176"></A>       * 
<A NAME="1177"></A>       * @see
<A NAME="1178"></A>       */</FONT>
<A NAME="1179"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1180"></A>        pbReferenceData_actionPerformed();
<A NAME="1181"></A>      } 
<A NAME="1182"></A>
<A NAME="1183"></A>    });
<A NAME="1184"></A>
<A NAME="1185"></A>    <FONT ID="SingleLineComment">// 'oeffnen'-Knopf formatieren und positionieren
<A NAME="1186"></A></FONT>    pbLoad.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1187"></A>    pbLoad.setIcon(iOpen);
<A NAME="1188"></A>    pbLoad.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">40</FONT>, <FONT ID="IntegerLiteral">12</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1189"></A>    pbLoad.setToolTipText(<FONT ID="StringLiteral">"DICOM-Bild laden"</FONT>);
<A NAME="1190"></A>    pToolbar.add(pbLoad, <FONT ID="Null">null</FONT>);
<A NAME="1191"></A>    pbLoad.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1192"></A>
<A NAME="1193"></A>
<A NAME="1194"></A>      <FONT ID="FormalComment">/**
<A NAME="1195"></A>       * Method declaration
<A NAME="1196"></A>       * 
<A NAME="1197"></A>       * 
<A NAME="1198"></A>       * @param e
<A NAME="1199"></A>       * 
<A NAME="1200"></A>       * @see
<A NAME="1201"></A>       */</FONT>
<A NAME="1202"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1203"></A>        pbLoad_actionPerformed();
<A NAME="1204"></A>      } 
<A NAME="1205"></A>
<A NAME="1206"></A>    });
<A NAME="1207"></A>
<A NAME="1208"></A>    <FONT ID="SingleLineComment">// 'oeffne Serie'-Knopf formatieren und positionieren
<A NAME="1209"></A></FONT>    <FONT ID="SingleLineComment">// Nicht mehr notwendig: tha 2000.8.20
<A NAME="1210"></A></FONT>
<A NAME="1211"></A>    <FONT ID="MultiLineComment">/*
<A NAME="1212"></A>     * pbLoadSeries.setMargin(new Insets(2, 2, 2, 2));
<A NAME="1213"></A>     * pbLoadSeries.setIcon(iOpenSeries);
<A NAME="1214"></A>     * pbLoadSeries.setBounds(new Rectangle(77, 12, 27, 27));
<A NAME="1215"></A>     * pbLoadSeries.setToolTipText("DICOM-Bildserie laden");
<A NAME="1216"></A>     * pToolbar.add(pbLoadSeries, null);
<A NAME="1217"></A>     * pbLoadSeries.addActionListener(new java.awt.event.ActionListener() {
<A NAME="1218"></A>     * public void actionPerformed(ActionEvent e) {
<A NAME="1219"></A>     * pbLoadSeries_actionPerformed();
<A NAME="1220"></A>     * }
<A NAME="1221"></A>     * });
<A NAME="1222"></A>     */</FONT>
<A NAME="1223"></A>
<A NAME="1224"></A>    <FONT ID="SingleLineComment">// 'Speichern'-Knopf formatieren und positinieren
<A NAME="1225"></A></FONT>    pbSave.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1226"></A>    pbSave.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">77</FONT>, <FONT ID="IntegerLiteral">12</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1227"></A>    pbSave.setToolTipText(<FONT ID="StringLiteral">"Selektiertes Bild speichern"</FONT>);
<A NAME="1228"></A>    pbSave.setIcon(iSave);
<A NAME="1229"></A>    pToolbar.add(pbSave, <FONT ID="Null">null</FONT>);
<A NAME="1230"></A>    pbSave.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1231"></A>
<A NAME="1232"></A>
<A NAME="1233"></A>      <FONT ID="FormalComment">/**
<A NAME="1234"></A>       * Method declaration
<A NAME="1235"></A>       * 
<A NAME="1236"></A>       * 
<A NAME="1237"></A>       * @param e
<A NAME="1238"></A>       * 
<A NAME="1239"></A>       * @see
<A NAME="1240"></A>       */</FONT>
<A NAME="1241"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1242"></A>        pbSave_actionPerformed();
<A NAME="1243"></A>      } 
<A NAME="1244"></A>
<A NAME="1245"></A>    });
<A NAME="1246"></A>
<A NAME="1247"></A>    <FONT ID="SingleLineComment">// 'Drucken'-Knopf formatieren und poitionieren
<A NAME="1248"></A></FONT>    pbPrint.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1249"></A>    pbPrint.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">114</FONT>, <FONT ID="IntegerLiteral">12</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1250"></A>    pbPrint.setIcon(iPrint);
<A NAME="1251"></A>    pbPrint.setToolTipText(<FONT ID="StringLiteral">"Selektiertes Bild drucken"</FONT>);
<A NAME="1252"></A>    pToolbar.add(pbPrint, <FONT ID="Null">null</FONT>);
<A NAME="1253"></A>    pbPrint.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1254"></A>
<A NAME="1255"></A>
<A NAME="1256"></A>      <FONT ID="FormalComment">/**
<A NAME="1257"></A>       * Method declaration
<A NAME="1258"></A>       * 
<A NAME="1259"></A>       * 
<A NAME="1260"></A>       * @param e
<A NAME="1261"></A>       * 
<A NAME="1262"></A>       * @see
<A NAME="1263"></A>       */</FONT>
<A NAME="1264"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1265"></A>        pbPrint_actionPerformed();
<A NAME="1266"></A>      } 
<A NAME="1267"></A>
<A NAME="1268"></A>    });
<A NAME="1269"></A>
<A NAME="1270"></A>
<A NAME="1271"></A>    <FONT ID="SingleLineComment">// Karteireiter-HauptPanel positionieren
<A NAME="1272"></A></FONT>    tpMain.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">3</FONT>, <FONT ID="IntegerLiteral">45</FONT>, <FONT ID="IntegerLiteral">250</FONT>, <FONT ID="IntegerLiteral">185</FONT>));
<A NAME="1273"></A>
<A NAME="1274"></A>    <FONT ID="SingleLineComment">// Ansicht-Karteikarte einrichten (Layout)
<A NAME="1275"></A></FONT>    tpLayout.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1276"></A>    tpMain.add(tpLayout, <FONT ID="StringLiteral">"Ansicht"</FONT>);
<A NAME="1277"></A>
<A NAME="1278"></A>    <FONT ID="SingleLineComment">// Knopf zur Anzeige des k-Raum Manipulationstools einrichten
<A NAME="1279"></A></FONT>    pbKSpaceManip.setIcon(iKSpaceMan);
<A NAME="1280"></A>    pbKSpaceManip.setToolTipText(<FONT ID="StringLiteral">"k-Raum Manipulationswerkzeug"</FONT>);
<A NAME="1281"></A>    pbKSpaceManip.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">190</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1282"></A>    pbKSpaceManip.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1283"></A>
<A NAME="1284"></A>
<A NAME="1285"></A>      <FONT ID="FormalComment">/**
<A NAME="1286"></A>       * Method declaration
<A NAME="1287"></A>       * 
<A NAME="1288"></A>       * 
<A NAME="1289"></A>       * @param e
<A NAME="1290"></A>       * 
<A NAME="1291"></A>       * @see
<A NAME="1292"></A>       */</FONT>
<A NAME="1293"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1294"></A>        pbKSpaceManip_actionPerformed();
<A NAME="1295"></A>      } 
<A NAME="1296"></A>
<A NAME="1297"></A>    });
<A NAME="1298"></A>    tpLayout.add(pbKSpaceManip, <FONT ID="Null">null</FONT>);
<A NAME="1299"></A>
<A NAME="1300"></A>    <FONT ID="SingleLineComment">// Knopf zur k-Raum-Anzeige einrichten
<A NAME="1301"></A></FONT>    <FONT ID="SingleLineComment">// pbKSpace.setText("k-Raum");
<A NAME="1302"></A></FONT>    pbKSpace.setIcon(iKSpace);
<A NAME="1303"></A>    pbKSpace.setToolTipText(<FONT ID="StringLiteral">"Transformiertes Bild im k-Raum anzeigen"</FONT>);
<A NAME="1304"></A>    pbKSpace.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">153</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1305"></A>    pbKSpace.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1306"></A>
<A NAME="1307"></A>
<A NAME="1308"></A>      <FONT ID="FormalComment">/**
<A NAME="1309"></A>       * Method declaration
<A NAME="1310"></A>       * 
<A NAME="1311"></A>       * 
<A NAME="1312"></A>       * @param e
<A NAME="1313"></A>       * 
<A NAME="1314"></A>       * @see
<A NAME="1315"></A>       */</FONT>
<A NAME="1316"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1317"></A>        pbKSpace_actionPerformed();
<A NAME="1318"></A>      } 
<A NAME="1319"></A>
<A NAME="1320"></A>    });
<A NAME="1321"></A>    tpLayout.add(pbKSpace, <FONT ID="Null">null</FONT>);
<A NAME="1322"></A>
<A NAME="1323"></A>    <FONT ID="SingleLineComment">// Knopf zur Histogrammanzeige einrichten
<A NAME="1324"></A></FONT>    <FONT ID="SingleLineComment">// pbHistogram.setText("Histogramm");
<A NAME="1325"></A></FONT>    pbHistogram.setIcon(iHistogram);
<A NAME="1326"></A>    pbHistogram.setToolTipText(<FONT ID="StringLiteral">"Histogramm des selektierten Bildes anzeigen"</FONT>);
<A NAME="1327"></A>    pbHistogram.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">116</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1328"></A>    pbHistogram.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1329"></A>
<A NAME="1330"></A>
<A NAME="1331"></A>      <FONT ID="FormalComment">/**
<A NAME="1332"></A>       * Method declaration
<A NAME="1333"></A>       * 
<A NAME="1334"></A>       * 
<A NAME="1335"></A>       * @param e
<A NAME="1336"></A>       * 
<A NAME="1337"></A>       * @see
<A NAME="1338"></A>       */</FONT>
<A NAME="1339"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1340"></A>        pbHistogram_actionPerformed();
<A NAME="1341"></A>      } 
<A NAME="1342"></A>
<A NAME="1343"></A>    });
<A NAME="1344"></A>    tpLayout.add(pbHistogram, <FONT ID="Null">null</FONT>);
<A NAME="1345"></A>
<A NAME="1346"></A>    <FONT ID="SingleLineComment">// Knopf zur Anzeige der Bildbeschriftungen einrichten
<A NAME="1347"></A></FONT>    <FONT ID="SingleLineComment">// tbImageText.setText("Beschriftung");
<A NAME="1348"></A></FONT>    tbImageText.setIcon(iInfoText);
<A NAME="1349"></A>    tbImageText.setToolTipText(<FONT ID="StringLiteral">"Bildbeschriftung ein-/ausblenden"</FONT>);
<A NAME="1350"></A>    tbImageText.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">79</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1351"></A>    tbImageText.addMouseListener(<FONT ID="New">new</FONT> java.awt.event.MouseAdapter() {
<A NAME="1352"></A>
<A NAME="1353"></A>
<A NAME="1354"></A>      <FONT ID="FormalComment">/**
<A NAME="1355"></A>       * Method declaration
<A NAME="1356"></A>       * 
<A NAME="1357"></A>       * 
<A NAME="1358"></A>       * @param e
<A NAME="1359"></A>       * 
<A NAME="1360"></A>       * @see
<A NAME="1361"></A>       */</FONT>
<A NAME="1362"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> mouseClicked(MouseEvent e) {
<A NAME="1363"></A>        tbImageText_mouseClicked();
<A NAME="1364"></A>      } 
<A NAME="1365"></A>
<A NAME="1366"></A>    });
<A NAME="1367"></A>    tpLayout.add(tbImageText, <FONT ID="Null">null</FONT>);
<A NAME="1368"></A>
<A NAME="1369"></A>    <FONT ID="SingleLineComment">// Button zur Darstellung nur eines Bildes einrichten
<A NAME="1370"></A></FONT>    rb1Image.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1371"></A>    rb1Image.setIcon(i1Image);
<A NAME="1372"></A>    rb1Image.setSelected(<FONT ID="True">true</FONT>);
<A NAME="1373"></A>    rb1Image.setToolTipText(<FONT ID="StringLiteral">"1 Bild anzeigen"</FONT>);
<A NAME="1374"></A>    rb1Image.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">5</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1375"></A>    tpLayout.add(rb1Image, <FONT ID="Null">null</FONT>);
<A NAME="1376"></A>    rb1Image.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1377"></A>
<A NAME="1378"></A>
<A NAME="1379"></A>      <FONT ID="FormalComment">/**
<A NAME="1380"></A>       * Method declaration
<A NAME="1381"></A>       * 
<A NAME="1382"></A>       * 
<A NAME="1383"></A>       * @param e
<A NAME="1384"></A>       * 
<A NAME="1385"></A>       * @see
<A NAME="1386"></A>       */</FONT>
<A NAME="1387"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1388"></A>        rb1Image_actionPerformed();
<A NAME="1389"></A>      } 
<A NAME="1390"></A>
<A NAME="1391"></A>    });
<A NAME="1392"></A>
<A NAME="1393"></A>    <FONT ID="SingleLineComment">// Button zur gleichzeitigen Darstellung von 4 Bildern einrichten
<A NAME="1394"></A></FONT>    rb4Images.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1395"></A>    rb4Images.setIcon(i4Images);
<A NAME="1396"></A>    rb4Images.setToolTipText(<FONT ID="StringLiteral">"4 Bilder anzeigen"</FONT>);
<A NAME="1397"></A>    rb4Images.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">42</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1398"></A>    tpLayout.add(rb4Images, <FONT ID="Null">null</FONT>);
<A NAME="1399"></A>    rb4Images.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1400"></A>
<A NAME="1401"></A>
<A NAME="1402"></A>      <FONT ID="FormalComment">/**
<A NAME="1403"></A>       * Method declaration
<A NAME="1404"></A>       * 
<A NAME="1405"></A>       * 
<A NAME="1406"></A>       * @param e
<A NAME="1407"></A>       * 
<A NAME="1408"></A>       * @see
<A NAME="1409"></A>       */</FONT>
<A NAME="1410"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1411"></A>        rb4Images_actionPerformed();
<A NAME="1412"></A>      } 
<A NAME="1413"></A>
<A NAME="1414"></A>    });
<A NAME="1415"></A>
<A NAME="1416"></A>    <FONT ID="SingleLineComment">// Die beiden Knoepfe zur Darstellung von 1 bzw. 4 Bildern so
<A NAME="1417"></A></FONT>    <FONT ID="SingleLineComment">// gruppieren, dass immer nur einer gedrueclkt sein kann
<A NAME="1418"></A></FONT>    bgNumOfImages.add(rb1Image);
<A NAME="1419"></A>    bgNumOfImages.add(rb4Images);
<A NAME="1420"></A>
<A NAME="1421"></A>    <FONT ID="SingleLineComment">// Werkzeug-Karteikarte einrichten
<A NAME="1422"></A></FONT>    tpTools.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1423"></A>    tpMain.add(tpTools, <FONT ID="StringLiteral">"Tools"</FONT>);
<A NAME="1424"></A>
<A NAME="1425"></A>    <FONT ID="SingleLineComment">// Knopf zur Auswahl des Mauszeigerwerkezugs einrichten
<A NAME="1426"></A></FONT>    rbPointer.setIcon(iPointer);
<A NAME="1427"></A>    rbPointer.setBounds(<FONT ID="IntegerLiteral">5</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1428"></A>    rbPointer.setSelected(<FONT ID="True">true</FONT>);
<A NAME="1429"></A>    rbPointer.setToolTipText(<FONT ID="StringLiteral">"Einfacher Mauszeiger und Fensterungswerkzeug."</FONT>);
<A NAME="1430"></A>    tpTools.add(rbPointer, <FONT ID="Null">null</FONT>);
<A NAME="1431"></A>
<A NAME="1432"></A>    <FONT ID="SingleLineComment">// Knopf zur Auswahl des Vergroesserungswerkzeugs einrichten
<A NAME="1433"></A></FONT>    rbZoom.setIcon(iZoom);
<A NAME="1434"></A>    rbZoom.setBounds(<FONT ID="IntegerLiteral">42</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1435"></A>    rbZoom.setToolTipText(<FONT ID="StringLiteral">"Lupe"</FONT>);
<A NAME="1436"></A>    tpTools.add(rbZoom, <FONT ID="Null">null</FONT>);
<A NAME="1437"></A>
<A NAME="1438"></A>    <FONT ID="SingleLineComment">// Knopf zur Auswahl des Abstandsmessungswerkzeugs einrichten
<A NAME="1439"></A></FONT>    rbDistance.setIcon(iDistance);
<A NAME="1440"></A>    rbDistance.setBounds(<FONT ID="IntegerLiteral">79</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1441"></A>    rbDistance.setToolTipText(<FONT ID="StringLiteral">"Distanzmessung"</FONT>);
<A NAME="1442"></A>    tpTools.add(rbDistance, <FONT ID="Null">null</FONT>);
<A NAME="1443"></A>
<A NAME="1444"></A>    <FONT ID="SingleLineComment">// Knopf zur Auswahl des Winkelmessungswerkzeugs einrichten
<A NAME="1445"></A></FONT>    rbAngel.setIcon(iAngel);
<A NAME="1446"></A>    rbAngel.setBounds(<FONT ID="IntegerLiteral">116</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1447"></A>    rbAngel.setToolTipText(<FONT ID="StringLiteral">"Winkelmessung"</FONT>);
<A NAME="1448"></A>    tpTools.add(rbAngel, <FONT ID="Null">null</FONT>);
<A NAME="1449"></A>
<A NAME="1450"></A>    <FONT ID="SingleLineComment">// Knopf zur Auswahl des Grauwertmessungswerkzeugs einrichten
<A NAME="1451"></A></FONT>    rbGrayValue.setIcon(iGrayValue);
<A NAME="1452"></A>    rbGrayValue.setBounds(<FONT ID="IntegerLiteral">153</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1453"></A>    rbGrayValue.setToolTipText(<FONT ID="StringLiteral">"Grauwerterfassung"</FONT>);
<A NAME="1454"></A>    tpTools.add(rbGrayValue, <FONT ID="Null">null</FONT>);
<A NAME="1455"></A>
<A NAME="1456"></A>    <FONT ID="SingleLineComment">// Knopf zur Auswahl des Spiegel-Werkzeugs einrichten
<A NAME="1457"></A></FONT>    pbMirror.setIcon(iMirror);
<A NAME="1458"></A>    pbMirror.setBounds(<FONT ID="IntegerLiteral">5</FONT>, <FONT ID="IntegerLiteral">47</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1459"></A>    pbMirror.setToolTipText(<FONT ID="StringLiteral">"Horizontales Spiegeln"</FONT>);
<A NAME="1460"></A>    tpTools.add(pbMirror, <FONT ID="Null">null</FONT>);
<A NAME="1461"></A>    pbMirror.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1462"></A>
<A NAME="1463"></A>
<A NAME="1464"></A>      <FONT ID="FormalComment">/**
<A NAME="1465"></A>       * Method declaration
<A NAME="1466"></A>       * 
<A NAME="1467"></A>       * 
<A NAME="1468"></A>       * @param e
<A NAME="1469"></A>       * 
<A NAME="1470"></A>       * @see
<A NAME="1471"></A>       */</FONT>
<A NAME="1472"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1473"></A>        pbMirror_actionPerformed();
<A NAME="1474"></A>      } 
<A NAME="1475"></A>
<A NAME="1476"></A>    });
<A NAME="1477"></A>
<A NAME="1478"></A>    <FONT ID="SingleLineComment">// Knopf zur Auswahl des Rotier-Werkzeugs einrichten
<A NAME="1479"></A></FONT>    pbRotate.setIcon(iRotate);
<A NAME="1480"></A>    pbRotate.setBounds(<FONT ID="IntegerLiteral">42</FONT>, <FONT ID="IntegerLiteral">47</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1481"></A>    pbRotate.setToolTipText(<FONT ID="StringLiteral">"90° im Urzeigersinn drehen"</FONT>);
<A NAME="1482"></A>    tpTools.add(pbRotate, <FONT ID="Null">null</FONT>);
<A NAME="1483"></A>    pbRotate.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1484"></A>
<A NAME="1485"></A>
<A NAME="1486"></A>      <FONT ID="FormalComment">/**
<A NAME="1487"></A>       * Method declaration
<A NAME="1488"></A>       * 
<A NAME="1489"></A>       * 
<A NAME="1490"></A>       * @param e
<A NAME="1491"></A>       * 
<A NAME="1492"></A>       * @see
<A NAME="1493"></A>       */</FONT>
<A NAME="1494"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1495"></A>        pbRotate_actionPerformed();
<A NAME="1496"></A>      } 
<A NAME="1497"></A>
<A NAME="1498"></A>    });
<A NAME="1499"></A>
<A NAME="1500"></A>    <FONT ID="SingleLineComment">// Knopf zum Invertieren des Bildes einrichten
<A NAME="1501"></A></FONT>    pbInvert.setIcon(iInvert);
<A NAME="1502"></A>    pbInvert.setBounds(<FONT ID="IntegerLiteral">79</FONT>, <FONT ID="IntegerLiteral">47</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1503"></A>    pbInvert.setToolTipText(<FONT ID="StringLiteral">"Invertieren"</FONT>);
<A NAME="1504"></A>    tpTools.add(pbInvert, <FONT ID="Null">null</FONT>);
<A NAME="1505"></A>    pbInvert.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1506"></A>
<A NAME="1507"></A>
<A NAME="1508"></A>      <FONT ID="FormalComment">/**
<A NAME="1509"></A>       * Method declaration
<A NAME="1510"></A>       * 
<A NAME="1511"></A>       * 
<A NAME="1512"></A>       * @param e
<A NAME="1513"></A>       * 
<A NAME="1514"></A>       * @see
<A NAME="1515"></A>       */</FONT>
<A NAME="1516"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1517"></A>        pbInvert_actionPerformed();
<A NAME="1518"></A>      } 
<A NAME="1519"></A>
<A NAME="1520"></A>    });
<A NAME="1521"></A>
<A NAME="1522"></A>    <FONT ID="SingleLineComment">// Knopf zum Loeschen des selektierten Bildes einrichten
<A NAME="1523"></A></FONT>    pbDelete.setIcon(iDelete);
<A NAME="1524"></A>    pbDelete.setBounds(<FONT ID="IntegerLiteral">5</FONT>, <FONT ID="IntegerLiteral">84</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>);
<A NAME="1525"></A>    pbDelete.setToolTipText(<FONT ID="StringLiteral">"Selektiertes Bild loeschen"</FONT>);
<A NAME="1526"></A>    tpTools.add(pbDelete, <FONT ID="Null">null</FONT>);
<A NAME="1527"></A>    pbDelete.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1528"></A>
<A NAME="1529"></A>
<A NAME="1530"></A>      <FONT ID="FormalComment">/**
<A NAME="1531"></A>       * Method declaration
<A NAME="1532"></A>       * 
<A NAME="1533"></A>       * 
<A NAME="1534"></A>       * @param e
<A NAME="1535"></A>       * 
<A NAME="1536"></A>       * @see
<A NAME="1537"></A>       */</FONT>
<A NAME="1538"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1539"></A>        pbDelete_actionPerformed();
<A NAME="1540"></A>      } 
<A NAME="1541"></A>
<A NAME="1542"></A>    });
<A NAME="1543"></A>
<A NAME="1544"></A>
<A NAME="1545"></A>    <FONT ID="SingleLineComment">// Die Werkzeugknoepfe so gruppieren, dass immer nur einer
<A NAME="1546"></A></FONT>    <FONT ID="SingleLineComment">// ausgewaehlt sein kann
<A NAME="1547"></A></FONT>    ButtonGroup bgTools = <FONT ID="New">new</FONT> ButtonGroup();
<A NAME="1548"></A>
<A NAME="1549"></A>    bgTools.add(rbPointer);
<A NAME="1550"></A>    bgTools.add(rbZoom);
<A NAME="1551"></A>    bgTools.add(rbDistance);
<A NAME="1552"></A>    bgTools.add(rbAngel);
<A NAME="1553"></A>    bgTools.add(rbGrayValue);
<A NAME="1554"></A>
<A NAME="1555"></A>    <FONT ID="SingleLineComment">// Fenstern-Karteikarte einrichten
<A NAME="1556"></A></FONT>    tpWindow.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1557"></A>    tpMain.add(tpWindow, <FONT ID="StringLiteral">"Fenstern"</FONT>);
<A NAME="1558"></A>
<A NAME="1559"></A>    <FONT ID="SingleLineComment">// Helligkeitseingabefeld mit Slider hinzufuegen
<A NAME="1560"></A></FONT>    pCenter = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/SliderPanel.java.html">SliderPanel</A>(<FONT ID="StringLiteral">"Zentrum:"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">4096</FONT>, <FONT ID="StringLiteral">""</FONT>);
<A NAME="1561"></A>    pCenter.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">5</FONT>, <FONT ID="IntegerLiteral">185</FONT>, <FONT ID="IntegerLiteral">70</FONT>));
<A NAME="1562"></A>    pCenter.setToolTip(<FONT ID="StringLiteral">"Einstellung der Bildhelligkeit"</FONT>);
<A NAME="1563"></A>    pCenter.setToolTipText(<FONT ID="StringLiteral">"Mit diesem Wert wird die Helligkeit des Bildes beeinflusst."</FONT>);
<A NAME="1564"></A>    pCenter.setTextRange(<FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">4095</FONT>);
<A NAME="1565"></A>    pCenter.setTickSpacing(<FONT ID="IntegerLiteral">1024</FONT>, <FONT ID="IntegerLiteral">0</FONT>);
<A NAME="1566"></A>    pCenter.fillPanel();
<A NAME="1567"></A>    pCenter.setSliderMaximum(<FONT ID="IntegerLiteral">4095</FONT>);
<A NAME="1568"></A>    tpWindow.add(pCenter);
<A NAME="1569"></A>    pCenter.setValue(<FONT ID="IntegerLiteral">2048</FONT>);
<A NAME="1570"></A>    pCenter.getTextFieldReference().addCaretListener(<FONT ID="New">new</FONT> CaretListener() {
<A NAME="1571"></A>
<A NAME="1572"></A>
<A NAME="1573"></A>      <FONT ID="FormalComment">/**
<A NAME="1574"></A>       * Method declaration
<A NAME="1575"></A>       * 
<A NAME="1576"></A>       * 
<A NAME="1577"></A>       * @param e
<A NAME="1578"></A>       * 
<A NAME="1579"></A>       * @see
<A NAME="1580"></A>       */</FONT>
<A NAME="1581"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> caretUpdate(CaretEvent e) {
<A NAME="1582"></A>        updateCenter();
<A NAME="1583"></A>        pCanvas.repaint();
<A NAME="1584"></A>      } 
<A NAME="1585"></A>
<A NAME="1586"></A>    });
<A NAME="1587"></A>
<A NAME="1588"></A>    <FONT ID="SingleLineComment">// Helligkeitseingabefeld mit Slider hinzufuegen
<A NAME="1589"></A></FONT>    pWindow = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/SliderPanel.java.html">SliderPanel</A>(<FONT ID="StringLiteral">"Breite:"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">4096</FONT>, <FONT ID="StringLiteral">""</FONT>);
<A NAME="1590"></A>    pWindow.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">80</FONT>, <FONT ID="IntegerLiteral">185</FONT>, <FONT ID="IntegerLiteral">70</FONT>));
<A NAME="1591"></A>    pWindow.setToolTip(<FONT ID="StringLiteral">"Einstellung der Bildhelligkeit"</FONT>);
<A NAME="1592"></A>    pWindow.setTextRange(<FONT ID="IntegerLiteral">1</FONT>, <FONT ID="IntegerLiteral">4096</FONT>);
<A NAME="1593"></A>    pWindow.setTickSpacing(<FONT ID="IntegerLiteral">1024</FONT>, <FONT ID="IntegerLiteral">0</FONT>);
<A NAME="1594"></A>    pWindow.setToolTipText(<FONT ID="StringLiteral">"Mit diesem Wert wird der Kontrast des Bildes beeinflusst."</FONT>);
<A NAME="1595"></A>    pWindow.fillPanel();
<A NAME="1596"></A>    pWindow.setSliderMinimum(<FONT ID="IntegerLiteral">1</FONT>);
<A NAME="1597"></A>    tpWindow.add(pWindow);
<A NAME="1598"></A>    pWindow.setValue(<FONT ID="IntegerLiteral">4096</FONT>);
<A NAME="1599"></A>    pWindow.getTextFieldReference().addCaretListener(<FONT ID="New">new</FONT> CaretListener() {
<A NAME="1600"></A>
<A NAME="1601"></A>
<A NAME="1602"></A>      <FONT ID="FormalComment">/**
<A NAME="1603"></A>       * Method declaration
<A NAME="1604"></A>       * 
<A NAME="1605"></A>       * 
<A NAME="1606"></A>       * @param e
<A NAME="1607"></A>       * 
<A NAME="1608"></A>       * @see
<A NAME="1609"></A>       */</FONT>
<A NAME="1610"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> caretUpdate(CaretEvent e) {
<A NAME="1611"></A>        updateWindow();
<A NAME="1612"></A>        pCanvas.repaint();
<A NAME="1613"></A>      } 
<A NAME="1614"></A>
<A NAME="1615"></A>    });
<A NAME="1616"></A>
<A NAME="1617"></A>
<A NAME="1618"></A>    <FONT ID="SingleLineComment">// Button fuer das Zuruecksetzen der Fensterung einrichten
<A NAME="1619"></A></FONT>    pbResetWindowing.setBounds(<FONT ID="IntegerLiteral">193</FONT>, <FONT ID="IntegerLiteral">5</FONT>, <FONT ID="IntegerLiteral">45</FONT>, <FONT ID="IntegerLiteral">70</FONT>);
<A NAME="1620"></A>    pbResetWindowing.setText(<FONT ID="StringLiteral">"R"</FONT>);
<A NAME="1621"></A>    pbResetWindowing.setToolTipText(<FONT ID="StringLiteral">"Standardfensterung (2048/4096)"</FONT>);
<A NAME="1622"></A>    tpWindow.add(pbResetWindowing);
<A NAME="1623"></A>    pbResetWindowing.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1624"></A>
<A NAME="1625"></A>
<A NAME="1626"></A>      <FONT ID="FormalComment">/**
<A NAME="1627"></A>       * Method declaration
<A NAME="1628"></A>       * 
<A NAME="1629"></A>       * 
<A NAME="1630"></A>       * @param e
<A NAME="1631"></A>       * 
<A NAME="1632"></A>       * @see
<A NAME="1633"></A>       */</FONT>
<A NAME="1634"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1635"></A>        pWindow.setValue(<FONT ID="IntegerLiteral">4096</FONT>);
<A NAME="1636"></A>        pCenter.setValue(<FONT ID="IntegerLiteral">2048</FONT>);
<A NAME="1637"></A>        updateCW();
<A NAME="1638"></A>        pCanvas.repaint();
<A NAME="1639"></A>      } 
<A NAME="1640"></A>
<A NAME="1641"></A>    });
<A NAME="1642"></A>
<A NAME="1643"></A>    <FONT ID="SingleLineComment">// Button fuer optimale Fensterung einrichten
<A NAME="1644"></A></FONT>    pbOptWindowing.setBounds(<FONT ID="IntegerLiteral">193</FONT>, <FONT ID="IntegerLiteral">80</FONT>, <FONT ID="IntegerLiteral">45</FONT>, <FONT ID="IntegerLiteral">70</FONT>);
<A NAME="1645"></A>    pbOptWindowing.setText(<FONT ID="StringLiteral">"O"</FONT>);
<A NAME="1646"></A>    pbOptWindowing.setToolTipText(<FONT ID="StringLiteral">"Optimale Fensterung"</FONT>);
<A NAME="1647"></A>    tpWindow.add(pbOptWindowing);
<A NAME="1648"></A>    pbOptWindowing.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1649"></A>
<A NAME="1650"></A>
<A NAME="1651"></A>      <FONT ID="FormalComment">/**
<A NAME="1652"></A>       * Method declaration
<A NAME="1653"></A>       * 
<A NAME="1654"></A>       * 
<A NAME="1655"></A>       * @param e
<A NAME="1656"></A>       * 
<A NAME="1657"></A>       * @see
<A NAME="1658"></A>       */</FONT>
<A NAME="1659"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1660"></A>        pbOptWindowing_actionPerformed();
<A NAME="1661"></A>      } 
<A NAME="1662"></A>
<A NAME="1663"></A>    });
<A NAME="1664"></A>
<A NAME="1665"></A>    <FONT ID="SingleLineComment">// 3D-Karteikarte einrichten
<A NAME="1666"></A></FONT>    tp3D.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1667"></A>    tpMain.add(tp3D, <FONT ID="StringLiteral">"3D"</FONT>);
<A NAME="1668"></A>
<A NAME="1669"></A>    <FONT ID="SingleLineComment">// Bedienelemente der 3D-Karteikarte einrichten
<A NAME="1670"></A></FONT>    <FONT ID="SingleLineComment">// einrichten des Slider-Panels fuer die Geschwindigkeit
<A NAME="1671"></A></FONT>    pbAnimation.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1672"></A>    pbAnimation.setIcon(iAnimation);
<A NAME="1673"></A>    pbAnimation.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">5</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1674"></A>    pbAnimation.setToolTipText(<FONT ID="StringLiteral">"oeffnet ein Animationsfenster"</FONT>);
<A NAME="1675"></A>    tp3D.add(pbAnimation, <FONT ID="Null">null</FONT>);
<A NAME="1676"></A>    pbAnimation.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1677"></A>
<A NAME="1678"></A>
<A NAME="1679"></A>      <FONT ID="FormalComment">/**
<A NAME="1680"></A>       * Method declaration
<A NAME="1681"></A>       * 
<A NAME="1682"></A>       * 
<A NAME="1683"></A>       * @param e
<A NAME="1684"></A>       * 
<A NAME="1685"></A>       * @see
<A NAME="1686"></A>       */</FONT>
<A NAME="1687"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1688"></A>        pbAnimation_actionPerformed();
<A NAME="1689"></A>      } 
<A NAME="1690"></A>
<A NAME="1691"></A>    });
<A NAME="1692"></A>
<A NAME="1693"></A>    <FONT ID="SingleLineComment">// / Knopf zur Berechnung eines MIP-Bildes einrichten
<A NAME="1694"></A></FONT>    pbCalcMIP.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1695"></A>    pbCalcMIP.setText(<FONT ID="StringLiteral">"M"</FONT>);
<A NAME="1696"></A>    pbCalcMIP.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">42</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1697"></A>    pbCalcMIP.setToolTipText(<FONT ID="StringLiteral">"MIP-Bild berechnen"</FONT>);
<A NAME="1698"></A>    tp3D.add(pbCalcMIP, <FONT ID="Null">null</FONT>);
<A NAME="1699"></A>    pbCalcMIP.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1700"></A>
<A NAME="1701"></A>
<A NAME="1702"></A>      <FONT ID="FormalComment">/**
<A NAME="1703"></A>       * Method declaration
<A NAME="1704"></A>       * 
<A NAME="1705"></A>       * 
<A NAME="1706"></A>       * @param e
<A NAME="1707"></A>       * 
<A NAME="1708"></A>       * @see
<A NAME="1709"></A>       */</FONT>
<A NAME="1710"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1711"></A>        pbCalcMIP_actionPerformed();
<A NAME="1712"></A>      } 
<A NAME="1713"></A>
<A NAME="1714"></A>    });
<A NAME="1715"></A>
<A NAME="1716"></A>    <FONT ID="SingleLineComment">// Knopf zur Berechnung einer 90-Grad-Projektion einrichten
<A NAME="1717"></A></FONT>    pbProjection1.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1718"></A>    pbProjection1.setIcon(iProjection1);
<A NAME="1719"></A>    pbProjection1.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">79</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1720"></A>    pbProjection1.setToolTipText(<FONT ID="StringLiteral">"90°-Projektion"</FONT>);
<A NAME="1721"></A>    tp3D.add(pbProjection1, <FONT ID="Null">null</FONT>);
<A NAME="1722"></A>    pbProjection1.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1723"></A>
<A NAME="1724"></A>
<A NAME="1725"></A>      <FONT ID="FormalComment">/**
<A NAME="1726"></A>       * Method declaration
<A NAME="1727"></A>       * 
<A NAME="1728"></A>       * 
<A NAME="1729"></A>       * @param e
<A NAME="1730"></A>       * 
<A NAME="1731"></A>       * @see
<A NAME="1732"></A>       */</FONT>
<A NAME="1733"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1734"></A>        pbProjection1_actionPerformed();
<A NAME="1735"></A>      } 
<A NAME="1736"></A>
<A NAME="1737"></A>    });
<A NAME="1738"></A>
<A NAME="1739"></A>    <FONT ID="SingleLineComment">// Knopf zur Berechnung der zweiten 90-Grad-Projektion einrichten
<A NAME="1740"></A></FONT>    pbProjection2.setMargin(<FONT ID="New">new</FONT> Insets(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>));
<A NAME="1741"></A>    pbProjection2.setIcon(iProjection2);
<A NAME="1742"></A>    pbProjection2.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">116</FONT>, <FONT ID="IntegerLiteral">10</FONT>, <FONT ID="IntegerLiteral">27</FONT>, <FONT ID="IntegerLiteral">27</FONT>));
<A NAME="1743"></A>    pbProjection2.setToolTipText(<FONT ID="StringLiteral">"90°-Projektion"</FONT>);
<A NAME="1744"></A>    tp3D.add(pbProjection2, <FONT ID="Null">null</FONT>);
<A NAME="1745"></A>    pbProjection2.addActionListener(<FONT ID="New">new</FONT> java.awt.event.ActionListener() {
<A NAME="1746"></A>
<A NAME="1747"></A>
<A NAME="1748"></A>      <FONT ID="FormalComment">/**
<A NAME="1749"></A>       * Method declaration
<A NAME="1750"></A>       * 
<A NAME="1751"></A>       * 
<A NAME="1752"></A>       * @param e
<A NAME="1753"></A>       * 
<A NAME="1754"></A>       * @see
<A NAME="1755"></A>       */</FONT>
<A NAME="1756"></A>      <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> actionPerformed(ActionEvent e) {
<A NAME="1757"></A>        pbProjection2_actionPerformed();
<A NAME="1758"></A>      } 
<A NAME="1759"></A>
<A NAME="1760"></A>    });
<A NAME="1761"></A>
<A NAME="1762"></A>    <FONT ID="SingleLineComment">// Extras-Karteikarte einrichten
<A NAME="1763"></A></FONT>    tpExtras.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1764"></A>    tpMain.add(tpExtras, <FONT ID="StringLiteral">"Extras"</FONT>);
<A NAME="1765"></A>
<A NAME="1766"></A>    <FONT ID="SingleLineComment">// Elemente zur Auswahl der Position des naechsten erzeugten Bildes anlegen
<A NAME="1767"></A></FONT>    pNextImageAt.setBounds(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">240</FONT>, <FONT ID="IntegerLiteral">44</FONT>);
<A NAME="1768"></A>    pNextImageAt.setLayout(<FONT ID="Null">null</FONT>);
<A NAME="1769"></A>    pNextImageAt.setBorder(BorderFactory.createEtchedBorder());
<A NAME="1770"></A>    tpExtras.add(pNextImageAt, <FONT ID="Null">null</FONT>);
<A NAME="1771"></A>    lNextImageAt.setText(<FONT ID="StringLiteral">"Naechstes Bild positionieren:"</FONT>);
<A NAME="1772"></A>    lNextImageAt.setBounds(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">240</FONT>, <FONT ID="IntegerLiteral">20</FONT>);
<A NAME="1773"></A>    pNextImageAt.add(lNextImageAt);
<A NAME="1774"></A>    rbNextImageAtSelection.setText(<FONT ID="StringLiteral">"Selektion"</FONT>);
<A NAME="1775"></A>    rbNextImageAtSelection.setBounds(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">22</FONT>, <FONT ID="IntegerLiteral">125</FONT>, <FONT ID="IntegerLiteral">20</FONT>);
<A NAME="1776"></A>    pNextImageAt.add(rbNextImageAtSelection, <FONT ID="Null">null</FONT>);
<A NAME="1777"></A>    rbNextImageAtFreePlace.setText(<FONT ID="StringLiteral">"Freie Stelle"</FONT>);
<A NAME="1778"></A>    rbNextImageAtFreePlace.setBounds(<FONT ID="IntegerLiteral">130</FONT>, <FONT ID="IntegerLiteral">22</FONT>, <FONT ID="IntegerLiteral">105</FONT>, <FONT ID="IntegerLiteral">20</FONT>);
<A NAME="1779"></A>    pNextImageAt.add(rbNextImageAtFreePlace, <FONT ID="Null">null</FONT>);
<A NAME="1780"></A>    rbNextImageAtFreePlace.setSelected(<FONT ID="True">true</FONT>);
<A NAME="1781"></A>    bgPlaceNextImage.add(rbNextImageAtSelection);
<A NAME="1782"></A>    bgPlaceNextImage.add(rbNextImageAtFreePlace);
<A NAME="1783"></A>
<A NAME="1784"></A>    <FONT ID="SingleLineComment">// Checkbox zur Aktivierung eines neuen Bildes einrichten
<A NAME="1785"></A></FONT>    chbActivateNewImg.setText(<FONT ID="StringLiteral">"Neues Bild aktivieren"</FONT>);
<A NAME="1786"></A>    chbActivateNewImg.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">2</FONT>, <FONT ID="IntegerLiteral">47</FONT>, <FONT ID="IntegerLiteral">145</FONT>, <FONT ID="IntegerLiteral">25</FONT>));
<A NAME="1787"></A>    chbActivateNewImg.setSelected(<FONT ID="True">true</FONT>);
<A NAME="1788"></A>    tpExtras.add(chbActivateNewImg, <FONT ID="Null">null</FONT>);
<A NAME="1789"></A>
<A NAME="1790"></A>    <FONT ID="SingleLineComment">// Positionsanzeige einrichten
<A NAME="1791"></A></FONT>    lPosition.setText(<FONT ID="StringLiteral">""</FONT>);
<A NAME="1792"></A>    lPosition.setForeground(Color.black);
<A NAME="1793"></A>    lPosition.setFont(<FONT ID="New">new</FONT> Font(<FONT ID="StringLiteral">"Dialog"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">12</FONT>));
<A NAME="1794"></A>    lPosition.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">590</FONT>, <FONT ID="IntegerLiteral">516</FONT>, <FONT ID="IntegerLiteral">95</FONT>, <FONT ID="IntegerLiteral">15</FONT>));
<A NAME="1795"></A>    <FONT ID="This">this</FONT>.getContentPane().add(lPosition, <FONT ID="Null">null</FONT>);
<A NAME="1796"></A>    lPositionText.setText(<FONT ID="StringLiteral">"Position:"</FONT>);
<A NAME="1797"></A>    lPositionText.setForeground(Color.black);
<A NAME="1798"></A>    lPositionText.setFont(<FONT ID="New">new</FONT> Font(<FONT ID="StringLiteral">"Dialog"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">12</FONT>));
<A NAME="1799"></A>    lPositionText.setBounds(<FONT ID="New">new</FONT> Rectangle(<FONT ID="IntegerLiteral">538</FONT>, <FONT ID="IntegerLiteral">516</FONT>, <FONT ID="IntegerLiteral">50</FONT>, <FONT ID="IntegerLiteral">15</FONT>));
<A NAME="1800"></A>    <FONT ID="This">this</FONT>.getContentPane().add(lPositionText, <FONT ID="Null">null</FONT>);
<A NAME="1801"></A>  }   <FONT ID="SingleLineComment">// Methode jbInit
<A NAME="1802"></A></FONT> 
<A NAME="1803"></A>
<A NAME="1804"></A>  <FONT ID="SingleLineComment">// *************************************************************************
<A NAME="1805"></A></FONT>  <FONT ID="SingleLineComment">// *******************  Event-Methoden *************************************
<A NAME="1806"></A></FONT>  <FONT ID="SingleLineComment">// *************************************************************************
<A NAME="1807"></A></FONT>
<A NAME="1808"></A>
<A NAME="1809"></A>  <FONT ID="FormalComment">/**
<A NAME="1810"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum Loeschen des selktierten
<A NAME="1811"></A>   * Bildes gedrueckt wurde. Es wird zunaecht ein Dialog aufgeblendet, der eine
<A NAME="1812"></A>   * Sicherheitsabfrage darstellt und nach dessen Bestaetigung wird das
<A NAME="1813"></A>   * selektierte Bild geloescht.
<A NAME="1814"></A>   */</FONT>
<A NAME="1815"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> editClear_actionPerformed() {
<A NAME="1816"></A>
<A NAME="1817"></A>    <FONT ID="SingleLineComment">// Auflenden eines Bestaetigungsdialogs und Auslesen des gedrueckten Knopfes
<A NAME="1818"></A></FONT>    <FONT ID="Int">int</FONT> response;
<A NAME="1819"></A>
<A NAME="1820"></A>    response = JOptionPane.showConfirmDialog(<FONT ID="Null">null</FONT>, <FONT ID="StringLiteral">"Moechten Sie wirklich das\n"</FONT> + <FONT ID="StringLiteral">"selektierte Bild loeschen?"</FONT>);
<A NAME="1821"></A>
<A NAME="1822"></A>    <FONT ID="SingleLineComment">// Wenn der Dialog bestaetigt wurde, wird das Bild aus dem Stack geloescht
<A NAME="1823"></A></FONT>    <FONT ID="If">if</FONT> (response == <FONT ID="IntegerLiteral">0</FONT>)  <FONT ID="SingleLineComment">// Ok gedrueckt
<A NAME="1824"></A></FONT>     {
<A NAME="1825"></A>      pCanvas.getImageStack().deletePictureAtPos(pCanvas.getActiveImage());
<A NAME="1826"></A>
<A NAME="1827"></A>      <FONT ID="SingleLineComment">// Scrollbereich aktualisieren und Canvas neu zeichnen
<A NAME="1828"></A></FONT>      pCanvas.updateScrollbar();
<A NAME="1829"></A>      pCanvas.repaint();
<A NAME="1830"></A>      <FONT ID="This">this</FONT>.setVisible(<FONT ID="True">true</FONT>);
<A NAME="1831"></A>    } 
<A NAME="1832"></A>  } 
<A NAME="1833"></A>
<A NAME="1834"></A>
<A NAME="1835"></A>  <FONT ID="FormalComment">/**
<A NAME="1836"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum Loeschen aller
<A NAME="1837"></A>   * Bilder gedrueckt wurde. Es wird zunaecht ein Dialog aufgeblendet, der eine
<A NAME="1838"></A>   * Sicherheitsabfrage darstellt und nach dessen Bestaetigung werden alle
<A NAME="1839"></A>   * Bilder geloescht.
<A NAME="1840"></A>   */</FONT>
<A NAME="1841"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> editClearAll_actionPerformed() {
<A NAME="1842"></A>
<A NAME="1843"></A>    <FONT ID="SingleLineComment">// Auflenden eines Bestaetigungsdialogs und Auslesen des gedrueckten Knopfes
<A NAME="1844"></A></FONT>    <FONT ID="Int">int</FONT> response;
<A NAME="1845"></A>
<A NAME="1846"></A>    response = JOptionPane.showConfirmDialog(<FONT ID="Null">null</FONT>, <FONT ID="StringLiteral">"Moechten Sie wirklich alle\n"</FONT> + <FONT ID="StringLiteral">"Bilder loeschen?"</FONT>);
<A NAME="1847"></A>
<A NAME="1848"></A>    <FONT ID="SingleLineComment">// Wenn der Dialog bestaetigt wurde, werden alle Bilder geloescht
<A NAME="1849"></A></FONT>    <FONT ID="If">if</FONT> (response == <FONT ID="IntegerLiteral">0</FONT>)  <FONT ID="SingleLineComment">// Ok gedrueckt
<A NAME="1850"></A></FONT>     {
<A NAME="1851"></A>      pCanvas.getImageStack().clearImageStack();
<A NAME="1852"></A>      pCanvas.updateScrollbar();
<A NAME="1853"></A>      pCanvas.repaint();
<A NAME="1854"></A>      <FONT ID="This">this</FONT>.setVisible(<FONT ID="True">true</FONT>);
<A NAME="1855"></A>    } 
<A NAME="1856"></A>  } 
<A NAME="1857"></A>
<A NAME="1858"></A>
<A NAME="1859"></A>  <FONT ID="FormalComment">/**
<A NAME="1860"></A>   * Die Methode implementiert die Fensterung des selektierten Bildes mittels
<A NAME="1861"></A>   * Mausbewegung. Eine Bewegung der Maus in x-Richhtung veraendert das Zentrum,
<A NAME="1862"></A>   * eine Bewegung in y-Richtung die Breite. Ausserdem wird fuer die Distanz-
<A NAME="1863"></A>   * und Winkelmessung die aktuelle Mausposition in der Canvas-Klasse gesetzt.
<A NAME="1864"></A>   * @param e Das Ereignis, das beim Bewegen der Maus mit gedrueckter Maustaste
<A NAME="1865"></A>   * ausgeloest wird.
<A NAME="1866"></A>   */</FONT>
<A NAME="1867"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pCanvas_mouseDragged(MouseEvent e) {
<A NAME="1868"></A>
<A NAME="1869"></A>    <FONT ID="If">if</FONT> (rbPointer.isSelected()) {
<A NAME="1870"></A>      <FONT ID="Int">int</FONT>   curX, curY, difX, difY, difT;
<A NAME="1871"></A>      <FONT ID="Long">long</FONT>  curWhen;
<A NAME="1872"></A>
<A NAME="1873"></A>      <FONT ID="SingleLineComment">// Cursor setzen
<A NAME="1874"></A></FONT>      pCanvas.setCursor(WINDOW_CURSOR);
<A NAME="1875"></A>
<A NAME="1876"></A>      <FONT ID="SingleLineComment">// Begrenzen der Durchgefuehrten Aktionen auf 10 pro Sekunde
<A NAME="1877"></A></FONT>      curWhen = e.getWhen();
<A NAME="1878"></A>      difT = (<FONT ID="Int">int</FONT>) (curWhen - lastTime);
<A NAME="1879"></A>      <FONT ID="If">if</FONT> (difT &lt; <FONT ID="IntegerLiteral">100</FONT>) {
<A NAME="1880"></A>        <FONT ID="Return">return</FONT>;
<A NAME="1881"></A>
<A NAME="1882"></A>      } 
<A NAME="1883"></A>      curX = e.getX();
<A NAME="1884"></A>      curY = e.getY();
<A NAME="1885"></A>      difX = curX - lastMouseClickX;
<A NAME="1886"></A>      difY = lastMouseClickY - curY;
<A NAME="1887"></A>
<A NAME="1888"></A>      <FONT ID="SingleLineComment">// Bei schneller Mausbewegung auch eine schnellere (grobere) Fensterung
<A NAME="1889"></A></FONT>      <FONT ID="SingleLineComment">// durchfuehren
<A NAME="1890"></A></FONT>      <FONT ID="If">if</FONT> (Math.abs(difX) &gt; <FONT ID="IntegerLiteral">10</FONT>) {
<A NAME="1891"></A>        difX *= <FONT ID="IntegerLiteral">10</FONT>;
<A NAME="1892"></A>      } 
<A NAME="1893"></A>      <FONT ID="If">if</FONT> (Math.abs(difY) &gt; <FONT ID="IntegerLiteral">10</FONT>) {
<A NAME="1894"></A>        difY *= <FONT ID="IntegerLiteral">10</FONT>;
<A NAME="1895"></A>      } 
<A NAME="1896"></A>
<A NAME="1897"></A>      <FONT ID="If">if</FONT> ((lastCenter + difY) &lt;= <FONT ID="IntegerLiteral">4095</FONT>) {
<A NAME="1898"></A>        <FONT ID="If">if</FONT> ((lastCenter + difY) &gt;= <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="1899"></A>          pCenter.setValue(lastCenter + difY);
<A NAME="1900"></A>          lastCenter += difY;
<A NAME="1901"></A>        } 
<A NAME="1902"></A>      } 
<A NAME="1903"></A>
<A NAME="1904"></A>      <FONT ID="If">if</FONT> ((lastWindow + difX) &lt;= <FONT ID="IntegerLiteral">4096</FONT>) {
<A NAME="1905"></A>        <FONT ID="If">if</FONT> ((lastWindow + difX) &gt;= <FONT ID="IntegerLiteral">1</FONT>) {
<A NAME="1906"></A>          pWindow.setValue(lastWindow + difX);
<A NAME="1907"></A>          lastWindow += difX;
<A NAME="1908"></A>        } 
<A NAME="1909"></A>      } 
<A NAME="1910"></A>
<A NAME="1911"></A>      lastMouseClickX = curX;
<A NAME="1912"></A>      lastMouseClickY = curY;
<A NAME="1913"></A>      lastTime = curWhen;
<A NAME="1914"></A>
<A NAME="1915"></A>      <FONT ID="SingleLineComment">// Aktualisieren der Fensterung des selektierten Bildes
<A NAME="1916"></A></FONT>      updateCW();
<A NAME="1917"></A>
<A NAME="1918"></A>      <FONT ID="SingleLineComment">// Neuzeichnen des Canvasinhalts
<A NAME="1919"></A></FONT>      pCanvas.repaint();
<A NAME="1920"></A>    }   <FONT ID="SingleLineComment">// if (Mauszeiger als Tool selektiert)
<A NAME="1921"></A></FONT> 
<A NAME="1922"></A>    <FONT ID="If">if</FONT> (rbDistance.isSelected()) {
<A NAME="1923"></A>      pCanvas.setCursor(ZOOM_CURSOR);
<A NAME="1924"></A>
<A NAME="1925"></A>      <FONT ID="SingleLineComment">// Im folgenden wird die aktuelle Mausposition in der Canvas-Klasse gesetzt
<A NAME="1926"></A></FONT>      <FONT ID="If">if</FONT> (rb1Image.isSelected()) {
<A NAME="1927"></A>        pCanvas.setCurrentPos(e.getX(), e.getY());
<A NAME="1928"></A>      } <FONT ID="Else">else</FONT> {
<A NAME="1929"></A>        <FONT ID="Int">int</FONT> startImg = getImageMouseIsOn(lastMouseClickX, lastMouseClickY);
<A NAME="1930"></A>        <FONT ID="Int">int</FONT> actImg = getImageMouseIsOn(e.getX(), e.getY());
<A NAME="1931"></A>
<A NAME="1932"></A>        <FONT ID="SingleLineComment">// Die Position wird allerdings nur gesetzt, wenn man innerhalb eines Bildes bleibt
<A NAME="1933"></A></FONT>        <FONT ID="If">if</FONT> (startImg == actImg) {
<A NAME="1934"></A>          pCanvas.setCurrentPos(e.getX(), e.getY());
<A NAME="1935"></A>        } 
<A NAME="1936"></A>      } 
<A NAME="1937"></A>
<A NAME="1938"></A>      <FONT ID="SingleLineComment">// Neuzeichnen
<A NAME="1939"></A></FONT>      pCanvas.repaint();
<A NAME="1940"></A>    }   <FONT ID="SingleLineComment">// if (Distanzmessung als Tool selektiert)
<A NAME="1941"></A></FONT> 
<A NAME="1942"></A>    <FONT ID="If">if</FONT> (rbAngel.isSelected()) {
<A NAME="1943"></A>      pCanvas.setCursor(ZOOM_CURSOR);
<A NAME="1944"></A>
<A NAME="1945"></A>      <FONT ID="If">if</FONT> (rb1Image.isSelected()) {
<A NAME="1946"></A>        pCanvas.setCurrentPos(e.getX(), e.getY());
<A NAME="1947"></A>      } <FONT ID="Else">else</FONT> {
<A NAME="1948"></A>        <FONT ID="Int">int</FONT> startImg = getImageMouseIsOn(lastMouseClickX, lastMouseClickY);
<A NAME="1949"></A>        <FONT ID="Int">int</FONT> actImg = getImageMouseIsOn(e.getX(), e.getY());
<A NAME="1950"></A>
<A NAME="1951"></A>        <FONT ID="If">if</FONT> (startImg == actImg) {
<A NAME="1952"></A>          pCanvas.setCurrentPos(e.getX(), e.getY());
<A NAME="1953"></A>        } 
<A NAME="1954"></A>      }   <FONT ID="SingleLineComment">// if-else
<A NAME="1955"></A></FONT> 
<A NAME="1956"></A>      <FONT ID="SingleLineComment">// Neuzeichnen
<A NAME="1957"></A></FONT>      pCanvas.repaint();
<A NAME="1958"></A>    }     <FONT ID="SingleLineComment">// if (Winkelmessung als Tool selektiert)
<A NAME="1959"></A></FONT> 
<A NAME="1960"></A>  }       <FONT ID="SingleLineComment">// pCanvas_mouseDragged(MouseEvent e)
<A NAME="1961"></A></FONT> 
<A NAME="1962"></A>
<A NAME="1963"></A>  <FONT ID="FormalComment">/**
<A NAME="1964"></A>   * Die Methode wird aufgerufen, wenn die Aktion Hilfe | Info aus dem Menue
<A NAME="1965"></A>   * aufgerufen wurde. Das Informationsfenster wird aufgeblendet.
<A NAME="1966"></A>   */</FONT>
<A NAME="1967"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> helpAbout_actionPerformed() {
<A NAME="1968"></A>    <A HREF="../../virtual/tools/AboutBox.java.html">AboutBox</A>  abox = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/AboutBox.java.html">AboutBox</A>();
<A NAME="1969"></A>
<A NAME="1970"></A>    <FONT ID="SingleLineComment">// th 2002.10.29
<A NAME="1971"></A></FONT>    <FONT ID="SingleLineComment">// abox.setImage(this.getClass().getResource("resources/dv.jpg"));
<A NAME="1972"></A></FONT>    abox.setFileURL(<FONT ID="This">this</FONT>.getClass().getResource(<FONT ID="StringLiteral">"resources/splash_de.htm"</FONT>));
<A NAME="1973"></A>    Dimension ts = <FONT ID="This">this</FONT>.getSize();
<A NAME="1974"></A>    Dimension as = abox.getSize();
<A NAME="1975"></A>
<A NAME="1976"></A>    abox.setLocation((ts.width - as.width) / <FONT ID="IntegerLiteral">2</FONT> + getLocation().x, (ts.height - as.height) / <FONT ID="IntegerLiteral">2</FONT> + getLocation().y);
<A NAME="1977"></A>    abox.show();
<A NAME="1978"></A>  } 
<A NAME="1979"></A>
<A NAME="1980"></A>
<A NAME="1981"></A>  <FONT ID="FormalComment">/**
<A NAME="1982"></A>   * Die Method wird aufgerufen, wenn der Schliessen-Knopf oben rechts am Fenster
<A NAME="1983"></A>   * betaetigt wird. Die Methode muss ueberschrieben werden, damit das Programm bei
<A NAME="1984"></A>   * einem System-Close beendet werden kann.
<A NAME="1985"></A>   * @param e Das Ereignis beim Betaetigen des Schliessen-Knopfs.
<A NAME="1986"></A>   */</FONT>
<A NAME="1987"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> processWindowEvent(WindowEvent e) {
<A NAME="1988"></A>
<A NAME="1989"></A>    <FONT ID="SingleLineComment">// super.processWindowEvent(e);
<A NAME="1990"></A></FONT>    <FONT ID="If">if</FONT> (e.getID() == WindowEvent.WINDOW_CLOSING) {
<A NAME="1991"></A>      <FONT ID="This">this</FONT>.savePreferences();
<A NAME="1992"></A>
<A NAME="1993"></A>      <FONT ID="SingleLineComment">// Aufruf der gleichen Methode wie bei Aktion Datei | Beenden
<A NAME="1994"></A></FONT>      fileExit_actionPerformed();
<A NAME="1995"></A>    }   <FONT ID="SingleLineComment">// if
<A NAME="1996"></A></FONT>   }    <FONT ID="SingleLineComment">// processWindowEvent(WindowEvent e)
<A NAME="1997"></A></FONT> 
<A NAME="1998"></A>
<A NAME="1999"></A>  <FONT ID="FormalComment">/**
<A NAME="2000"></A>   * Die Methode aktualisiert die Center- und Window-Einstellung in der
<A NAME="2001"></A>   * selektierten ImagePlus-Klasse.
<A NAME="2002"></A>   */</FONT>
<A NAME="2003"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> updateCW() {
<A NAME="2004"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = <FONT ID="Null">null</FONT>;
<A NAME="2005"></A>
<A NAME="2006"></A>    <FONT ID="SingleLineComment">// Nachschauen, welches Bild selektiert ist
<A NAME="2007"></A></FONT>    ip = getSelectedImage();
<A NAME="2008"></A>
<A NAME="2009"></A>    <FONT ID="SingleLineComment">// Fenstereinstellung im Bild Speichern; dabei wird das neugefensterte
<A NAME="2010"></A></FONT>    <FONT ID="SingleLineComment">// Intensitaetsbild berechnet und dargestellt
<A NAME="2011"></A></FONT>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2012"></A>      <FONT ID="Try">try</FONT> {
<A NAME="2013"></A>        <FONT ID="Int">int</FONT> c = pCenter.getValue();
<A NAME="2014"></A>        <FONT ID="Int">int</FONT> w = pWindow.getValue();
<A NAME="2015"></A>
<A NAME="2016"></A>        ip.setCW(c, w);
<A NAME="2017"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {}
<A NAME="2018"></A>    } 
<A NAME="2019"></A>  }   <FONT ID="SingleLineComment">// Methode updateCW()
<A NAME="2020"></A></FONT> 
<A NAME="2021"></A>
<A NAME="2022"></A>  <FONT ID="FormalComment">/**
<A NAME="2023"></A>   * Die Methode aktualisiert die Center-Einstellung in der
<A NAME="2024"></A>   * selektierten ImagePlus-Klasse.
<A NAME="2025"></A>   */</FONT>
<A NAME="2026"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> updateCenter() {
<A NAME="2027"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = <FONT ID="Null">null</FONT>;
<A NAME="2028"></A>
<A NAME="2029"></A>    <FONT ID="SingleLineComment">// Nachschauen, welches Bild selektiert ist
<A NAME="2030"></A></FONT>    ip = getSelectedImage();
<A NAME="2031"></A>
<A NAME="2032"></A>    <FONT ID="SingleLineComment">// Fenstereinstellung im Bild Speichern; dabei wird das neugefensterte
<A NAME="2033"></A></FONT>    <FONT ID="SingleLineComment">// Intensitaetsbild berechnet und dargestellt
<A NAME="2034"></A></FONT>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2035"></A>      <FONT ID="Try">try</FONT> {
<A NAME="2036"></A>        <FONT ID="Int">int</FONT> c = pCenter.getValue();
<A NAME="2037"></A>
<A NAME="2038"></A>        ip.setCenter(c);
<A NAME="2039"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {}
<A NAME="2040"></A>    } 
<A NAME="2041"></A>  }   <FONT ID="SingleLineComment">// Methode updateCenter()
<A NAME="2042"></A></FONT> 
<A NAME="2043"></A>
<A NAME="2044"></A>  <FONT ID="FormalComment">/**
<A NAME="2045"></A>   * Die Methode aktualisiert die Window-Einstellung in der
<A NAME="2046"></A>   * selektierten ImagePlus-Klasse.
<A NAME="2047"></A>   */</FONT>
<A NAME="2048"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> updateWindow() {
<A NAME="2049"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = <FONT ID="Null">null</FONT>;
<A NAME="2050"></A>
<A NAME="2051"></A>    <FONT ID="SingleLineComment">// Nachschauen, welches Bild selektiert ist
<A NAME="2052"></A></FONT>    ip = getSelectedImage();
<A NAME="2053"></A>
<A NAME="2054"></A>    <FONT ID="SingleLineComment">// Fenstereinstellung im Bild Speichern; dabei wird das neugefensterte
<A NAME="2055"></A></FONT>    <FONT ID="SingleLineComment">// Intensitaetsbild berechnet und dargestellt
<A NAME="2056"></A></FONT>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2057"></A>      <FONT ID="Try">try</FONT> {
<A NAME="2058"></A>        <FONT ID="Int">int</FONT> w = pWindow.getValue();
<A NAME="2059"></A>
<A NAME="2060"></A>        ip.setWindow(w);
<A NAME="2061"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {}
<A NAME="2062"></A>    } 
<A NAME="2063"></A>  }   <FONT ID="SingleLineComment">// Methode updateWindow()
<A NAME="2064"></A></FONT> 
<A NAME="2065"></A>
<A NAME="2066"></A>  <FONT ID="FormalComment">/**
<A NAME="2067"></A>   * Die Methode blendet einen Dateiauswahldiaolg auf. Nach Auswahl einer Datei
<A NAME="2068"></A>   * aus der Liste, wird die Bildserie, die zu dem selektierten Bild gehoert
<A NAME="2069"></A>   * geladen und auf der Zeichenflaeche dargestellt.
<A NAME="2070"></A>   * @author Thomas Hacklaender
<A NAME="2071"></A>   * @version 2000.8.20
<A NAME="2072"></A>   */</FONT>
<A NAME="2073"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbLoad_actionPerformed() {
<A NAME="2074"></A>    <FONT ID="Int">int</FONT>             diaRes;
<A NAME="2075"></A>    GeneralImageIOD gi = <FONT ID="Null">null</FONT>;
<A NAME="2076"></A>    ImportData      imda;
<A NAME="2077"></A>    ImportPanel     imPan;
<A NAME="2078"></A>    InputStream     pfs;
<A NAME="2079"></A>    <A HREF="../../virtual/dv/SeriesLoader.java.html">SeriesLoader</A>    sLoader;
<A NAME="2080"></A>
<A NAME="2081"></A>    <FONT ID="SingleLineComment">// Datenblock zur Kommunikation zwischen Plugin und Dialogbox generieren
<A NAME="2082"></A></FONT>    imda = <FONT ID="New">new</FONT> ImportData();
<A NAME="2083"></A>
<A NAME="2084"></A>    <FONT ID="SingleLineComment">// Versucht einen Property File zu finden
<A NAME="2085"></A></FONT>    pfs = Util.getPropertyFileStream(<FONT ID="StringLiteral">""</FONT>);
<A NAME="2086"></A>    <FONT ID="If">if</FONT> (pfs != <FONT ID="Null">null</FONT>) {
<A NAME="2087"></A>      imda.getProperties(pfs);
<A NAME="2088"></A>    } 
<A NAME="2089"></A>
<A NAME="2090"></A>    <FONT ID="SingleLineComment">// ImportPanel mit zugehoeriger Datenstruktur generieren
<A NAME="2091"></A></FONT>    imPan = <FONT ID="New">new</FONT> ImportPanel();
<A NAME="2092"></A>    imPan.initWithDataBlock(imda);
<A NAME="2093"></A>    imPan.copyrightL.setText(<FONT ID="StringLiteral">"(C) 2000 T. Hacklaender unter der GPL Lizenz. Dcm Ver.: "</FONT> + DcmUID.DCM_VERSION);
<A NAME="2094"></A>
<A NAME="2095"></A>    <FONT ID="SingleLineComment">// Dialogbox zeigen
<A NAME="2096"></A></FONT>    diaRes = JOptionPane.showConfirmDialog(<FONT ID="Null">null</FONT>, imPan, <FONT ID="StringLiteral">"DICOM Dateien einlesen"</FONT>, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, <FONT ID="Null">null</FONT>);
<A NAME="2097"></A>    <FONT ID="If">if</FONT> (diaRes != JOptionPane.OK_OPTION) {
<A NAME="2098"></A>
<A NAME="2099"></A>      <FONT ID="SingleLineComment">// "Cancel" gedrueckt
<A NAME="2100"></A></FONT>      <FONT ID="Return">return</FONT>;
<A NAME="2101"></A>    } 
<A NAME="2102"></A>
<A NAME="2103"></A>    imPan.updateDataBlock();
<A NAME="2104"></A>
<A NAME="2105"></A>    gi = imda.theGI;
<A NAME="2106"></A>    <FONT ID="If">if</FONT> (gi == <FONT ID="Null">null</FONT>) {
<A NAME="2107"></A>
<A NAME="2108"></A>      <FONT ID="SingleLineComment">// Kein DICOM Bild ausgwaehlt
<A NAME="2109"></A></FONT>      <FONT ID="Return">return</FONT>;
<A NAME="2110"></A>    } 
<A NAME="2111"></A>
<A NAME="2112"></A>    <FONT ID="SingleLineComment">// Bilder in eigenem Thread laden
<A NAME="2113"></A></FONT>    sLoader = <FONT ID="New">new</FONT> <A HREF="../../virtual/dv/SeriesLoader.java.html">SeriesLoader</A>(<FONT ID="This">this</FONT>, gi, imda);
<A NAME="2114"></A>    sLoader.start();
<A NAME="2115"></A>  } 
<A NAME="2116"></A>
<A NAME="2117"></A>
<A NAME="2118"></A>  <FONT ID="FormalComment">/**
<A NAME="2119"></A>   * Die Methode wird aufgerufen, wenn der 'Speichern'-Knopf gedrueckt wurde oder
<A NAME="2120"></A>   * die Aktion Datei | Speichern aufgerufen wurde.
<A NAME="2121"></A>   * @author Thomas Hacklaender
<A NAME="2122"></A>   * @version 2000.8.20
<A NAME="2123"></A>   */</FONT>
<A NAME="2124"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbSave_actionPerformed() {
<A NAME="2125"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A>           currentImage;
<A NAME="2126"></A>    <FONT ID="Short">short</FONT>[]             dcmPixels;
<A NAME="2127"></A>    DcmDataObject       ddo;
<A NAME="2128"></A>    <FONT ID="Int">int</FONT>                 diaRes;
<A NAME="2129"></A>    ExportData          exda;
<A NAME="2130"></A>    ExportPanel         exPan;
<A NAME="2131"></A>    File                f;
<A NAME="2132"></A>    InputStream         pfs;
<A NAME="2133"></A>    String              pn;
<A NAME="2134"></A>    SecondaryCaptureIOD scIOD;
<A NAME="2135"></A>    <FONT ID="Int">int</FONT>                 size;
<A NAME="2136"></A>
<A NAME="2137"></A>    scIOD = <FONT ID="New">new</FONT> SecondaryCaptureIOD();
<A NAME="2138"></A>
<A NAME="2139"></A>    currentImage = getSelectedImage();
<A NAME="2140"></A>
<A NAME="2141"></A>    <FONT ID="SingleLineComment">// Setzen des DcmDataObject mit den Zusatzinformationen
<A NAME="2142"></A></FONT>    scIOD.setPublicFields(currentImage.getDDO());
<A NAME="2143"></A>
<A NAME="2144"></A>    <FONT ID="SingleLineComment">// Besorgen der Pixeldaten und setzen in einem DcmSecondCaptFile-Object
<A NAME="2145"></A></FONT>    dcmPixels = currentImage.getImage12BitShort();
<A NAME="2146"></A>    size = (<FONT ID="Int">int</FONT>) (Math.sqrt(dcmPixels.length) + <FONT ID="FloatPointLiteral">0.5</FONT>);
<A NAME="2147"></A>    scIOD.set16UBitGrayImage(dcmPixels, size, size, <FONT ID="IntegerLiteral">15</FONT>);
<A NAME="2148"></A>    scIOD.setVOILUTModule(currentImage.getCenter(), currentImage.getWindow());
<A NAME="2149"></A>
<A NAME="2150"></A>    <FONT ID="SingleLineComment">// Datenblockzur Kommunikation zwischen Plugin und Dialogbox generieren
<A NAME="2151"></A></FONT>    exda = <FONT ID="New">new</FONT> ExportData();
<A NAME="2152"></A>
<A NAME="2153"></A>    <FONT ID="SingleLineComment">// SecondaryCaptureIOD eintragen
<A NAME="2154"></A></FONT>    exda.theSC = scIOD;
<A NAME="2155"></A>
<A NAME="2156"></A>    <FONT ID="SingleLineComment">// Versucht einen Property File zu finden
<A NAME="2157"></A></FONT>    pfs = Util.getPropertyFileStream(<FONT ID="StringLiteral">""</FONT>);
<A NAME="2158"></A>    <FONT ID="If">if</FONT> (pfs != <FONT ID="Null">null</FONT>) {
<A NAME="2159"></A>      exda.getProperties(pfs);
<A NAME="2160"></A>    } 
<A NAME="2161"></A>
<A NAME="2162"></A>    <FONT ID="SingleLineComment">// Export Panel darstellen
<A NAME="2163"></A></FONT>    exPan = <FONT ID="New">new</FONT> ExportPanel();
<A NAME="2164"></A>    exPan.initWithDataBlock(exda);
<A NAME="2165"></A>    exPan.copyrightL.setText(<FONT ID="StringLiteral">"(C) 2000 T. Hacklaender unter der GPL Lizenz. Dcm Ver.: "</FONT> + DcmUID.DCM_VERSION);
<A NAME="2166"></A>
<A NAME="2167"></A>    <FONT ID="SingleLineComment">// Dialogbox zeigen
<A NAME="2168"></A></FONT>    diaRes = JOptionPane.showConfirmDialog(<FONT ID="Null">null</FONT>, exPan, <FONT ID="StringLiteral">"Als DICOM Secondary Capture Datei speichern"</FONT>, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, <FONT ID="Null">null</FONT>);
<A NAME="2169"></A>    <FONT ID="If">if</FONT> (diaRes != JOptionPane.OK_OPTION) {
<A NAME="2170"></A>
<A NAME="2171"></A>      <FONT ID="SingleLineComment">// "Cancel" gedrueckt
<A NAME="2172"></A></FONT>      <FONT ID="Return">return</FONT>;
<A NAME="2173"></A>    } 
<A NAME="2174"></A>    exPan.updateDataBlock();
<A NAME="2175"></A>
<A NAME="2176"></A>    <FONT ID="SingleLineComment">// erzeugt ein neues DcmDataObject mit der gewuenschten Transfersyntax
<A NAME="2177"></A></FONT>    ddo = exda.theSC.getDDO(exda.encoding, exda.structure, exda.storage);
<A NAME="2178"></A>
<A NAME="2179"></A>    <FONT ID="SingleLineComment">// Speichert die Datei
<A NAME="2180"></A></FONT>    <FONT ID="Try">try</FONT> {
<A NAME="2181"></A>
<A NAME="2182"></A>      <FONT ID="SingleLineComment">// Generiert den vollstaendigen Pfad
<A NAME="2183"></A></FONT>      pn = exda.outputDir.getPath() + File.separator + exda.fileNameToSave + exda.fileNameSuffix;
<A NAME="2184"></A>      f = <FONT ID="New">new</FONT> File(pn);
<A NAME="2185"></A>      DcmOutputStream.saveDDO(ddo, f);
<A NAME="2186"></A>    } <FONT ID="Catch">catch</FONT> (Exception ex) {
<A NAME="2187"></A>      ex.printStackTrace();
<A NAME="2188"></A>    } 
<A NAME="2189"></A>
<A NAME="2190"></A>  } 
<A NAME="2191"></A>
<A NAME="2192"></A>
<A NAME="2193"></A>  <FONT ID="FormalComment">/**
<A NAME="2194"></A>   * Die Methode wird aufgerufen, wenn der 'Drucken'-Knopf gedrueckt wurde oder
<A NAME="2195"></A>   * die Aktion Datei | Drucken aufgerufen wurde. Der Systemabhaengige
<A NAME="2196"></A>   * Druckdialog wird aufgeblendet. Nach dessen Bestaetigung wird der
<A NAME="2197"></A>   * Inhalt der Zeichenflaeche auf dem ausgewaehlten Drucker ausgegeben.
<A NAME="2198"></A>   */</FONT>
<A NAME="2199"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbPrint_actionPerformed() {
<A NAME="2200"></A>
<A NAME="2201"></A>    <FONT ID="SingleLineComment">// Erzeugen eines Printjobs
<A NAME="2202"></A></FONT>    PrintJob  pj = <FONT ID="This">this</FONT>.getToolkit().getPrintJob(<FONT ID="This">this</FONT>, <FONT ID="StringLiteral">"Print MRT"</FONT>, <FONT ID="Null">null</FONT>);
<A NAME="2203"></A>
<A NAME="2204"></A>    <FONT ID="If">if</FONT> (pj != <FONT ID="Null">null</FONT>) {
<A NAME="2205"></A>
<A NAME="2206"></A>      <FONT ID="SingleLineComment">// Den Graphikkontext des Printjobs besorgen
<A NAME="2207"></A></FONT>      Graphics  gc = pj.getGraphics();
<A NAME="2208"></A>
<A NAME="2209"></A>      <FONT ID="SingleLineComment">// Der Drucker-Grafikkontext wird an die paint-Methode des Canvas
<A NAME="2210"></A></FONT>      <FONT ID="SingleLineComment">// uebergeben. Damit druckt die Paint-Methode auf dem Drucker statt
<A NAME="2211"></A></FONT>      <FONT ID="SingleLineComment">// auf dem Bildschirn
<A NAME="2212"></A></FONT>      pCanvas.paint(gc);
<A NAME="2213"></A>
<A NAME="2214"></A>      <FONT ID="SingleLineComment">// Nach dem Drucken den Grafikkontext freigeben und den Printjob beenden
<A NAME="2215"></A></FONT>      gc.dispose();
<A NAME="2216"></A>      pj.end();
<A NAME="2217"></A>    }   <FONT ID="SingleLineComment">// if
<A NAME="2218"></A></FONT>   }    <FONT ID="SingleLineComment">// Methode pbPrint_actionPerformed()
<A NAME="2219"></A></FONT> 
<A NAME="2220"></A>
<A NAME="2221"></A>  <FONT ID="FormalComment">/**
<A NAME="2222"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum Loeschen des selktierten
<A NAME="2223"></A>   * Bildes gedrueckt wurde. Es wird zunaecht ein Dialog aufgeblendet, der eine
<A NAME="2224"></A>   * Sicherheitsabfrage darstellt und nach dessen Bestaetigung wird das
<A NAME="2225"></A>   * selektierte Bild geloescht.
<A NAME="2226"></A>   */</FONT>
<A NAME="2227"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbDelete_actionPerformed() {
<A NAME="2228"></A>    editClear_actionPerformed();
<A NAME="2229"></A>  } 
<A NAME="2230"></A>
<A NAME="2231"></A>
<A NAME="2232"></A>  <FONT ID="FormalComment">/**
<A NAME="2233"></A>   * Die Methode wird aufgerufen, wenn der 'Referenzserie'-Knopf gedrueckt wurde.
<A NAME="2234"></A>   */</FONT>
<A NAME="2235"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbReferenceData_actionPerformed() {
<A NAME="2236"></A>    createReferenceSeries();
<A NAME="2237"></A>  } 
<A NAME="2238"></A>
<A NAME="2239"></A>
<A NAME="2240"></A>  <FONT ID="FormalComment">/**
<A NAME="2241"></A>   * Die Methode fuehrt verschiedene Funktionen aus, je nachdem welches Werkzeug
<A NAME="2242"></A>   * ausgewaehlt wurde. In jedem Fall wird die Position des Mauszeiger auf
<A NAME="2243"></A>   * der Zeichenflaeche in der Positionsanzeige ausgegeben.
<A NAME="2244"></A>   * Ist ein anderes Werkzeug ausser dem Standard-Mauszeiger aktiviert (z.B. Lupe),
<A NAME="2245"></A>   * so wird der Inhalt der Zeichenflaeche staendig neu gezeichnet. Was genau
<A NAME="2246"></A>   * gezeichnet wird, wird in der paint-Methode der Zeichenflaeche festgelegt.
<A NAME="2247"></A>   * @param e Das Ereignis beim Bewegen der Maus ueber die Zeichenflaeche.
<A NAME="2248"></A>   */</FONT>
<A NAME="2249"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pCanvas_mouseMoved(MouseEvent e) {
<A NAME="2250"></A>
<A NAME="2251"></A>    <FONT ID="SingleLineComment">// Bestimmen der Position auf dem Canvas
<A NAME="2252"></A></FONT>    <FONT ID="Int">int</FONT>     x, y, img_x, img_y;
<A NAME="2253"></A>    <FONT ID="Int">int</FONT>     small = <FONT ID="IntegerLiteral">2</FONT>;  <FONT ID="SingleLineComment">// kleines Bild ist 1, grosses 2 (weil um Faktor 2 Groesser);
<A NAME="2254"></A></FONT>    String  bild = <FONT ID="New">new</FONT> String();
<A NAME="2255"></A>
<A NAME="2256"></A>    curr_x = x = e.getX();
<A NAME="2257"></A>    curr_y = y = e.getY();
<A NAME="2258"></A>    img_x = x / <FONT ID="IntegerLiteral">2</FONT>;
<A NAME="2259"></A>    img_y = y / <FONT ID="IntegerLiteral">2</FONT>;
<A NAME="2260"></A>    bild = <FONT ID="StringLiteral">"(Bild1)"</FONT>;
<A NAME="2261"></A>    <FONT ID="If">if</FONT> (rb4Images.isSelected()) {
<A NAME="2262"></A>      small = <FONT ID="IntegerLiteral">1</FONT>;
<A NAME="2263"></A>      <FONT ID="Int">int</FONT> bildnr = <FONT ID="IntegerLiteral">1</FONT> + <FONT ID="IntegerLiteral">2</FONT> * (y / <FONT ID="IntegerLiteral">256</FONT>) + (x / <FONT ID="IntegerLiteral">256</FONT>);
<A NAME="2264"></A>
<A NAME="2265"></A>      bild = <FONT ID="StringLiteral">"(Bild "</FONT> + bildnr + <FONT ID="StringLiteral">")"</FONT>;
<A NAME="2266"></A>      <FONT ID="Switch">switch</FONT> (bildnr) {
<A NAME="2267"></A>      <FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">1</FONT>: {
<A NAME="2268"></A>        <FONT ID="Break">break</FONT>;
<A NAME="2269"></A>      } 
<A NAME="2270"></A>      <FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">2</FONT>: {
<A NAME="2271"></A>        x = x - <FONT ID="IntegerLiteral">256</FONT>;
<A NAME="2272"></A>        <FONT ID="Break">break</FONT>;
<A NAME="2273"></A>      } 
<A NAME="2274"></A>      <FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">3</FONT>: {
<A NAME="2275"></A>        y = y - <FONT ID="IntegerLiteral">256</FONT>;
<A NAME="2276"></A>        <FONT ID="Break">break</FONT>;
<A NAME="2277"></A>      } 
<A NAME="2278"></A>      <FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">4</FONT>: {
<A NAME="2279"></A>        x = x - <FONT ID="IntegerLiteral">256</FONT>;
<A NAME="2280"></A>        y = y - <FONT ID="IntegerLiteral">256</FONT>;
<A NAME="2281"></A>        <FONT ID="Break">break</FONT>;
<A NAME="2282"></A>      } 
<A NAME="2283"></A>      }
<A NAME="2284"></A>      img_x = x;
<A NAME="2285"></A>      img_y = y;
<A NAME="2286"></A>    } 
<A NAME="2287"></A>
<A NAME="2288"></A>    <FONT ID="SingleLineComment">// Ausgeben der Mausposition
<A NAME="2289"></A></FONT>    lPosition.setText(<FONT ID="StringLiteral">""</FONT> + x + <FONT ID="StringLiteral">" ; "</FONT> + y + <FONT ID="StringLiteral">" "</FONT>);
<A NAME="2290"></A>
<A NAME="2291"></A>    <FONT ID="SingleLineComment">// Wenn die Zommfunktion aktiviert ist, muss das Canvas staendig neu
<A NAME="2292"></A></FONT>    <FONT ID="SingleLineComment">// gezeichnet werden
<A NAME="2293"></A></FONT>    <FONT ID="If">if</FONT> (rbZoom.isSelected()) {
<A NAME="2294"></A>
<A NAME="2295"></A>      <FONT ID="SingleLineComment">// Ausmasse des zu vergroessernden Ausschnitts
<A NAME="2296"></A></FONT>      <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> part_x = <FONT ID="IntegerLiteral">32</FONT>;
<A NAME="2297"></A>      <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> part_y = <FONT ID="IntegerLiteral">32</FONT>;
<A NAME="2298"></A>
<A NAME="2299"></A>      <FONT ID="SingleLineComment">// Kontextsensitiven Cursor verwenden
<A NAME="2300"></A></FONT>      pCanvas.setCursor(ZOOM_CURSOR);
<A NAME="2301"></A>
<A NAME="2302"></A>      <FONT ID="SingleLineComment">// Besorgen des Bildes, ueber dem sich der Mauszeiger befindet
<A NAME="2303"></A></FONT>      <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  is = pCanvas.getImageStack();
<A NAME="2304"></A>      <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A>   ip = <FONT ID="Null">null</FONT>;
<A NAME="2305"></A>      <FONT ID="Int">int</FONT>         mouseImage = getImageMouseIsOn(curr_x, curr_y);
<A NAME="2306"></A>
<A NAME="2307"></A>      ip = is.getPictureAtPos(mouseImage);
<A NAME="2308"></A>
<A NAME="2309"></A>      <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2310"></A>
<A NAME="2311"></A>        <FONT ID="SingleLineComment">// Auslesen des Teilbildes, das vergroessert werden soll
<A NAME="2312"></A></FONT>        <A HREF="../../jigl/image/RealGrayImage.java.html">Image</A> myImagePart = ip.getImagePart(img_x - ((part_x / <FONT ID="IntegerLiteral">2</FONT>) / small), img_y - ((part_y / <FONT ID="IntegerLiteral">2</FONT>) / small), part_x / small, part_y / small);
<A NAME="2313"></A>
<A NAME="2314"></A>        <FONT ID="SingleLineComment">// Vergroessern des zu zoomenden Teilbildes
<A NAME="2315"></A></FONT>        <A HREF="../../jigl/image/RealGrayImage.java.html">Image</A> myZoomImage = myImagePart.getScaledInstance(part_x * <FONT ID="IntegerLiteral">2</FONT>, part_y * <FONT ID="IntegerLiteral">2</FONT>, Image.SCALE_DEFAULT);
<A NAME="2316"></A>
<A NAME="2317"></A>        <FONT ID="SingleLineComment">// Vergroesserten Ausschnitt und dessen Position in der Canvas-klasse setzen
<A NAME="2318"></A></FONT>        pCanvas.setZoomImage(myZoomImage);
<A NAME="2319"></A>        pCanvas.setZoomPos(curr_x - part_x, curr_y - part_x);
<A NAME="2320"></A>      } <FONT ID="Else">else</FONT> {
<A NAME="2321"></A>        pCanvas.setZoomImage(<FONT ID="Null">null</FONT>);
<A NAME="2322"></A>      } 
<A NAME="2323"></A>
<A NAME="2324"></A>      <FONT ID="SingleLineComment">// Neuzeichnen
<A NAME="2325"></A></FONT>      pCanvas.repaint();
<A NAME="2326"></A>
<A NAME="2327"></A>    }   <FONT ID="SingleLineComment">// if (Zoom)
<A NAME="2328"></A></FONT> 
<A NAME="2329"></A>    <FONT ID="SingleLineComment">// Grauwerterfassung selektiert
<A NAME="2330"></A></FONT>    <FONT ID="If">if</FONT> (rbGrayValue.isSelected()) {
<A NAME="2331"></A>
<A NAME="2332"></A>      <FONT ID="SingleLineComment">// Besorgen des Bildes, ueber dem sich die Maus befindet
<A NAME="2333"></A></FONT>      <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  is = pCanvas.getImageStack();
<A NAME="2334"></A>      <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A>   ip = <FONT ID="Null">null</FONT>;
<A NAME="2335"></A>      <FONT ID="Int">int</FONT>         mouseImage = getImageMouseIsOn(curr_x, curr_y);
<A NAME="2336"></A>
<A NAME="2337"></A>      ip = is.getPictureAtPos(mouseImage);
<A NAME="2338"></A>
<A NAME="2339"></A>      <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2340"></A>
<A NAME="2341"></A>        <FONT ID="SingleLineComment">// Kontextsensitiven Cursor verwende
<A NAME="2342"></A></FONT>        pCanvas.setCursor(ZOOM_CURSOR);
<A NAME="2343"></A>
<A NAME="2344"></A>        <FONT ID="SingleLineComment">// Mausposition und Grauwert in der canvas-Klasse setzen
<A NAME="2345"></A></FONT>        pCanvas.setCurrentPos(curr_x, curr_y);
<A NAME="2346"></A>        pCanvas.setGrayValue(ip.getGrayValue(img_x, img_y));
<A NAME="2347"></A>      } 
<A NAME="2348"></A>
<A NAME="2349"></A>      <FONT ID="SingleLineComment">// Neuzeichnen
<A NAME="2350"></A></FONT>      pCanvas.repaint();
<A NAME="2351"></A>    }   <FONT ID="SingleLineComment">// if (Grauwertbestimmung)
<A NAME="2352"></A></FONT> 
<A NAME="2353"></A>    <FONT ID="SingleLineComment">// Winkelmessung selektiert
<A NAME="2354"></A></FONT>    <FONT ID="If">if</FONT> (rbAngel.isSelected()) {
<A NAME="2355"></A>
<A NAME="2356"></A>      <FONT ID="SingleLineComment">// Mauspositon in Canvas-Klasse setzen
<A NAME="2357"></A></FONT>      <FONT ID="If">if</FONT> (rb1Image.isSelected()) {
<A NAME="2358"></A>        pCanvas.setCurrentPos(e.getX(), e.getY());
<A NAME="2359"></A>      } <FONT ID="Else">else</FONT> {
<A NAME="2360"></A>
<A NAME="2361"></A>        <FONT ID="SingleLineComment">// Im Fall von 4 angezeigten Bildern, wird die Positionn nur gesetzt, wenn
<A NAME="2362"></A></FONT>        <FONT ID="SingleLineComment">// man sich noch ueber dem Bild befindet, ueber dem man die Bewegung
<A NAME="2363"></A></FONT>        <FONT ID="SingleLineComment">// angefangen hat. Dadurch wird die Winkelmessung ueber den Bildrand
<A NAME="2364"></A></FONT>        <FONT ID="SingleLineComment">// hinaus vermieden.
<A NAME="2365"></A></FONT>        <FONT ID="Int">int</FONT> startImg = getImageMouseIsOn(lastMouseClickX, lastMouseClickY);
<A NAME="2366"></A>        <FONT ID="Int">int</FONT> actImg = getImageMouseIsOn(e.getX(), e.getY());
<A NAME="2367"></A>
<A NAME="2368"></A>        <FONT ID="If">if</FONT> (startImg == actImg) {
<A NAME="2369"></A>          pCanvas.setCurrentPos(e.getX(), e.getY());
<A NAME="2370"></A>        } 
<A NAME="2371"></A>      }   <FONT ID="SingleLineComment">// if-else
<A NAME="2372"></A></FONT>       pCanvas.repaint();
<A NAME="2373"></A>    }     <FONT ID="SingleLineComment">// if (Winkelmessung als Tool selektiert)
<A NAME="2374"></A></FONT> 
<A NAME="2375"></A>  }       <FONT ID="SingleLineComment">// Methode
<A NAME="2376"></A></FONT> 
<A NAME="2377"></A>
<A NAME="2378"></A>  <FONT ID="FormalComment">/**
<A NAME="2379"></A>   * Die Methode wird aufgerufen, wenn der Mauszeiger die Zeichenflaeche
<A NAME="2380"></A>   * verlaesst. Die Positionsanzeige wird dann geloescht und ein Standardmauszeiger
<A NAME="2381"></A>   * eingestellt. Ausserdem werden einige Ausnahmewerte fuer die Grauwert-,
<A NAME="2382"></A>   * Distanz- und Winkelmessung gesetzt.
<A NAME="2383"></A>   */</FONT>
<A NAME="2384"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pCanvas_mouseExited() {
<A NAME="2385"></A>    lPosition.setText(<FONT ID="StringLiteral">""</FONT>);
<A NAME="2386"></A>    pCanvas.setZoomImage(<FONT ID="Null">null</FONT>);
<A NAME="2387"></A>    pCanvas.setGrayValue(-<FONT ID="IntegerLiteral">1</FONT>);
<A NAME="2388"></A>    pCanvas.setCurrentPos(-<FONT ID="IntegerLiteral">1</FONT>, -<FONT ID="IntegerLiteral">1</FONT>);
<A NAME="2389"></A>    pCanvas.setLastClickPos(-<FONT ID="IntegerLiteral">1</FONT>, -<FONT ID="IntegerLiteral">1</FONT>);
<A NAME="2390"></A>    pCanvas.setReleasePos(-<FONT ID="IntegerLiteral">1</FONT>, -<FONT ID="IntegerLiteral">1</FONT>);
<A NAME="2391"></A>    pCanvas.setCursor(DEFAULT_CURSOR);
<A NAME="2392"></A>    pCanvas.repaint();
<A NAME="2393"></A>  }   <FONT ID="SingleLineComment">// Methode pCanvas_mouseExited()
<A NAME="2394"></A></FONT> 
<A NAME="2395"></A>
<A NAME="2396"></A>  <FONT ID="FormalComment">/**
<A NAME="2397"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur gleichzeitigen Anzeige von
<A NAME="2398"></A>   * 4 Bildern gedrueckt wurde. Der Inhalt der Zeichenflaeche wird dann neu
<A NAME="2399"></A>   * aufgebaut.
<A NAME="2400"></A>   */</FONT>
<A NAME="2401"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> rb4Images_actionPerformed() {
<A NAME="2402"></A>    pCanvas.setFourImages();
<A NAME="2403"></A>    pCanvas.repaint();
<A NAME="2404"></A>  }   <FONT ID="SingleLineComment">// Methode rb4Images_actionPerformed()
<A NAME="2405"></A></FONT> 
<A NAME="2406"></A>
<A NAME="2407"></A>  <FONT ID="FormalComment">/**
<A NAME="2408"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur Anzeige von nur einem
<A NAME="2409"></A>   * Bild gedrueckt wurde. Der Inhalt der Zeichenflaeche wird dann neu aufgebaut.
<A NAME="2410"></A>   */</FONT>
<A NAME="2411"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> rb1Image_actionPerformed() {
<A NAME="2412"></A>    pCanvas.setOneImage();
<A NAME="2413"></A>    pCanvas.repaint();
<A NAME="2414"></A>  }   <FONT ID="SingleLineComment">// Methode rb1Image_actionPerformed()
<A NAME="2415"></A></FONT> 
<A NAME="2416"></A>
<A NAME="2417"></A>  <FONT ID="FormalComment">/**
<A NAME="2418"></A>   * Die Methode wird aufgerufen, wenn eine Maustaste gedrueckt wird, waehrend
<A NAME="2419"></A>   * sich der Mauszeiger ueber der Zeichenflaeche befindet. In diesem Fall werden
<A NAME="2420"></A>   * die Mausklickkoordinaten abgespeichert und die Fensterungswerte des zuletzt
<A NAME="2421"></A>   * selektierten Bildes gesichert.
<A NAME="2422"></A>   */</FONT>
<A NAME="2423"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pCanvas_mousePressed(MouseEvent e) {
<A NAME="2424"></A>
<A NAME="2425"></A>    <FONT ID="SingleLineComment">// Setzen der Mausklickkoordinaten in Klassenvariablen
<A NAME="2426"></A></FONT>    lastMouseClickX = e.getX();
<A NAME="2427"></A>    lastMouseClickY = e.getY();
<A NAME="2428"></A>
<A NAME="2429"></A>    <FONT ID="If">if</FONT> (rbPointer.isSelected()) {
<A NAME="2430"></A>
<A NAME="2431"></A>      <FONT ID="SingleLineComment">// Setzen der Center- und Window-Einstellungen (benoetigt fuer die Fensterung)
<A NAME="2432"></A></FONT>      lastCenter = pCenter.getValue();
<A NAME="2433"></A>      lastWindow = pWindow.getValue();
<A NAME="2434"></A>      lastTime = e.getWhen();
<A NAME="2435"></A>    }   <FONT ID="SingleLineComment">// if (Mauszeiger als Tool selektiert)
<A NAME="2436"></A></FONT> 
<A NAME="2437"></A>    <FONT ID="If">if</FONT> (rbDistance.isSelected()) {
<A NAME="2438"></A>
<A NAME="2439"></A>      <FONT ID="SingleLineComment">// Setzen der Mausklickkoordinaten in Canvas-Klasse
<A NAME="2440"></A></FONT>      pCanvas.setLastClickPos(lastMouseClickX, lastMouseClickY);
<A NAME="2441"></A>    }   <FONT ID="SingleLineComment">// if (Distanzmessung als Tool selektiert)
<A NAME="2442"></A></FONT> 
<A NAME="2443"></A>    <FONT ID="If">if</FONT> (rbAngel.isSelected()) {
<A NAME="2444"></A>
<A NAME="2445"></A>      <FONT ID="SingleLineComment">// Setzen der Mausklickkoordinaten in Canvas-Klasse
<A NAME="2446"></A></FONT>      pCanvas.setLastClickPos(lastMouseClickX, lastMouseClickY);
<A NAME="2447"></A>    }   <FONT ID="SingleLineComment">// if (Winkelmessung als Tool selektiert)
<A NAME="2448"></A></FONT> 
<A NAME="2449"></A>  }     <FONT ID="SingleLineComment">// Methode pCanvas_mousePressed(MouseEvent e)
<A NAME="2450"></A></FONT> 
<A NAME="2451"></A>
<A NAME="2452"></A>  <FONT ID="FormalComment">/**
<A NAME="2453"></A>   * Die Methode wird aufgerufen, wenn eine Maustaste losgelassen wird, waehrend
<A NAME="2454"></A>   * sich der Mauszeiger ueber der Zeichenflaeche befindet. Die Mauskoordinaten
<A NAME="2455"></A>   * werden dann gesichert. Dies wird fuer die Winkelmessung benoetigt.
<A NAME="2456"></A>   */</FONT>
<A NAME="2457"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pCanvas_mouseReleased(MouseEvent e) {
<A NAME="2458"></A>
<A NAME="2459"></A>    <FONT ID="SingleLineComment">// Standardcursor
<A NAME="2460"></A></FONT>    pCanvas.setCursor(DEFAULT_CURSOR);
<A NAME="2461"></A>
<A NAME="2462"></A>    <FONT ID="If">if</FONT> (rbAngel.isSelected()) {
<A NAME="2463"></A>
<A NAME="2464"></A>      <FONT ID="SingleLineComment">// Setzen der Mausrleasekoordinaten in Canvas-Klasse
<A NAME="2465"></A></FONT>      pCanvas.setReleasePos(e.getX(), e.getY());
<A NAME="2466"></A>    }   <FONT ID="SingleLineComment">// if (Winkelmessung als Tool selektiert)
<A NAME="2467"></A></FONT> 
<A NAME="2468"></A>  }     <FONT ID="SingleLineComment">// Methode pCanvas_mouseReleased(MouseEvent e)
<A NAME="2469"></A></FONT> 
<A NAME="2470"></A>
<A NAME="2471"></A>  <FONT ID="FormalComment">/**
<A NAME="2472"></A>   * Die Methode wird aufgerufen, wenn in der Zeichenflaeche ein Mausknopf
<A NAME="2473"></A>   * gedrueckt wird. Es werden dann je nach ausgewaehltem Werkzeug verschiedene
<A NAME="2474"></A>   * Funktionen durchgefuehrt. In jedem Fall werden die Fensterungseinstellungen des
<A NAME="2475"></A>   * bisher selektierten Bildes gesichert. Beim neu selektierten Bild werden
<A NAME="2476"></A>   * die alten Fenstereinstellungen wiederhergestellt.
<A NAME="2477"></A>   * Anschliessend wird der Inhalt der Zeichenflaeche aktualisiert. Was genau
<A NAME="2478"></A>   * dabei passiert, ist in der paint-Methode der Zeichenflaeche festgelegt.
<A NAME="2479"></A>   * @param e Das Ereignis beim Druecken einer Maustaste ueber der Zeichenflaeche.
<A NAME="2480"></A>   */</FONT>
<A NAME="2481"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pCanvas_mouseClicked(MouseEvent e) {
<A NAME="2482"></A>
<A NAME="2483"></A>    <FONT ID="SingleLineComment">// Nachschauen, welches Bild selektiert war
<A NAME="2484"></A></FONT>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = <FONT ID="Null">null</FONT>;
<A NAME="2485"></A>
<A NAME="2486"></A>    <FONT ID="SingleLineComment">// Besorgen des Bildes, ueber dem sich gerade der Mauszeiger befindet
<A NAME="2487"></A></FONT>    <FONT ID="Int">int</FONT>       actImage = getImageMouseIsOn(e.getX(), e.getY());
<A NAME="2488"></A>
<A NAME="2489"></A>    <FONT ID="SingleLineComment">// ausgewaehltes Bild als selektiert markieren
<A NAME="2490"></A></FONT>    pCanvas.setActiveImage(actImage);
<A NAME="2491"></A>
<A NAME="2492"></A>    <FONT ID="SingleLineComment">// Wiederherstellen der Fenstereinstellungen des neu selektierten Bildes
<A NAME="2493"></A></FONT>    ip = pCanvas.getImageStack().getPictureAtPos(actImage);
<A NAME="2494"></A>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2495"></A>      <FONT ID="Int">int</FONT> newc = ip.getCenter();
<A NAME="2496"></A>      <FONT ID="Int">int</FONT> neww = ip.getWindow();
<A NAME="2497"></A>
<A NAME="2498"></A>      pCenter.setValue(newc);
<A NAME="2499"></A>      pWindow.setValue(neww);
<A NAME="2500"></A>    } 
<A NAME="2501"></A>
<A NAME="2502"></A>    <FONT ID="SingleLineComment">// Aktualisierung der Zeichenflaeche
<A NAME="2503"></A></FONT>    pCanvas.repaint();
<A NAME="2504"></A>  }   <FONT ID="SingleLineComment">// Methode pCanvas_mouseClicked(MouseEvent e)
<A NAME="2505"></A></FONT> 
<A NAME="2506"></A>
<A NAME="2507"></A>  <FONT ID="FormalComment">/**
<A NAME="2508"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum Ein- bzw. Ausschalten  der
<A NAME="2509"></A>   * Bildbeschriftung gedrueckt wird. Der Inhalt der Zeichenflaeche wird dann
<A NAME="2510"></A>   * neu aufgebaut, entweder mit oder ohne Beschriftungen.
<A NAME="2511"></A>   */</FONT>
<A NAME="2512"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> tbImageText_mouseClicked() {
<A NAME="2513"></A>    pCanvas.repaint();
<A NAME="2514"></A>  }   <FONT ID="SingleLineComment">// Methode tbImageText_mouseClicked()
<A NAME="2515"></A></FONT> 
<A NAME="2516"></A>
<A NAME="2517"></A>  <FONT ID="FormalComment">/**
<A NAME="2518"></A>   * Die Methode wird aufgerufen, wenn die Aktion Datei | Bild Oeffnen aus dem Menue
<A NAME="2519"></A>   * aufgerufen wird. Diese Methode wird nur auf die entsprechende Methode des
<A NAME="2520"></A>   * Bild-Oeffnen-Knopfes in der Werkzeugleiste umgeleitet.
<A NAME="2521"></A>   */</FONT>
<A NAME="2522"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> fileImageOpen_actionPerformed() {
<A NAME="2523"></A>
<A NAME="2524"></A>    <FONT ID="SingleLineComment">// Umleiten der Funktion auf den entsprechenden Button in der Toolleiste
<A NAME="2525"></A></FONT>    pbLoad_actionPerformed();
<A NAME="2526"></A>  }   <FONT ID="SingleLineComment">// Methode fileOpen_actionPerformed()
<A NAME="2527"></A></FONT> 
<A NAME="2528"></A>
<A NAME="2529"></A>  <FONT ID="FormalComment">/**
<A NAME="2530"></A>   * Die Methode wird aufgerufen, wenn die Aktion Datei | Speichern aus dem Menue
<A NAME="2531"></A>   * aufgerufen wird. Diese Methode wird nur auf die entsprechende Methode des
<A NAME="2532"></A>   * Speichern-Knopfes in der Werkzeugleiste umgeleitet.
<A NAME="2533"></A>   */</FONT>
<A NAME="2534"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> fileSave_actionPerformed() {
<A NAME="2535"></A>
<A NAME="2536"></A>    <FONT ID="SingleLineComment">// Umleiten der Funktion auf den entsprechenden Button in der Toolleiste
<A NAME="2537"></A></FONT>    pbSave_actionPerformed();
<A NAME="2538"></A>  }   <FONT ID="SingleLineComment">// Methode fileSave_actionPerformed()
<A NAME="2539"></A></FONT> 
<A NAME="2540"></A>
<A NAME="2541"></A>  <FONT ID="FormalComment">/**
<A NAME="2542"></A>   * Die Methode wird aufgerufen, wenn die Aktion Datei | Drucken aus dem Menue
<A NAME="2543"></A>   * aufgerufen wird. Diese Methode wird nur auf die entsprechende Methode des
<A NAME="2544"></A>   * Drucken-Knopfes in der Werkzeugleiste umgeleitet.
<A NAME="2545"></A>   */</FONT>
<A NAME="2546"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> filePrint_actionPerformed() {
<A NAME="2547"></A>
<A NAME="2548"></A>    <FONT ID="SingleLineComment">// Umleiten der Funktion auf den entsprechenden Button in der Toolleiste
<A NAME="2549"></A></FONT>    pbPrint_actionPerformed();
<A NAME="2550"></A>  }   <FONT ID="SingleLineComment">// Methode filePrint_actionPerformed()
<A NAME="2551"></A></FONT> 
<A NAME="2552"></A>
<A NAME="2553"></A>  <FONT ID="FormalComment">/**
<A NAME="2554"></A>   * Die Methode wird aufgerufen, wenn die Aktion Datei | Beenden aus dem Menue
<A NAME="2555"></A>   * aufgerufen wird. Ggf. wird eine Abfrage aufgeblendet, ob die neuen Bilder
<A NAME="2556"></A>   * verworfen werden sollen. Nach deren Bestaetigung wird das Programm beendet.
<A NAME="2557"></A>   */</FONT>
<A NAME="2558"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> fileExit_actionPerformed() {
<A NAME="2559"></A>    <FONT ID="If">if</FONT> (unsavedChanges) {
<A NAME="2560"></A>      JButton[] buttons = <FONT ID="New">new</FONT> JButton[<FONT ID="IntegerLiteral">3</FONT>];
<A NAME="2561"></A>
<A NAME="2562"></A>      buttons[<FONT ID="IntegerLiteral">0</FONT>] = <FONT ID="New">new</FONT> JButton(<FONT ID="StringLiteral">"Ja"</FONT>);
<A NAME="2563"></A>      buttons[<FONT ID="IntegerLiteral">1</FONT>] = <FONT ID="New">new</FONT> JButton(<FONT ID="StringLiteral">"Nein"</FONT>);
<A NAME="2564"></A>      buttons[<FONT ID="IntegerLiteral">2</FONT>] = <FONT ID="New">new</FONT> JButton(<FONT ID="StringLiteral">"Abbrechen"</FONT>);
<A NAME="2565"></A>
<A NAME="2566"></A>      <FONT ID="Int">int</FONT> response;
<A NAME="2567"></A>
<A NAME="2568"></A>      response = JOptionPane.showConfirmDialog(<FONT ID="Null">null</FONT>, <FONT ID="StringLiteral">"Sie haben neue nichtgespeicherte\n"</FONT> + <FONT ID="StringLiteral">"Bilder. Moechten Sie wirklich Beenden?"</FONT>);
<A NAME="2569"></A>      <FONT ID="If">if</FONT> (response != <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="2570"></A>        <FONT ID="Return">return</FONT>;
<A NAME="2571"></A>      } 
<A NAME="2572"></A>    } 
<A NAME="2573"></A>
<A NAME="2574"></A>    <FONT ID="If">if</FONT> (isApplication) {
<A NAME="2575"></A>      System.exit(<FONT ID="IntegerLiteral">0</FONT>);
<A NAME="2576"></A>    } <FONT ID="Else">else</FONT> {
<A NAME="2577"></A>      <FONT ID="This">this</FONT>.dispose();
<A NAME="2578"></A>    } 
<A NAME="2579"></A>  } 
<A NAME="2580"></A>
<A NAME="2581"></A>
<A NAME="2582"></A>  <FONT ID="FormalComment">/**
<A NAME="2583"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum Spiegeln des selektierten
<A NAME="2584"></A>   * Bildes gedrueckt wurde. Es wird dann die entsprechende Methode fuer das
<A NAME="2585"></A>   * selektierte Bild aufgerufen und der Zeichenflaecheninhalt neu dargestellt.
<A NAME="2586"></A>   */</FONT>
<A NAME="2587"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbMirror_actionPerformed() {
<A NAME="2588"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = getSelectedImage();
<A NAME="2589"></A>
<A NAME="2590"></A>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2591"></A>      ip.mirrorHor();
<A NAME="2592"></A>      pCanvas.repaint();
<A NAME="2593"></A>    } 
<A NAME="2594"></A>  }   <FONT ID="SingleLineComment">// Methode pbMirror_actionPerformed()
<A NAME="2595"></A></FONT> 
<A NAME="2596"></A>
<A NAME="2597"></A>  <FONT ID="FormalComment">/**
<A NAME="2598"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum Rotieren des selektierten
<A NAME="2599"></A>   * Bildes gedrueckt wurde. Es wird dann die entsprechende Methode fuer das
<A NAME="2600"></A>   * selektierte Bild aufgerufen und der Zeichenflaecheninhalt neu dargestellt.
<A NAME="2601"></A>   */</FONT>
<A NAME="2602"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbRotate_actionPerformed() {
<A NAME="2603"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = getSelectedImage();
<A NAME="2604"></A>
<A NAME="2605"></A>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2606"></A>      ip.rotate90CW();
<A NAME="2607"></A>      pCanvas.repaint();
<A NAME="2608"></A>    }   <FONT ID="SingleLineComment">// if
<A NAME="2609"></A></FONT>   }    <FONT ID="SingleLineComment">// Methode pbRotate_actionPerformed()
<A NAME="2610"></A></FONT> 
<A NAME="2611"></A>
<A NAME="2612"></A>  <FONT ID="FormalComment">/**
<A NAME="2613"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum Invertieren des selektierten
<A NAME="2614"></A>   * Bildes gedrueckt wurde. Es wird dann die entsprechende Methode fuer das
<A NAME="2615"></A>   * selektierte Bild aufgerufen und der Zeichenflaecheninhalt neu dargestellt.
<A NAME="2616"></A>   */</FONT>
<A NAME="2617"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbInvert_actionPerformed() {
<A NAME="2618"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = getSelectedImage();
<A NAME="2619"></A>
<A NAME="2620"></A>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2621"></A>      ip.invert();
<A NAME="2622"></A>      pCanvas.repaint();
<A NAME="2623"></A>    } 
<A NAME="2624"></A>  }   <FONT ID="SingleLineComment">// Methode pbInvert_actionPerformed()
<A NAME="2625"></A></FONT> 
<A NAME="2626"></A>
<A NAME="2627"></A>  <FONT ID="FormalComment">/**
<A NAME="2628"></A>   * Die Methode wird aufgerufen, wenn der Knopf zum optimalen Fenstern des selektierten
<A NAME="2629"></A>   * Bildes gedrueckt wurde. Es wird dann die entsprechende Methode fuer das
<A NAME="2630"></A>   * selektierte Bild aufgerufen und der Zeichenflaecheninhalt neu dargestellt.
<A NAME="2631"></A>   * Ausserdem werden die Einstellungen der Schieberegler fuer die Fensterung
<A NAME="2632"></A>   * angepasst.
<A NAME="2633"></A>   */</FONT>
<A NAME="2634"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> pbOptWindowing_actionPerformed() {
<A NAME="2635"></A>
<A NAME="2636"></A>    <FONT ID="SingleLineComment">// Selektiertes Bild besorgen
<A NAME="2637"></A></FONT>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = getSelectedImage();
<A NAME="2638"></A>
<A NAME="2639"></A>    <FONT ID="SingleLineComment">// Selektiertes Bild optimal Fenstern
<A NAME="2640"></A></FONT>    ip.optimalWindowing();
<A NAME="2641"></A>
<A NAME="2642"></A>    <FONT ID="SingleLineComment">// Fensterungseinstellungen der Slider aktualisieren
<A NAME="2643"></A></FONT>    pWindow.setValue(ip.getWindow());
<A NAME="2644"></A>    pCenter.setValue(ip.getCenter());
<A NAME="2645"></A>
<A NAME="2646"></A>    <FONT ID="SingleLineComment">// Neuzeichnen des Canvas
<A NAME="2647"></A></FONT>    pCanvas.repaint();
<A NAME="2648"></A>  }   <FONT ID="SingleLineComment">// Methode pbOptWindowing_actionPerformed()
<A NAME="2649"></A></FONT> 
<A NAME="2650"></A>
<A NAME="2651"></A>  <FONT ID="FormalComment">/**
<A NAME="2652"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur Darstellung des Histogramms
<A NAME="2653"></A>   * zum selektierten Bild gedrueckt wurde. Es wird dann ein Fenster aufgeblendet,
<A NAME="2654"></A>   * in dem das Histogramm des selektierten Bildes zu sehen ist.
<A NAME="2655"></A>   */</FONT>
<A NAME="2656"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbHistogram_actionPerformed() {
<A NAME="2657"></A>
<A NAME="2658"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip;
<A NAME="2659"></A>    <FONT ID="Short">short</FONT>[][] myShortImage = <FONT ID="Null">null</FONT>;
<A NAME="2660"></A>    <FONT ID="Int">int</FONT>       actImage = pCanvas.getActiveImage();
<A NAME="2661"></A>
<A NAME="2662"></A>    ip = getSelectedImage();
<A NAME="2663"></A>
<A NAME="2664"></A>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2665"></A>
<A NAME="2666"></A>      <FONT ID="SingleLineComment">// Besorgen des AWT-Bildes des selektierten Bildes
<A NAME="2667"></A></FONT>      myShortImage = ip.get8BitImageShort();
<A NAME="2668"></A>
<A NAME="2669"></A>      <FONT ID="SingleLineComment">// Neues Histogrammfenster erzeugen und darstellen
<A NAME="2670"></A></FONT>      <A HREF="../../virtual/tools/Histogramm.java.html">Histogramm</A>  myHist = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/Histogramm.java.html">Histogramm</A>(<FONT ID="This">this</FONT>, myShortImage, <FONT ID="StringLiteral">"Histogramm zu Bild "</FONT> + actImage);
<A NAME="2671"></A>
<A NAME="2672"></A>      myHist.setVisible(<FONT ID="True">true</FONT>);
<A NAME="2673"></A>
<A NAME="2674"></A>    }   <FONT ID="SingleLineComment">// if ip!=null
<A NAME="2675"></A></FONT> 
<A NAME="2676"></A>  }     <FONT ID="SingleLineComment">// Methode pbHistogram_actionPerformed()
<A NAME="2677"></A></FONT> 
<A NAME="2678"></A>
<A NAME="2679"></A>  <FONT ID="FormalComment">/**
<A NAME="2680"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur Darstellung des
<A NAME="2681"></A>   * k-Raums-Manipulators fuer das selektierte Bild gedrueckt wurde.
<A NAME="2682"></A>   * Es wird dann ein Fenster aufgeblendet, in dem das Originalbild, der original
<A NAME="2683"></A>   * k-Raum, der manipulierte k-Raum und die Ruecktransformation des
<A NAME="2684"></A>   * manipulierten k-Raums dargestellt werden.
<A NAME="2685"></A>   * Der Benutzer hat die Moeglichkeit, verschiedene Manipulationen am k-Raum
<A NAME="2686"></A>   * vorzunehmen und dann die Ruecktransformationen berechnen zu lassen.
<A NAME="2687"></A>   */</FONT>
<A NAME="2688"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbKSpaceManip_actionPerformed() {
<A NAME="2689"></A>
<A NAME="2690"></A>    <FONT ID="SingleLineComment">// Selektiertes Bild suchen
<A NAME="2691"></A></FONT>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip;
<A NAME="2692"></A>
<A NAME="2693"></A>    ip = getSelectedImage();
<A NAME="2694"></A>
<A NAME="2695"></A>    <FONT ID="SingleLineComment">// K-Raum-manipulator aufblenden
<A NAME="2696"></A></FONT>    <A HREF="../../virtual/tools/KSpaceManipulator.java.html">KSpaceManipulator</A> manipulator = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/KSpaceManipulator.java.html">KSpaceManipulator</A>(ip, pCanvas);
<A NAME="2697"></A>
<A NAME="2698"></A>    manipulator.show();
<A NAME="2699"></A>
<A NAME="2700"></A>  }   <FONT ID="SingleLineComment">// Methode pbKSpaceManip_actionPerformed()
<A NAME="2701"></A></FONT> 
<A NAME="2702"></A>
<A NAME="2703"></A>  <FONT ID="FormalComment">/**
<A NAME="2704"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur Darstellung des k-Raums
<A NAME="2705"></A>   * des selektierten Bild gedrueckt wurde. Es wird dann ein Fenster aufgeblendet,
<A NAME="2706"></A>   * in dem der k-Raum (Magnitudenbild) des selektierten Bildes zu sehen ist.
<A NAME="2707"></A>   * Ausserdem kann man sich das Phasenbild sowie den Real- und Imaginaerteil
<A NAME="2708"></A>   * anzeigen lassen.
<A NAME="2709"></A>   */</FONT>
<A NAME="2710"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbKSpace_actionPerformed() {
<A NAME="2711"></A>
<A NAME="2712"></A>    <FONT ID="SingleLineComment">// Selektiertes Bild suchen
<A NAME="2713"></A></FONT>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip;
<A NAME="2714"></A>
<A NAME="2715"></A>    ip = getSelectedImage();
<A NAME="2716"></A>
<A NAME="2717"></A>    <FONT ID="SingleLineComment">// K-Raum Anzeigefenster oeff´nen
<A NAME="2718"></A></FONT>    <FONT ID="If">if</FONT> (ip != <FONT ID="Null">null</FONT>) {
<A NAME="2719"></A>      <A HREF="../../virtual/tools/KSpaceFrame.java.html">KSpaceFrame</A> myOrig = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/KSpaceFrame.java.html">KSpaceFrame</A>(ip);
<A NAME="2720"></A>
<A NAME="2721"></A>      myOrig.setVisible(<FONT ID="True">true</FONT>);
<A NAME="2722"></A>    }   <FONT ID="SingleLineComment">// if ip!=null
<A NAME="2723"></A></FONT> 
<A NAME="2724"></A>  }     <FONT ID="SingleLineComment">// Methode pbKSpace_actionPerformed ()
<A NAME="2725"></A></FONT> 
<A NAME="2726"></A>
<A NAME="2727"></A>  <FONT ID="SingleLineComment">// ***************************************************************************
<A NAME="2728"></A></FONT>  <FONT ID="SingleLineComment">// *********************  Sonstige Methoden  *********************************
<A NAME="2729"></A></FONT>  <FONT ID="SingleLineComment">// ***************************************************************************
<A NAME="2730"></A></FONT>
<A NAME="2731"></A>
<A NAME="2732"></A>  <FONT ID="FormalComment">/**
<A NAME="2733"></A>   * Die Methode bestimmt aufgrund der x- und y-Koordinate des Mauszeigers
<A NAME="2734"></A>   * auf der Zeichenflaeche, ueber welchem Bild sich der Mauszeiger gerade
<A NAME="2735"></A>   * befindet. Dabei geht die Einstellung 1 Bild / 4 Bilder und die
<A NAME="2736"></A>   * Bildlaufleistenposition mit in die Berechnung ein.
<A NAME="2737"></A>   * @param x Die aktuelle x-Koordinate des Mauszeigers.
<A NAME="2738"></A>   * @param y Die aktuelle y-Koordinate des Mauszeigers.
<A NAME="2739"></A>   * @return Nummer des Bildes, ueber dem sich der Mauszeiger befindet.
<A NAME="2740"></A>   */</FONT>
<A NAME="2741"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> getImageMouseIsOn(<FONT ID="Int">int</FONT> x, <FONT ID="Int">int</FONT> y) {
<A NAME="2742"></A>    <FONT ID="Int">int</FONT> bildnr;
<A NAME="2743"></A>
<A NAME="2744"></A>    <FONT ID="If">if</FONT> (rb4Images.isSelected()) {
<A NAME="2745"></A>      <FONT ID="Int">int</FONT> off = sbVerScrollbar.getValue() / <FONT ID="IntegerLiteral">256</FONT>;
<A NAME="2746"></A>
<A NAME="2747"></A>      bildnr = <FONT ID="IntegerLiteral">1</FONT> + <FONT ID="IntegerLiteral">2</FONT> * (y / <FONT ID="IntegerLiteral">256</FONT>) + (x / <FONT ID="IntegerLiteral">256</FONT>) + <FONT ID="IntegerLiteral">2</FONT> * off;
<A NAME="2748"></A>    } <FONT ID="Else">else</FONT> {
<A NAME="2749"></A>      <FONT ID="Int">int</FONT> off = sbVerScrollbar.getValue() / <FONT ID="IntegerLiteral">512</FONT>;
<A NAME="2750"></A>
<A NAME="2751"></A>      bildnr = <FONT ID="IntegerLiteral">1</FONT> + off;
<A NAME="2752"></A>    } 
<A NAME="2753"></A>
<A NAME="2754"></A>    <FONT ID="If">if</FONT> ((x &lt; <FONT ID="IntegerLiteral">0</FONT>) || (x &gt; <FONT ID="IntegerLiteral">512</FONT>) || (y &lt; <FONT ID="IntegerLiteral">0</FONT>) || (y &gt; <FONT ID="IntegerLiteral">512</FONT>)) {
<A NAME="2755"></A>      bildnr = -<FONT ID="IntegerLiteral">1</FONT>;
<A NAME="2756"></A>    } 
<A NAME="2757"></A>
<A NAME="2758"></A>    <FONT ID="Return">return</FONT> bildnr;
<A NAME="2759"></A>  }   <FONT ID="SingleLineComment">// Methode getImageMouseIsOn(int x, int y)
<A NAME="2760"></A></FONT> 
<A NAME="2761"></A>
<A NAME="2762"></A>  <FONT ID="FormalComment">/**
<A NAME="2763"></A>   * Die Methode liefert eine Referenz auf die Fortschrittsanzeige zurueck.
<A NAME="2764"></A>   * @return Eine Referenz auf die Fortschrittsanzeige.
<A NAME="2765"></A>   */</FONT>
<A NAME="2766"></A>  <FONT ID="Public">public</FONT> JProgressBar getProgressBar() {
<A NAME="2767"></A>    <FONT ID="Return">return</FONT> prbarProgress;
<A NAME="2768"></A>  }   <FONT ID="SingleLineComment">// Methode getProgressBar()
<A NAME="2769"></A></FONT> 
<A NAME="2770"></A>
<A NAME="2771"></A>  <FONT ID="FormalComment">/**
<A NAME="2772"></A>   * Die Method setzt den Merker fuer nicht gespeicherte Bilder.
<A NAME="2773"></A>   */</FONT>
<A NAME="2774"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setChanges() {
<A NAME="2775"></A>    unsavedChanges = <FONT ID="True">true</FONT>;
<A NAME="2776"></A>  }   <FONT ID="SingleLineComment">// Methode setChanges()
<A NAME="2777"></A></FONT> 
<A NAME="2778"></A>
<A NAME="2779"></A>  <FONT ID="FormalComment">/**
<A NAME="2780"></A>   * Die Methode setzt den Merker fuer nicht gespeicherte Bilder zurueck.
<A NAME="2781"></A>   */</FONT>
<A NAME="2782"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> resetChanges() {
<A NAME="2783"></A>    unsavedChanges = <FONT ID="False">false</FONT>;
<A NAME="2784"></A>  }   <FONT ID="SingleLineComment">// Methode resetChanges()
<A NAME="2785"></A></FONT> 
<A NAME="2786"></A>
<A NAME="2787"></A>  <FONT ID="FormalComment">/**
<A NAME="2788"></A>   * Die Methode liefert das ImagePlus-Objekt des zur Zeit selektierten Bildes.
<A NAME="2789"></A>   * @return Das ImagePlus-Objekt des selektierten Bildes.
<A NAME="2790"></A>   */</FONT>
<A NAME="2791"></A>  <FONT ID="Private">private</FONT> <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> getSelectedImage() {
<A NAME="2792"></A>
<A NAME="2793"></A>    <FONT ID="Int">int</FONT>       actImage = pCanvas.getActiveImage();
<A NAME="2794"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = <FONT ID="Null">null</FONT>;
<A NAME="2795"></A>
<A NAME="2796"></A>    <FONT ID="If">if</FONT> (actImage &gt;= <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="2797"></A>      ip = pCanvas.getImageStack().getPictureAtPos(actImage);
<A NAME="2798"></A>    } 
<A NAME="2799"></A>    <FONT ID="Return">return</FONT> ip;
<A NAME="2800"></A>  }   <FONT ID="SingleLineComment">// Methode getSelectedImage()
<A NAME="2801"></A></FONT> 
<A NAME="2802"></A>
<A NAME="2803"></A>  <FONT ID="FormalComment">/**
<A NAME="2804"></A>   * Die Methode wird aufgerufen, wenn sich der Zustand des Scrollbalkens
<A NAME="2805"></A>   * veraendert hat. Der Scrollbalken wird dann aktualisiert.
<A NAME="2806"></A>   */</FONT>
<A NAME="2807"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> sbVerScrollbar_adjustmentValueChanged() {
<A NAME="2808"></A>    pCanvas.repaint();
<A NAME="2809"></A>    pCanvas.updateScrollbar();
<A NAME="2810"></A>  }   <FONT ID="SingleLineComment">// Methode  sbVerScrollbar_adjustmentValueChanged()
<A NAME="2811"></A></FONT> 
<A NAME="2812"></A>
<A NAME="2813"></A>  <FONT ID="FormalComment">/**
<A NAME="2814"></A>   * Die Method wird aufgerufen, wenn der Knopf zur Darstellung des
<A NAME="2815"></A>   * Animationsfenster gedrueckt wurde. Es wird eine neue Instanz des
<A NAME="2816"></A>   * Animationsfensters erzeugt und dargestellt.
<A NAME="2817"></A>   */</FONT>
<A NAME="2818"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbAnimation_actionPerformed() {
<A NAME="2819"></A>    <A HREF="../../virtual/dv/AnimationFrame.java.html">AnimationFrame</A>  anim = <FONT ID="New">new</FONT> <A HREF="../../virtual/dv/AnimationFrame.java.html">AnimationFrame</A>(<FONT ID="This">this</FONT>);
<A NAME="2820"></A>
<A NAME="2821"></A>    anim.show();
<A NAME="2822"></A>  }   <FONT ID="SingleLineComment">// Methode pbAnimation_actionPerformed()
<A NAME="2823"></A></FONT> 
<A NAME="2824"></A>
<A NAME="2825"></A>  <FONT ID="FormalComment">/**
<A NAME="2826"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur Berechnung eines MIP-Bildes
<A NAME="2827"></A>   * gedrueckt wurde. Es wird dann zunaechst ein Dialog aufgeblendet, der abfragt,
<A NAME="2828"></A>   * welche Bilder in die MIP-Berechnung einbezogen werden sollen.
<A NAME="2829"></A>   * Nach dessen Bestaetigung wird ein neues MIP-Bild berechnet, in den Bildstapel
<A NAME="2830"></A>   * eingefuegt und dargestellt.
<A NAME="2831"></A>   */</FONT>
<A NAME="2832"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbCalcMIP_actionPerformed() {
<A NAME="2833"></A>
<A NAME="2834"></A>    <FONT ID="SingleLineComment">// Besorgen der Position des ersten und letzten Bildes im Stapel
<A NAME="2835"></A></FONT>    <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  myIS = pCanvas.getImageStack();
<A NAME="2836"></A>    <FONT ID="Int">int</FONT>         start = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="2837"></A>    <FONT ID="Int">int</FONT>         end = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="2838"></A>    <FONT ID="Int">int</FONT>         numimages = myIS.getStackSize();
<A NAME="2839"></A>
<A NAME="2840"></A>    <FONT ID="If">if</FONT> (numimages != <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="2841"></A>      start = <FONT ID="IntegerLiteral">1</FONT>;
<A NAME="2842"></A>      end = numimages;
<A NAME="2843"></A>    } 
<A NAME="2844"></A>
<A NAME="2845"></A>    <FONT ID="SingleLineComment">// Aufblenden des parameterdialoges mit voreingestelltem Start- und Endbild
<A NAME="2846"></A></FONT>    <A HREF="../../virtual/dv/MIPParamDlg.java.html">MIPParamDlg</A> myDlg = <FONT ID="New">new</FONT> <A HREF="../../virtual/dv/MIPParamDlg.java.html">MIPParamDlg</A>(<FONT ID="This">this</FONT>, <FONT ID="StringLiteral">"MIP-Parameter"</FONT>, <FONT ID="True">true</FONT>);
<A NAME="2847"></A>
<A NAME="2848"></A>    myDlg.setImages(start, end);
<A NAME="2849"></A>    myDlg.show();
<A NAME="2850"></A>
<A NAME="2851"></A>    <FONT ID="SingleLineComment">// Vom Dialog aus wird die Methode zur Berechnung des MIP-Bildes angestossen
<A NAME="2852"></A></FONT>
<A NAME="2853"></A>  }   <FONT ID="SingleLineComment">// Methode pbCalcMIP_actionPerformed
<A NAME="2854"></A></FONT> 
<A NAME="2855"></A>
<A NAME="2856"></A>  <FONT ID="FormalComment">/**
<A NAME="2857"></A>   * Die Methode berechnet ein MIP-Bild aus den angegebenen Bildern. Es wird ein
<A NAME="2858"></A>   * ImagePlus-Objekt erzeugt, dass die gleichen DICOM-Informationen enthaelt,
<A NAME="2859"></A>   * wie die Bilder, aus denen das MIP-Bild erzeugt wurde.
<A NAME="2860"></A>   * @param start Das erste Bild, das in die Berechnung einfliessen soll.
<A NAME="2861"></A>   * @param end Das letzte Bild, das in die Berechnung einfliessen soll.
<A NAME="2862"></A>   */</FONT>
<A NAME="2863"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> calcMIPImage(<FONT ID="Int">int</FONT> start, <FONT ID="Int">int</FONT> end) {
<A NAME="2864"></A>    <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  myIS = pCanvas.getImageStack();
<A NAME="2865"></A>
<A NAME="2866"></A>    <FONT ID="If">if</FONT> (end != <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="2867"></A>      <FONT ID="Int">int</FONT>     size = myIS.getPictureAtPos(start).getSize();
<A NAME="2868"></A>      <FONT ID="Short">short</FONT>[] MIPImage = <FONT ID="New">new</FONT> <FONT ID="Short">short</FONT>[size * size];
<A NAME="2869"></A>
<A NAME="2870"></A>      <FONT ID="SingleLineComment">// Berechnen des MIP-Bildes
<A NAME="2871"></A></FONT>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = start; i &lt;= end; i++) {
<A NAME="2872"></A>        <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = myIS.getPictureAtPos(i);
<A NAME="2873"></A>
<A NAME="2874"></A>        <FONT ID="Short">short</FONT>[]   actImage = <FONT ID="New">new</FONT> <FONT ID="Short">short</FONT>[size * size];
<A NAME="2875"></A>
<A NAME="2876"></A>        actImage = ip.getImage12BitShort();
<A NAME="2877"></A>
<A NAME="2878"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> x = <FONT ID="IntegerLiteral">0</FONT>; x &lt; size * size; x++) {
<A NAME="2879"></A>          <FONT ID="Short">short</FONT> val = actImage[x];
<A NAME="2880"></A>
<A NAME="2881"></A>          <FONT ID="If">if</FONT> (val &gt; MIPImage[x]) {
<A NAME="2882"></A>            MIPImage[x] = val;
<A NAME="2883"></A>          }   <FONT ID="SingleLineComment">// if
<A NAME="2884"></A></FONT>         }    <FONT ID="SingleLineComment">// for x
<A NAME="2885"></A></FONT> 
<A NAME="2886"></A>      }       <FONT ID="SingleLineComment">// for i
<A NAME="2887"></A></FONT> 
<A NAME="2888"></A>      <FONT ID="SingleLineComment">// Hier steht nun das MIP-Bild als Matrix von Integer-Werten zur Verfuegung
<A NAME="2889"></A></FONT>      <FONT ID="SingleLineComment">// Es wird nun ein neues Bild im Image Stack an der aktuell selektierten
<A NAME="2890"></A></FONT>      <FONT ID="SingleLineComment">// Position angelegt
<A NAME="2891"></A></FONT>
<A NAME="2892"></A>      <FONT ID="SingleLineComment">// Auslesen eines DcmdataObjects aus einem der Ursprungsbilder
<A NAME="2893"></A></FONT>      DcmDataObject myddo = myIS.getPictureAtPos(start).getDDO();
<A NAME="2894"></A>
<A NAME="2895"></A>      <FONT ID="SingleLineComment">// DcmImage aus der Bildmatrix und dem DicomDataObject eines der
<A NAME="2896"></A></FONT>      <FONT ID="SingleLineComment">// Ursprungsbilder erzeugen
<A NAME="2897"></A></FONT>      <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>      dcmimg = <FONT ID="Null">null</FONT>;
<A NAME="2898"></A>
<A NAME="2899"></A>      <FONT ID="Try">try</FONT> {
<A NAME="2900"></A>        dcmimg = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>(myddo);
<A NAME="2901"></A>        dcmimg.pixel16 = MIPImage;
<A NAME="2902"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="2903"></A>        err.printStackTrace();
<A NAME="2904"></A>      } 
<A NAME="2905"></A>
<A NAME="2906"></A>      <FONT ID="SingleLineComment">// ImagePlus-Objekt erzeugen. Dies geschieht in der Klasse MyPanel.
<A NAME="2907"></A></FONT>      <FONT ID="SingleLineComment">// ImagePlus ip = pCanvas.createNewImage(intensityImage);
<A NAME="2908"></A></FONT>      <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = pCanvas.createNewImage(dcmimg);
<A NAME="2909"></A>
<A NAME="2910"></A>      <FONT ID="SingleLineComment">// DDo im ImagePlus abspeichern
<A NAME="2911"></A></FONT>      ip.setDDO(myddo);
<A NAME="2912"></A>
<A NAME="2913"></A>      <FONT ID="SingleLineComment">// Erzeugungsdatum und Uhrzeit im Bild speichern
<A NAME="2914"></A></FONT>      ip.setCurrentDate();
<A NAME="2915"></A>
<A NAME="2916"></A>      <FONT ID="SingleLineComment">// Fensterung im Bild speichern
<A NAME="2917"></A></FONT>      ip.setCW(<FONT ID="IntegerLiteral">2048</FONT>, <FONT ID="IntegerLiteral">4096</FONT>);
<A NAME="2918"></A>
<A NAME="2919"></A>    }         <FONT ID="SingleLineComment">// if (end!=0)
<A NAME="2920"></A></FONT> 
<A NAME="2921"></A>    <FONT ID="SingleLineComment">// Neuzeichnen des Canvas
<A NAME="2922"></A></FONT>    pCanvas.repaint();
<A NAME="2923"></A>
<A NAME="2924"></A>  }   <FONT ID="SingleLineComment">// Methode calcMIPImage
<A NAME="2925"></A></FONT> 
<A NAME="2926"></A>
<A NAME="2927"></A>  <FONT ID="FormalComment">/**
<A NAME="2928"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur Berechnung der ersten 90-Grad-Projektion
<A NAME="2929"></A>   * gedrueckt wurde. Es wird dann zunaechst ein Dialog aufgeblendet, der abfragt,
<A NAME="2930"></A>   * welche Bilder in die Berechnung einbezogen werden sollen, welche neue Schicht
<A NAME="2931"></A>   * berechnet werden soll und ob die Schicht interpoliert werden soll.
<A NAME="2932"></A>   * Nach dessen Bestaetigung wird ein neues Bild der gewaehlten Projektion
<A NAME="2933"></A>   * berechnet, in den Bildstapel eingefuegt und dargestellt.
<A NAME="2934"></A>   */</FONT>
<A NAME="2935"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbProjection1_actionPerformed() {
<A NAME="2936"></A>
<A NAME="2937"></A>    <FONT ID="SingleLineComment">// Besorgen der Position des ersten und letzten Bildes im stapel
<A NAME="2938"></A></FONT>    <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  myIS = pCanvas.getImageStack();
<A NAME="2939"></A>    <FONT ID="Int">int</FONT>         start = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="2940"></A>    <FONT ID="Int">int</FONT>         end = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="2941"></A>    <FONT ID="Int">int</FONT>         numimages = myIS.getStackSize();
<A NAME="2942"></A>
<A NAME="2943"></A>    <FONT ID="If">if</FONT> (numimages != <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="2944"></A>      start = <FONT ID="IntegerLiteral">1</FONT>;
<A NAME="2945"></A>      end = numimages;
<A NAME="2946"></A>    } 
<A NAME="2947"></A>
<A NAME="2948"></A>    <FONT ID="SingleLineComment">// Auflebenden des Dialoges
<A NAME="2949"></A></FONT>    <A HREF="../../virtual/dv/ProjParamDlg.java.html">ProjParamDlg</A>  myDlg = <FONT ID="New">new</FONT> <A HREF="../../virtual/dv/ProjParamDlg.java.html">ProjParamDlg</A>(<FONT ID="This">this</FONT>, <FONT ID="StringLiteral">"Projektions-Parameter"</FONT>, <FONT ID="True">true</FONT>);
<A NAME="2950"></A>
<A NAME="2951"></A>    myDlg.setImages(start, end);
<A NAME="2952"></A>    myDlg.setProjectionNr(<FONT ID="IntegerLiteral">1</FONT>);
<A NAME="2953"></A>    myDlg.show();
<A NAME="2954"></A>
<A NAME="2955"></A>    <FONT ID="SingleLineComment">// Aus dem Dialog heraus wird ggf. createNewProj1Image aufgerufen
<A NAME="2956"></A></FONT>
<A NAME="2957"></A>  }   <FONT ID="SingleLineComment">// Methode pbProjection1_actionPerformed()
<A NAME="2958"></A></FONT> 
<A NAME="2959"></A>
<A NAME="2960"></A>  <FONT ID="FormalComment">/**
<A NAME="2961"></A>   * Die Methode berechnet ein neues Bild der ersten 90-Grad-Projektion, fuegt
<A NAME="2962"></A>   * es in den Bildstapel ein, fenstert es optimal und stellt es dar.
<A NAME="2963"></A>   * @param start Das erste Bild, das in die Berechnung einfliessen soll.
<A NAME="2964"></A>   * @param end Das letzte Bild, das in die Berechnung einfliessen soll.
<A NAME="2965"></A>   * @param slice Die neue Schicht, die berechnet werden soll.
<A NAME="2966"></A>   * @param interpolate Schalter fuer Interpolation ein/aus.
<A NAME="2967"></A>   */</FONT>
<A NAME="2968"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> createNewProj1Image(<FONT ID="Int">int</FONT> start, <FONT ID="Int">int</FONT> end, <FONT ID="Int">int</FONT> slice, <FONT ID="Boolean">boolean</FONT> interpolate) {
<A NAME="2969"></A>
<A NAME="2970"></A>    <FONT ID="SingleLineComment">// Projektion berechnen und neues Bild in Stack einfuegen
<A NAME="2971"></A></FONT>    <FONT ID="Int">int</FONT> pos = pCanvas.createNewImage(calcProjection1(slice, start, end, interpolate));
<A NAME="2972"></A>
<A NAME="2973"></A>    <FONT ID="SingleLineComment">// Neues Bild als aktiviert markieren
<A NAME="2974"></A></FONT>    pCanvas.setActiveImage(pos);
<A NAME="2975"></A>
<A NAME="2976"></A>    <FONT ID="SingleLineComment">// aktives (neues) Bild optimal Fenstern
<A NAME="2977"></A></FONT>    pbOptWindowing_actionPerformed();
<A NAME="2978"></A>  }   <FONT ID="SingleLineComment">// Methode createNewProj1Image(int start, int end, int slice, boolean interpolate)
<A NAME="2979"></A></FONT> 
<A NAME="2980"></A>
<A NAME="2981"></A>  <FONT ID="FormalComment">/**
<A NAME="2982"></A>   * Die Methode berechnet ein neues Bild der ersten 90-Grad-Projektion. Das
<A NAME="2983"></A>   * Bild wird allerdings nicht in den Bildstapel eingefuegt. Die Methode wird
<A NAME="2984"></A>   * zur Berechnung der Bilder fuer die Animation benoetigt.
<A NAME="2985"></A>   * @param start Das erste Bild, das in die Berechnung einfliessen soll.
<A NAME="2986"></A>   * @param end Das letzte Bild, das in die Berechnung einfliessen soll.
<A NAME="2987"></A>   * @param position Die neue Schicht, die berechnet werden soll.
<A NAME="2988"></A>   * @param interpolate Schalter fuer Interpolation ein/aus.
<A NAME="2989"></A>   */</FONT>
<A NAME="2990"></A>  <FONT ID="Public">public</FONT> <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> calcProjection1(<FONT ID="Int">int</FONT> position, <FONT ID="Int">int</FONT> fromSlice, <FONT ID="Int">int</FONT> toSlice, <FONT ID="Boolean">boolean</FONT> interpolate) {
<A NAME="2991"></A>
<A NAME="2992"></A>    <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  imaStack = pCanvas.getImageStack();
<A NAME="2993"></A>    <FONT ID="Int">int</FONT>         numSlices = toSlice - fromSlice + <FONT ID="IntegerLiteral">1</FONT>;
<A NAME="2994"></A>    <FONT ID="Int">int</FONT>         size = imaStack.getPictureAtPos(fromSlice).getSize();
<A NAME="2995"></A>    <FONT ID="Short">short</FONT>[]     projImg = <FONT ID="New">new</FONT> <FONT ID="Short">short</FONT>[size * size];
<A NAME="2996"></A>    <FONT ID="Int">int</FONT>         slicenum = fromSlice;
<A NAME="2997"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A>   ip = imaStack.getPictureAtPos(slicenum);
<A NAME="2998"></A>    <FONT ID="Short">short</FONT>[]     origImg = ip.getImage12BitShort();
<A NAME="2999"></A>    <FONT ID="Double">double</FONT>      loc1 = <FONT ID="FloatPointLiteral">0.0</FONT>;
<A NAME="3000"></A>    <FONT ID="Double">double</FONT>      loc2 = <FONT ID="FloatPointLiteral">0.0</FONT>;
<A NAME="3001"></A>    <FONT ID="Double">double</FONT>      relThick = <FONT ID="FloatPointLiteral">1.0</FONT>;
<A NAME="3002"></A>
<A NAME="3003"></A>    loc1 = DcmValue.str2Double(ip.getSliceLocation(), <FONT ID="FloatPointLiteral">9999.9</FONT>);
<A NAME="3004"></A>    <FONT ID="If">if</FONT> ((loc1 == <FONT ID="FloatPointLiteral">9999.9</FONT>) | (numSlices == <FONT ID="IntegerLiteral">1</FONT>)) {
<A NAME="3005"></A>      relThick = <FONT ID="FloatPointLiteral">1.0</FONT>;
<A NAME="3006"></A>    } <FONT ID="Else">else</FONT> {
<A NAME="3007"></A>      loc2 = DcmValue.str2Double(imaStack.getPictureAtPos(slicenum + <FONT ID="IntegerLiteral">1</FONT>).getSliceLocation(), <FONT ID="FloatPointLiteral">9999.9</FONT>);
<A NAME="3008"></A>      relThick = Math.abs(loc2 - loc1) / ip.getPixelSpacingRow();
<A NAME="3009"></A>    } 
<A NAME="3010"></A>
<A NAME="3011"></A>    <FONT ID="Double">double</FONT>  thickness = <FONT ID="FloatPointLiteral">0.0</FONT>;
<A NAME="3012"></A>
<A NAME="3013"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> y = <FONT ID="IntegerLiteral">0</FONT>; y &lt; size; y++) {
<A NAME="3014"></A>      <FONT ID="If">if</FONT> (thickness &gt; relThick) {
<A NAME="3015"></A>        thickness -= relThick;
<A NAME="3016"></A>        slicenum++;
<A NAME="3017"></A>        <FONT ID="If">if</FONT> (slicenum &gt; toSlice) {
<A NAME="3018"></A>          <FONT ID="Break">break</FONT>;
<A NAME="3019"></A>        } 
<A NAME="3020"></A>        ip = imaStack.getPictureAtPos(slicenum);
<A NAME="3021"></A>        origImg = ip.getImage12BitShort();
<A NAME="3022"></A>      } 
<A NAME="3023"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> x = <FONT ID="IntegerLiteral">0</FONT>; x &lt; size; x++) {
<A NAME="3024"></A>        projImg[(y * size) + x] = origImg[(position * size) + x];
<A NAME="3025"></A>      } 
<A NAME="3026"></A>      thickness += <FONT ID="FloatPointLiteral">1.0</FONT>;
<A NAME="3027"></A>    } 
<A NAME="3028"></A>
<A NAME="3029"></A>    <FONT ID="SingleLineComment">// Nun noch optional eine Interpolation
<A NAME="3030"></A></FONT>    <FONT ID="If">if</FONT> (interpolate) {
<A NAME="3031"></A>      <FONT ID="Int">int</FONT> nThick = (<FONT ID="Int">int</FONT>) Math.round(relThick);
<A NAME="3032"></A>
<A NAME="3033"></A>      <FONT ID="If">if</FONT> ((nThick % <FONT ID="IntegerLiteral">2</FONT>) == <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="3034"></A>        nThick++;
<A NAME="3035"></A>      } 
<A NAME="3036"></A>      <FONT ID="Int">int</FONT>   nThickHalf = nThick / <FONT ID="IntegerLiteral">2</FONT>;
<A NAME="3037"></A>
<A NAME="3038"></A>      <FONT ID="Long">long</FONT>  summe;
<A NAME="3039"></A>
<A NAME="3040"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> x = <FONT ID="IntegerLiteral">0</FONT>; x &lt; size; x++) {
<A NAME="3041"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> y = nThickHalf; y &lt; size - nThickHalf; y++) {
<A NAME="3042"></A>          summe = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="3043"></A>          <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = y - nThickHalf; i &lt;= y + nThickHalf; i++) {
<A NAME="3044"></A>            summe += projImg[(i * size) + x];
<A NAME="3045"></A>          } 
<A NAME="3046"></A>          projImg[(y * size) + x] = (<FONT ID="Short">short</FONT>) (summe / nThick);
<A NAME="3047"></A>        } 
<A NAME="3048"></A>      } 
<A NAME="3049"></A>
<A NAME="3050"></A>    }   <FONT ID="SingleLineComment">// if (interpolate)
<A NAME="3051"></A></FONT> 
<A NAME="3052"></A>    <FONT ID="SingleLineComment">// Auslesen eines DcmdataObjects aus einem der Ursprungsbilder
<A NAME="3053"></A></FONT>    DcmDataObject myddo = imaStack.getPictureAtPos(fromSlice).getDDO();
<A NAME="3054"></A>
<A NAME="3055"></A>    <FONT ID="SingleLineComment">// DcmImage aus der Bildmatrix und dem DicomDataObject eines der
<A NAME="3056"></A></FONT>    <FONT ID="SingleLineComment">// Ursprungsbilder erzeugen
<A NAME="3057"></A></FONT>    <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>      dcmimg = <FONT ID="Null">null</FONT>;
<A NAME="3058"></A>
<A NAME="3059"></A>    <FONT ID="Try">try</FONT> {
<A NAME="3060"></A>      dcmimg = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>(myddo);
<A NAME="3061"></A>      dcmimg.pixel16 = projImg;
<A NAME="3062"></A>    } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3063"></A>      err.printStackTrace();
<A NAME="3064"></A>    } 
<A NAME="3065"></A>
<A NAME="3066"></A>    <FONT ID="SingleLineComment">// ImagePlus-Objekt erzeugen. Dies geschieht in der Klasse MyPanel.
<A NAME="3067"></A></FONT>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> newip = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A>(dcmimg);
<A NAME="3068"></A>
<A NAME="3069"></A>    <FONT ID="SingleLineComment">// DDo im ImagePlus abspeichern
<A NAME="3070"></A></FONT>    newip.setDDO(myddo);
<A NAME="3071"></A>
<A NAME="3072"></A>    <FONT ID="SingleLineComment">// Erzeugungsdatum und Uhrzeit im Bild speichern
<A NAME="3073"></A></FONT>    newip.setCurrentDate();
<A NAME="3074"></A>
<A NAME="3075"></A>    <FONT ID="SingleLineComment">// Fensterung im Bild speichern
<A NAME="3076"></A></FONT>    newip.setCW(<FONT ID="IntegerLiteral">2048</FONT>, <FONT ID="IntegerLiteral">4096</FONT>);
<A NAME="3077"></A>
<A NAME="3078"></A>    <FONT ID="Return">return</FONT> newip;
<A NAME="3079"></A>  }   <FONT ID="SingleLineComment">// Methode calcProjection1(int position, int fromSlice, int toSlice, boolean interpolate)
<A NAME="3080"></A></FONT> 
<A NAME="3081"></A>
<A NAME="3082"></A>  <FONT ID="FormalComment">/**
<A NAME="3083"></A>   * Die Methode wird aufgerufen, wenn der Knopf zur Berechnung der zweiten 90-Grad-Projektion
<A NAME="3084"></A>   * gedrueckt wurde. Es wird dann zunaechst ein Dialog aufgeblendet, der abfragt,
<A NAME="3085"></A>   * welche Bilder in die Berechnung einbezogen werden sollen, welche neue Schicht
<A NAME="3086"></A>   * berechnet werden soll und ob die Schicht interpoliert werden soll.
<A NAME="3087"></A>   * Nach dessen Bestaetigung wird ein neues Bild der gewaehlten Projektion
<A NAME="3088"></A>   * berechnet, in den Bildstapel eingefuegt und dargestellt.
<A NAME="3089"></A>   */</FONT>
<A NAME="3090"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> pbProjection2_actionPerformed() {
<A NAME="3091"></A>
<A NAME="3092"></A>    <FONT ID="SingleLineComment">// Auslesen der Position des ersten und letzten Bildes des Stapels
<A NAME="3093"></A></FONT>    <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  myIS = pCanvas.getImageStack();
<A NAME="3094"></A>    <FONT ID="Int">int</FONT>         start = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="3095"></A>    <FONT ID="Int">int</FONT>         end = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="3096"></A>    <FONT ID="Int">int</FONT>         numimages = myIS.getStackSize();
<A NAME="3097"></A>
<A NAME="3098"></A>    <FONT ID="If">if</FONT> (numimages != <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="3099"></A>      start = <FONT ID="IntegerLiteral">1</FONT>;
<A NAME="3100"></A>      end = numimages;
<A NAME="3101"></A>    } 
<A NAME="3102"></A>
<A NAME="3103"></A>    <FONT ID="SingleLineComment">// Oeffen des Dialoges mit voreingestellten Werten
<A NAME="3104"></A></FONT>    <A HREF="../../virtual/dv/ProjParamDlg.java.html">ProjParamDlg</A>  myDlg = <FONT ID="New">new</FONT> <A HREF="../../virtual/dv/ProjParamDlg.java.html">ProjParamDlg</A>(<FONT ID="This">this</FONT>, <FONT ID="StringLiteral">"Projektions-Parameter"</FONT>, <FONT ID="True">true</FONT>);
<A NAME="3105"></A>
<A NAME="3106"></A>    myDlg.setImages(start, end);
<A NAME="3107"></A>    myDlg.setProjectionNr(<FONT ID="IntegerLiteral">2</FONT>);
<A NAME="3108"></A>    myDlg.show();
<A NAME="3109"></A>
<A NAME="3110"></A>    <FONT ID="SingleLineComment">// Aus dem Dialog heraus wird ggf. createNewProj1Image aufgerufen
<A NAME="3111"></A></FONT>
<A NAME="3112"></A>  }   <FONT ID="SingleLineComment">// Methode pbProjection2_actionPerformed()
<A NAME="3113"></A></FONT> 
<A NAME="3114"></A>
<A NAME="3115"></A>  <FONT ID="FormalComment">/**
<A NAME="3116"></A>   * Die Methode berechnet ein neues Bild der zweiten 90-Grad-Projektion, fuegt
<A NAME="3117"></A>   * es in den Bildstapel ein, fenstert es optimal und stellt es dar.
<A NAME="3118"></A>   * @param start Das erste Bild, das in die Berechnung einfliessen soll.
<A NAME="3119"></A>   * @param end Das letzte Bild, das in die Berechnung einfliessen soll.
<A NAME="3120"></A>   * @param slice Die neue Schicht, die berechnet werden soll.
<A NAME="3121"></A>   * @param interpolate Schalter fuer Interpolation ein/aus.
<A NAME="3122"></A>   */</FONT>
<A NAME="3123"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> createNewProj2Image(<FONT ID="Int">int</FONT> start, <FONT ID="Int">int</FONT> end, <FONT ID="Int">int</FONT> slice, <FONT ID="Boolean">boolean</FONT> interpolate) {
<A NAME="3124"></A>
<A NAME="3125"></A>    <FONT ID="SingleLineComment">// Projektion berechnen und neues Bild in Stack einfuegen
<A NAME="3126"></A></FONT>    <FONT ID="Int">int</FONT> pos = pCanvas.createNewImage(calcProjection2(slice, start, end, interpolate));
<A NAME="3127"></A>
<A NAME="3128"></A>    <FONT ID="SingleLineComment">// Neues Bild als aktiviert markieren
<A NAME="3129"></A></FONT>    pCanvas.setActiveImage(pos);
<A NAME="3130"></A>
<A NAME="3131"></A>    <FONT ID="SingleLineComment">// aktives (neues) Bild optimal Fenstern
<A NAME="3132"></A></FONT>    pbOptWindowing_actionPerformed();
<A NAME="3133"></A>  }   <FONT ID="SingleLineComment">// Methode createNewProj2Image(int start, int end, int slice, boolean interpolate)
<A NAME="3134"></A></FONT> 
<A NAME="3135"></A>
<A NAME="3136"></A>  <FONT ID="FormalComment">/**
<A NAME="3137"></A>   * Die Methode berechnet ein neues Bild der zweiten 90-Grad-Projektion. Das
<A NAME="3138"></A>   * Bild wird allerdings nicht in den Bildstapel eingefuegt. Die Methode wird
<A NAME="3139"></A>   * zur Berechnung der Bilder fuer die Animation benoetigt.
<A NAME="3140"></A>   * @param start Das erste Bild, das in die Berechnung einfliessen soll.
<A NAME="3141"></A>   * @param end Das letzte Bild, das in die Berechnung einfliessen soll.
<A NAME="3142"></A>   * @param position Die neue Schicht, die berechnet werden soll.
<A NAME="3143"></A>   * @param interpolate Schalter fuer Interpolation ein/aus.
<A NAME="3144"></A>   */</FONT>
<A NAME="3145"></A>  <FONT ID="Public">public</FONT> <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> calcProjection2(<FONT ID="Int">int</FONT> position, <FONT ID="Int">int</FONT> fromSlice, <FONT ID="Int">int</FONT> toSlice, <FONT ID="Boolean">boolean</FONT> interpolate) {
<A NAME="3146"></A>    <A HREF="../../virtual/tools/ImageStack.java.html">ImageStack</A>  imaStack = pCanvas.getImageStack();
<A NAME="3147"></A>    <FONT ID="Int">int</FONT>         numSlices = toSlice - fromSlice + <FONT ID="IntegerLiteral">1</FONT>;
<A NAME="3148"></A>    <FONT ID="Int">int</FONT>         size = imaStack.getPictureAtPos(fromSlice).getSize();
<A NAME="3149"></A>    <FONT ID="Short">short</FONT>[]     projImg = <FONT ID="New">new</FONT> <FONT ID="Short">short</FONT>[size * size];
<A NAME="3150"></A>    <FONT ID="Int">int</FONT>         slicenum = fromSlice;
<A NAME="3151"></A>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A>   ip = imaStack.getPictureAtPos(slicenum);
<A NAME="3152"></A>    <FONT ID="Short">short</FONT>[]     origImg = ip.getImage12BitShort();
<A NAME="3153"></A>    <FONT ID="Double">double</FONT>      loc1 = <FONT ID="FloatPointLiteral">0.0</FONT>;
<A NAME="3154"></A>    <FONT ID="Double">double</FONT>      loc2 = <FONT ID="FloatPointLiteral">0.0</FONT>;
<A NAME="3155"></A>    <FONT ID="Double">double</FONT>      relThick = <FONT ID="FloatPointLiteral">1.0</FONT>;
<A NAME="3156"></A>
<A NAME="3157"></A>    loc1 = DcmValue.str2Double(ip.getSliceLocation(), <FONT ID="FloatPointLiteral">9999.9</FONT>);
<A NAME="3158"></A>    <FONT ID="If">if</FONT> ((loc1 == <FONT ID="FloatPointLiteral">9999.9</FONT>) | (numSlices == <FONT ID="IntegerLiteral">1</FONT>)) {
<A NAME="3159"></A>      relThick = <FONT ID="FloatPointLiteral">1.0</FONT>;
<A NAME="3160"></A>    } <FONT ID="Else">else</FONT> {
<A NAME="3161"></A>      loc2 = DcmValue.str2Double(imaStack.getPictureAtPos(slicenum + <FONT ID="IntegerLiteral">1</FONT>).getSliceLocation(), <FONT ID="FloatPointLiteral">9999.9</FONT>);
<A NAME="3162"></A>      relThick = Math.abs(loc2 - loc1) / ip.getPixelSpacingRow();
<A NAME="3163"></A>    } 
<A NAME="3164"></A>
<A NAME="3165"></A>    <FONT ID="Double">double</FONT>  thickness = <FONT ID="FloatPointLiteral">0.0</FONT>;
<A NAME="3166"></A>
<A NAME="3167"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> x = <FONT ID="IntegerLiteral">0</FONT>; x &lt; size; x++) {
<A NAME="3168"></A>      <FONT ID="If">if</FONT> (thickness &gt; relThick) {
<A NAME="3169"></A>        thickness -= relThick;
<A NAME="3170"></A>        slicenum++;
<A NAME="3171"></A>        <FONT ID="If">if</FONT> (slicenum &gt; toSlice) {
<A NAME="3172"></A>          <FONT ID="Break">break</FONT>;
<A NAME="3173"></A>        } 
<A NAME="3174"></A>        ip = imaStack.getPictureAtPos(slicenum);
<A NAME="3175"></A>        origImg = ip.getImage12BitShort();
<A NAME="3176"></A>      } 
<A NAME="3177"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> y = <FONT ID="IntegerLiteral">0</FONT>; y &lt; size; y++) {
<A NAME="3178"></A>        projImg[(y * size) + x] = origImg[(y * size) + position];
<A NAME="3179"></A>      } 
<A NAME="3180"></A>      thickness += <FONT ID="FloatPointLiteral">1.0</FONT>;
<A NAME="3181"></A>    } 
<A NAME="3182"></A>
<A NAME="3183"></A>    <FONT ID="SingleLineComment">// Nun noch optional eine Interpolation
<A NAME="3184"></A></FONT>    <FONT ID="If">if</FONT> (interpolate) {
<A NAME="3185"></A>      <FONT ID="Int">int</FONT> nThick = (<FONT ID="Int">int</FONT>) Math.round(relThick);
<A NAME="3186"></A>
<A NAME="3187"></A>      <FONT ID="If">if</FONT> ((nThick % <FONT ID="IntegerLiteral">2</FONT>) == <FONT ID="IntegerLiteral">0</FONT>) {
<A NAME="3188"></A>        nThick++;
<A NAME="3189"></A>      } 
<A NAME="3190"></A>      <FONT ID="Int">int</FONT>   nThickHalf = nThick / <FONT ID="IntegerLiteral">2</FONT>;
<A NAME="3191"></A>
<A NAME="3192"></A>      <FONT ID="Long">long</FONT>  summe;
<A NAME="3193"></A>
<A NAME="3194"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> y = <FONT ID="IntegerLiteral">0</FONT>; y &lt; size; y++) {
<A NAME="3195"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> x = nThickHalf; x &lt; size - nThickHalf; x++) {
<A NAME="3196"></A>          summe = <FONT ID="IntegerLiteral">0</FONT>;
<A NAME="3197"></A>          <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = x - nThickHalf; i &lt;= x + nThickHalf; i++) {
<A NAME="3198"></A>            summe += projImg[(y * size) + i];
<A NAME="3199"></A>          } 
<A NAME="3200"></A>          projImg[(y * size) + x] = (<FONT ID="Short">short</FONT>) (summe / nThick);
<A NAME="3201"></A>        } 
<A NAME="3202"></A>      } 
<A NAME="3203"></A>
<A NAME="3204"></A>    }   <FONT ID="SingleLineComment">// if (interpolate)
<A NAME="3205"></A></FONT> 
<A NAME="3206"></A>    <FONT ID="SingleLineComment">// Auslesen eines DcmdataObjects aus einem der Ursprungsbilder
<A NAME="3207"></A></FONT>    DcmDataObject myddo = imaStack.getPictureAtPos(fromSlice).getDDO();
<A NAME="3208"></A>
<A NAME="3209"></A>    <FONT ID="SingleLineComment">// DcmImage aus der Bildmatrix und dem DicomDataObject eines der
<A NAME="3210"></A></FONT>    <FONT ID="SingleLineComment">// Ursprungsbilder erzeugen
<A NAME="3211"></A></FONT>    <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>      dcmimg = <FONT ID="Null">null</FONT>;
<A NAME="3212"></A>
<A NAME="3213"></A>    <FONT ID="Try">try</FONT> {
<A NAME="3214"></A>      dcmimg = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>(myddo);
<A NAME="3215"></A>      dcmimg.pixel16 = projImg;
<A NAME="3216"></A>    } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3217"></A>      err.printStackTrace();
<A NAME="3218"></A>    } 
<A NAME="3219"></A>
<A NAME="3220"></A>    <FONT ID="SingleLineComment">// ImagePlus-Objekt erzeugen. Dies geschieht in der Klasse MyPanel.
<A NAME="3221"></A></FONT>    <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> newip = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A>(dcmimg);
<A NAME="3222"></A>
<A NAME="3223"></A>    <FONT ID="SingleLineComment">// DDo im ImagePlus abspeichern
<A NAME="3224"></A></FONT>    newip.setDDO(myddo);
<A NAME="3225"></A>
<A NAME="3226"></A>    <FONT ID="SingleLineComment">// Erzeugungsdatum und Uhrzeit im Bild speichern
<A NAME="3227"></A></FONT>    newip.setCurrentDate();
<A NAME="3228"></A>
<A NAME="3229"></A>    <FONT ID="SingleLineComment">// Fensterung im Bild speichern
<A NAME="3230"></A></FONT>    newip.setCW(<FONT ID="IntegerLiteral">2048</FONT>, <FONT ID="IntegerLiteral">4096</FONT>);
<A NAME="3231"></A>
<A NAME="3232"></A>    <FONT ID="Return">return</FONT> newip;
<A NAME="3233"></A>  }   <FONT ID="SingleLineComment">// Methode calcProjection2(int slice, int fromSlice, int toSlice, boolean interpolate)
<A NAME="3234"></A></FONT> 
<A NAME="3235"></A>
<A NAME="3236"></A>  <FONT ID="FormalComment">/**
<A NAME="3237"></A>   * Die Methode setzt das aktuelle Verzeichnis auf den zuletzt gewählten Pfad.
<A NAME="3238"></A>   * @param fd Dialog, für den der Pfad gesetzt wird.
<A NAME="3239"></A>   */</FONT>
<A NAME="3240"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> setStdDirectory(JFileChooser fd) {
<A NAME="3241"></A>
<A NAME="3242"></A>    <FONT ID="SingleLineComment">// Voreingestellten Pfad auslesen und setzen
<A NAME="3243"></A></FONT>    String  Path = (String) <FONT ID="This">this</FONT>.preferences.get(<FONT ID="StringLiteral">"Path"</FONT>);
<A NAME="3244"></A>
<A NAME="3245"></A>    <FONT ID="If">if</FONT> (Path != <FONT ID="Null">null</FONT>) {
<A NAME="3246"></A>      File  myPath = <FONT ID="New">new</FONT> File(Path);
<A NAME="3247"></A>
<A NAME="3248"></A>      <FONT ID="If">if</FONT> (!myPath.exists()) {
<A NAME="3249"></A>        Exception e = <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"Ungültiger Pfad in \nVoreinstellungsdatei"</FONT> + <FONT ID="StringLiteral">"\ndv_preferences.properties !"</FONT>);
<A NAME="3250"></A>
<A NAME="3251"></A>        ErrorMessage.showMessage(e);
<A NAME="3252"></A>        myPath = <FONT ID="New">new</FONT> File(<FONT ID="StringLiteral">"C:\\"</FONT>);
<A NAME="3253"></A>      } 
<A NAME="3254"></A>      fd.setCurrentDirectory(myPath);
<A NAME="3255"></A>      myPath = <FONT ID="Null">null</FONT>;
<A NAME="3256"></A>    } 
<A NAME="3257"></A>  } 
<A NAME="3258"></A>
<A NAME="3259"></A>
<A NAME="3260"></A>  <FONT ID="FormalComment">/**
<A NAME="3261"></A>   * Die Methode liest einie Voreinstellungen aus der Datei
<A NAME="3262"></A>   * preferences.properties ein.
<A NAME="3263"></A>   */</FONT>
<A NAME="3264"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> loadPreferences() {
<A NAME="3265"></A>    LineNumberReader  numRead = <FONT ID="Null">null</FONT>;
<A NAME="3266"></A>    <FONT ID="Boolean">boolean</FONT>           ok = <FONT ID="True">true</FONT>;
<A NAME="3267"></A>
<A NAME="3268"></A>    <FONT ID="SingleLineComment">// Versuche, den neuen Eingabestream zu oeffnen
<A NAME="3269"></A></FONT>    <FONT ID="Try">try</FONT> {
<A NAME="3270"></A>      FileReader  streamIn = <FONT ID="New">new</FONT> FileReader(<FONT ID="StringLiteral">"dv_preferences.properties"</FONT>);
<A NAME="3271"></A>
<A NAME="3272"></A>      numRead = <FONT ID="New">new</FONT> LineNumberReader(streamIn);
<A NAME="3273"></A>    } <FONT ID="Catch">catch</FONT> (Exception e) {
<A NAME="3274"></A>      System.out.println(<FONT ID="StringLiteral">"Preferencesdatei nicht gefunden"</FONT>);
<A NAME="3275"></A>      <FONT ID="Return">return</FONT>;
<A NAME="3276"></A>    }   <FONT ID="SingleLineComment">// try-catch
<A NAME="3277"></A></FONT>     String e = <FONT ID="Null">null</FONT>;
<A NAME="3278"></A>
<A NAME="3279"></A>    <FONT ID="Do">do</FONT> {
<A NAME="3280"></A>      <FONT ID="Try">try</FONT> {
<A NAME="3281"></A>        e = numRead.readLine();
<A NAME="3282"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3283"></A>        <FONT ID="Return">return</FONT>;
<A NAME="3284"></A>      } 
<A NAME="3285"></A>      <FONT ID="If">if</FONT> (e == <FONT ID="Null">null</FONT>) {
<A NAME="3286"></A>        <FONT ID="Break">break</FONT>;
<A NAME="3287"></A>      } 
<A NAME="3288"></A>      StringTokenizer token = <FONT ID="New">new</FONT> StringTokenizer(e, <FONT ID="StringLiteral">"="</FONT>);
<A NAME="3289"></A>      String          key = token.nextToken();
<A NAME="3290"></A>      String          value = token.nextToken();
<A NAME="3291"></A>
<A NAME="3292"></A>      value = value.replace(<FONT ID="CharacerLiteral">'"'</FONT>, <FONT ID="CharacerLiteral">' '</FONT>).trim();
<A NAME="3293"></A>      <FONT ID="Try">try</FONT> {
<A NAME="3294"></A>        preferences.put(key, value);
<A NAME="3295"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3296"></A>        System.out.println(<FONT ID="StringLiteral">"Fehler beim Lesen der Preferencesdatei"</FONT>);
<A NAME="3297"></A>      } 
<A NAME="3298"></A>    } <FONT ID="While">while</FONT> (e != <FONT ID="Null">null</FONT>);
<A NAME="3299"></A>    <FONT ID="Try">try</FONT> {
<A NAME="3300"></A>      numRead.close();
<A NAME="3301"></A>    } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3302"></A>      System.out.println(<FONT ID="StringLiteral">"Fehler beim Schließen der Preferencesdatei"</FONT>);
<A NAME="3303"></A>    } 
<A NAME="3304"></A>  } 
<A NAME="3305"></A>
<A NAME="3306"></A>
<A NAME="3307"></A>  <FONT ID="FormalComment">/**
<A NAME="3308"></A>   * Die Methode wird beim Beenden der Anwendung aufgerufen und speichert dann
<A NAME="3309"></A>   * einige Voreinstellungen wie z.B. den Dateipfad, aus dem zuletzt ein
<A NAME="3310"></A>   * Rohdatensatz geladen wurde.
<A NAME="3311"></A>   */</FONT>
<A NAME="3312"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> savePreferences() {
<A NAME="3313"></A>    BufferedWriter  bufWriter = <FONT ID="Null">null</FONT>;
<A NAME="3314"></A>    FileWriter      streamOut = <FONT ID="Null">null</FONT>;
<A NAME="3315"></A>    <FONT ID="Boolean">boolean</FONT>         ok = <FONT ID="True">true</FONT>;
<A NAME="3316"></A>
<A NAME="3317"></A>    <FONT ID="SingleLineComment">// Ausgabestream zu oeffnen
<A NAME="3318"></A></FONT>    <FONT ID="Try">try</FONT> {
<A NAME="3319"></A>      streamOut = <FONT ID="New">new</FONT> FileWriter(<FONT ID="StringLiteral">"dv_preferences.properties"</FONT>);
<A NAME="3320"></A>      bufWriter = <FONT ID="New">new</FONT> BufferedWriter(streamOut);
<A NAME="3321"></A>    } <FONT ID="Catch">catch</FONT> (Exception e) {
<A NAME="3322"></A>      System.out.println(<FONT ID="StringLiteral">"Fehler beim Öffnen der Preferencesdatei"</FONT>);
<A NAME="3323"></A>    } 
<A NAME="3324"></A>    Enumeration iterator = preferences.propertyNames();
<A NAME="3325"></A>
<A NAME="3326"></A>    <FONT ID="While">while</FONT> (iterator.hasMoreElements()) {
<A NAME="3327"></A>      String  key = (String) iterator.nextElement();
<A NAME="3328"></A>      String  value = (String) preferences.get(key);
<A NAME="3329"></A>
<A NAME="3330"></A>      <FONT ID="Try">try</FONT> {
<A NAME="3331"></A>        streamOut.write(key);
<A NAME="3332"></A>        streamOut.write(<FONT ID="StringLiteral">"=\""</FONT>);
<A NAME="3333"></A>        streamOut.write(value + <FONT ID="StringLiteral">"\"\n"</FONT>);
<A NAME="3334"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3335"></A>        System.out.println(<FONT ID="StringLiteral">"Fehler beim Schreiben der Preferencesdatei"</FONT>);
<A NAME="3336"></A>      } 
<A NAME="3337"></A>      <FONT ID="Try">try</FONT> {
<A NAME="3338"></A>        streamOut.flush();
<A NAME="3339"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3340"></A>        System.out.println(<FONT ID="StringLiteral">"Fehler beim Schreiben der Preferencesdatei"</FONT>);
<A NAME="3341"></A>      } 
<A NAME="3342"></A>      <FONT ID="Try">try</FONT> {
<A NAME="3343"></A>        streamOut.close();
<A NAME="3344"></A>      } <FONT ID="Catch">catch</FONT> (Exception err) {
<A NAME="3345"></A>        System.out.println(<FONT ID="StringLiteral">"Fehler beim Schließen der Preferencesdatei"</FONT>);
<A NAME="3346"></A>      } 
<A NAME="3347"></A>      streamOut = <FONT ID="Null">null</FONT>;
<A NAME="3348"></A>    } 
<A NAME="3349"></A>  }   <FONT ID="SingleLineComment">// savePreferences()
<A NAME="3350"></A></FONT> 
<A NAME="3351"></A>
<A NAME="3352"></A>  <FONT ID="FormalComment">/**
<A NAME="3353"></A>   * Method declaration
<A NAME="3354"></A>   * 
<A NAME="3355"></A>   * 
<A NAME="3356"></A>   * @return
<A NAME="3357"></A>   * 
<A NAME="3358"></A>   * @see
<A NAME="3359"></A>   */</FONT>
<A NAME="3360"></A>  <FONT ID="Public">public</FONT> <A HREF="../../virtual/dv/DVPanel.java.html">DVPanel</A> getCanvasReference() {
<A NAME="3361"></A>    <FONT ID="Return">return</FONT> pCanvas;
<A NAME="3362"></A>  } 
<A NAME="3363"></A>
<A NAME="3364"></A>
<A NAME="3365"></A>  <FONT ID="FormalComment">/**
<A NAME="3366"></A>   * Die Methode erzeugt die Bilder der Referenzserie.
<A NAME="3367"></A>   */</FONT>
<A NAME="3368"></A>  <FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> createReferenceSeries() {
<A NAME="3369"></A>
<A NAME="3370"></A>    <FONT ID="SingleLineComment">// Anzahl Bildzeilen
<A NAME="3371"></A></FONT>    <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT>             nRows = <FONT ID="IntegerLiteral">256</FONT>;
<A NAME="3372"></A>
<A NAME="3373"></A>    <FONT ID="SingleLineComment">// Anzahl Bildspalten
<A NAME="3374"></A></FONT>    <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT>             nColumns = <FONT ID="IntegerLiteral">256</FONT>;
<A NAME="3375"></A>
<A NAME="3376"></A>    <FONT ID="SingleLineComment">// Signifikante Bits
<A NAME="3377"></A></FONT>    <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT>             bits = <FONT ID="IntegerLiteral">12</FONT>;
<A NAME="3378"></A>
<A NAME="3379"></A>    <FONT ID="SingleLineComment">// Bildnummer
<A NAME="3380"></A></FONT>    <FONT ID="Int">int</FONT>                   imaNumber;
<A NAME="3381"></A>
<A NAME="3382"></A>    <FONT ID="SingleLineComment">// z-Position des Bildes
<A NAME="3383"></A></FONT>    <FONT ID="Int">int</FONT>                   zPosition;
<A NAME="3384"></A>
<A NAME="3385"></A>    DcmDataObject         ddo;
<A NAME="3386"></A>    <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>              di = <FONT ID="Null">null</FONT>;
<A NAME="3387"></A>    String[]              sa;
<A NAME="3388"></A>    <FONT ID="Boolean">boolean</FONT>               selection = <FONT ID="False">false</FONT>;
<A NAME="3389"></A>    <A HREF="../../virtual/dv/ViewerReferenceSeries.java.html">ViewerReferenceSeries</A> vrs;
<A NAME="3390"></A>    <FONT ID="Int">int</FONT>                   windowCenter;
<A NAME="3391"></A>    <FONT ID="Int">int</FONT>                   windowWidth;
<A NAME="3392"></A>
<A NAME="3393"></A>    <FONT ID="SingleLineComment">// Wenn die Option 'An Selektion positionieren' eingeschaltet ist,
<A NAME="3394"></A></FONT>    <FONT ID="SingleLineComment">// wird dies zunächst ungeschaltet und gemerkt
<A NAME="3395"></A></FONT>    <FONT ID="If">if</FONT> (rbNextImageAtSelection.isSelected()) {
<A NAME="3396"></A>      selection = <FONT ID="True">true</FONT>;
<A NAME="3397"></A>      rbNextImageAtFreePlace.setSelected(<FONT ID="True">true</FONT>);
<A NAME="3398"></A>    } 
<A NAME="3399"></A>
<A NAME="3400"></A>    <FONT ID="SingleLineComment">// Eine neue Referenzserie erzeugen
<A NAME="3401"></A></FONT>    vrs = <FONT ID="New">new</FONT> <A HREF="../../virtual/dv/ViewerReferenceSeries.java.html">ViewerReferenceSeries</A>(nRows, nColumns, bits);
<A NAME="3402"></A>
<A NAME="3403"></A>    <FONT ID="SingleLineComment">// Serie mit 16 Referenzbildern erzeugen
<A NAME="3404"></A></FONT>    <FONT ID="For">for</FONT> (imaNumber = <FONT ID="IntegerLiteral">1</FONT>; imaNumber &lt;= <FONT ID="IntegerLiteral">16</FONT>; imaNumber++) {
<A NAME="3405"></A>
<A NAME="3406"></A>      zPosition = (imaNumber - <FONT ID="IntegerLiteral">1</FONT>) * <FONT ID="IntegerLiteral">4</FONT>;
<A NAME="3407"></A>
<A NAME="3408"></A>      <FONT ID="SingleLineComment">// Das DcmDataObject des Refernzbildes erzeugen
<A NAME="3409"></A></FONT>      ddo = vrs.getDDO(zPosition, imaNumber);
<A NAME="3410"></A>
<A NAME="3411"></A>      <FONT ID="SingleLineComment">// Das Refernzbildes darstellen
<A NAME="3412"></A></FONT>      <FONT ID="Try">try</FONT> {
<A NAME="3413"></A>        di = <FONT ID="New">new</FONT> <A HREF="../../virtual/tools/DcmImage.java.html">DcmImage</A>(ddo);
<A NAME="3414"></A>      } <FONT ID="Catch">catch</FONT> (Exception e) {}
<A NAME="3415"></A>
<A NAME="3416"></A>      <FONT ID="SingleLineComment">// Erzeugen eines ImagePlus-Objektes aus dem DcmImage
<A NAME="3417"></A></FONT>      <A HREF="../../virtual/tools/ImagePlus.java.html">ImagePlus</A> ip = pCanvas.createNewImage(di);
<A NAME="3418"></A>
<A NAME="3419"></A>      <FONT ID="SingleLineComment">// Zusaetlich das DcmDataObject zum ImagePlus speichern. damit gehen keine
<A NAME="3420"></A></FONT>      <FONT ID="SingleLineComment">// Informationen verloren
<A NAME="3421"></A></FONT>      ip.setDDO(ddo);
<A NAME="3422"></A>
<A NAME="3423"></A>      <FONT ID="SingleLineComment">// VOI LUT Module PS 3.3-C.11.2:
<A NAME="3424"></A></FONT>      <FONT ID="SingleLineComment">// - Center und Window sind optionale Attribute.
<A NAME="3425"></A></FONT>      <FONT ID="SingleLineComment">// - sind mehere Paare definiert, wird das erste Paar genommen.
<A NAME="3426"></A></FONT>      <FONT ID="If">if</FONT> (ddo.isAvailable(DcmDDE.DD_WindowCenter) &amp; ddo.hasValue(DcmDDE.DD_WindowCenter)) {
<A NAME="3427"></A>        sa = DcmValue.str2StringArray(ddo.getString(DcmDDE.DD_WindowCenter), <FONT ID="StringLiteral">"\\"</FONT>);
<A NAME="3428"></A>        windowCenter = (<FONT ID="Int">int</FONT>) DcmValue.str2Long(sa[<FONT ID="IntegerLiteral">0</FONT>], <FONT ID="IntegerLiteral">2048</FONT>);
<A NAME="3429"></A>        sa = DcmValue.str2StringArray(ddo.getString(DcmDDE.DD_WindowWidth), <FONT ID="StringLiteral">"\\"</FONT>);
<A NAME="3430"></A>        windowWidth = (<FONT ID="Int">int</FONT>) DcmValue.str2Long(sa[<FONT ID="IntegerLiteral">0</FONT>], <FONT ID="IntegerLiteral">4096</FONT>);
<A NAME="3431"></A>      } <FONT ID="Else">else</FONT> {
<A NAME="3432"></A>        windowCenter = <FONT ID="IntegerLiteral">2048</FONT>;
<A NAME="3433"></A>        windowWidth = <FONT ID="IntegerLiteral">4096</FONT>;
<A NAME="3434"></A>      } 
<A NAME="3435"></A>      pCenter.setValue(windowCenter);
<A NAME="3436"></A>      pWindow.setValue(windowWidth);
<A NAME="3437"></A>    } 
<A NAME="3438"></A>
<A NAME="3439"></A>    <FONT ID="SingleLineComment">// Option 'An Selektion positionieren' auf Ursprungswert zuruecksetzen
<A NAME="3440"></A></FONT>    rbNextImageAtSelection.setSelected(selection);
<A NAME="3441"></A>  } 
<A NAME="3442"></A>
<A NAME="3443"></A>}
<A NAME="3444"></A>
<A NAME="3445"></A>
<A NAME="3446"></A>
<A NAME="3447"></A>
<A NAME="3448"></A>
<A NAME="3449"></A>
<A NAME="3450"></A>
<A NAME="3451"></A>
<A NAME="3452"></A>
<A NAME="3453"></A>
<A NAME="3454"></A>
<A NAME="3455"></A>
<A NAME="3456"></A>
<A NAME="3457"></A>
<A NAME="3458"></A>
<A NAME="3459"></A>
<A NAME="3460"></A>
<A NAME="3461"></A>
<A NAME="3462"></A>
<A NAME="3463"></A>
<A NAME="3464"></A>
<A NAME="3465"></A>
<A NAME="3466"></A>
<A NAME="3467"></A>
<A NAME="3468"></A>
<A NAME="3469"></A>
<A NAME="3470"></A>
<A NAME="3471"></A>
<A NAME="3472"></A>
<A NAME="3473"></A>
<A NAME="3474"></A>
<A NAME="3475"></A>
<A NAME="3476"></A>
<A NAME="3477"></A>
<A NAME="3478"></A>
<A NAME="3479"></A>
<A NAME="3480"></A>
<A NAME="3481"></A>
<A NAME="3482"></A>
<A NAME="3483"></A>
<A NAME="3484"></A>
<A NAME="3485"></A>
<A NAME="3486"></A>
<A NAME="3487"></A>
<A NAME="3488"></A>
<A NAME="3489"></A>
<A NAME="3490"></A>
<A NAME="3491"></A>
<A NAME="3492"></A>
<A NAME="3493"></A>
<A NAME="3494"></A>
<A NAME="3495"></A>
<A NAME="3496"></A>
<A NAME="3497"></A>
<A NAME="3498"></A>
<A NAME="3499"></A>
<A NAME="3500"></A>
<A NAME="3501"></A>
<A NAME="3502"></A>
<A NAME="3503"></A>
<A NAME="3504"></A>
<A NAME="3505"></A>
<A NAME="3506"></A>
<A NAME="3507"></A>
<A NAME="3508"></A>
<A NAME="3509"></A>
<A NAME="3510"></A>
<A NAME="3511"></A>
<A NAME="3512"></A>
<A NAME="3513"></A>
<A NAME="3514"></A>
<A NAME="3515"></A>
<A NAME="3516"></A>
<A NAME="3517"></A>
<A NAME="3518"></A>
<A NAME="3519"></A>
<A NAME="3520"></A><FONT ID="MultiLineComment">/*--- formatting done in "My Own Convention" style on 11-12-2005 ---*/</FONT>
<A NAME="3521"></A>
<A NAME="3522"></A></pre><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">ViewerFrame</font>
</td>
<td align="right" colspan="2" width="33%"></td>
</tr>
</TABLE>

</BODY>
</HTML>